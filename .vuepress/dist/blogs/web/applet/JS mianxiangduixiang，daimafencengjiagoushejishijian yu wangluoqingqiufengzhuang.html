<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <link rel="icon" href="favicon.ico"><title>JS 面向对象，代码分层架构设计实践 与 网络请求封装 | xunyublog</title><meta name="description" content="用代码将梦想照进现实">
    <link rel="modulepreload" href="/xunyu-blog/assets/app-9abed726.js"><link rel="modulepreload" href="/xunyu-blog/assets/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html-d34591ba.js"><link rel="modulepreload" href="/xunyu-blog/assets/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html-952edd36.js"><link rel="prefetch" href="/xunyu-blog/assets/index.html-0a05feab.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-8c2edf06.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-4b3ba946.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-47172bd3.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-06281f40.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-f0d1d354.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-ebff1241.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-8ebf0941.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-7e2fe36f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-f01b1d86.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-cb91802b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-ec10ed1d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-17c6444b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-ee5a3abc.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-7c68cf3f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-2bff94e1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-671d86a4.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-47efc587.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-80880afd.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-04bbd1d5.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-103e2208.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-652450b0.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-30015e5f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-d207aad1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-21469184.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-f9835b2a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-ce0d065c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-c10c52d6.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-5d7f901a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-cfdaadf7.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-2a4bf96c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-0b0463a7.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-953f98a2.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-6599e18f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-6cf06f14.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-1a88d37b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-c8e98ed0.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-800887e5.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-06f5ab5e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-5d669565.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-cda0070c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-4eeeb806.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/erchashu.html-015b2412.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/api.html-f1aa8008.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/home.html-b763c7d1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/plugin.html-b911482d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/theme.html-cfc3d2cc.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-1065dd3d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-a6dbeb12.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/meirimianshiti.html-af6c423e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-1d33ca8a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-28d0f9d0.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JSON、Ajax、kuayuqingqiu、XHR duixiang、Axios yu Fetch.html-2eb499a4.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/qianhouduanshujujiaohu yu HTTP xieyi.html-c67e24f6.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/bendicunchu Cookie、localStorage、sessionStorage shijian.html-ab5930a1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JS mianxiangduixiang、fencengsheji、dongtaishujubianlizuijiashijianyuyingyong.html-6850437f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/qianhouduanfenlijiagou VS chuantongjiagou，xingyezuijiashijian.html-c57cfb42.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/xiaochengxu npm zhichi，zhuangtaiguanli，fenbao，zidingyi tabBar.html-95261571.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/xiaochengxujieliufangdou，gujiapinggongnen、yonghutiyanyouhuayushijian.html-bb4625fe.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/xiaochengxuxiangmujiegou、peizhiceng、shituceng、luojiceng、suzhuhuanjing.html-1054fc09.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxuyunkaifashixianzhucedenglu yu duozhongduanchangjiandenglufangshi.html-5289d413.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxufazhanshi、kaifahuanjingzhunbei、tuanduixiezuoshangxianliucheng.html-411ff885.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxudeshengmingzhouqi、shengmingzhouqihanshu yu shijianyingyong.html-e6f53f84.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxuzidingyizujianfengzhuang，xiangmuzuijiashijianzongheyingyong.html-f0a7ab69.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxuzidingyizujian，hexinjichu he shijianyingyong.html-d6b96b7b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxushitucengdezujian、shujubangding，liebiao、tiaojianxuanran.html-569f87c1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxuyemiandaohang、chuancan、shijian、API、wangluoqingqiu.html-27016480.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Class leideshuxing、fangfa、jicheng、gouzaohanshujijiejuefangan.html-3291dfc6.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ECMAScript、ES6 jianshi，let、const、var qubieheyingyong.html-21abdf0b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 Module mokuaixitong.html-0090f58f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 Proxy daili yu Reflect fanshe，Vue3 xiangyingshishujuyuanli.html-18be61f3.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 shengyucanshu he zhankaiyunsuanfuzaishijikaifazhongdeyingyong.html-b3e19cd1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 zifuchuan、shuzu、duixiangdexinzengfangfahechangjianyingyong.html-56ac321c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 jiantouhanshu he duixiangzimianliangzengqiang，dachangmianshizhentijiexi.html-7d7d34ad.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 jiegoufuzhi，hanshucanshumorenzhi，zaixiangmuzhongdeyingyongchangjing.html-a2fbe8a5.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Generator hanshudeshijianyushijianyingyong.html-1a663660.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript zhongde Event Loop shijianxunhuan、weirenwuyuhongrenwu.html-187e9717.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Promise yongfa、shilifangfa、yuanliyuyibubianchengdeshijianyingyong.html-e34109a1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Set、WeakSet、Map shujujiegoudeyingyongjimianshizhentijiexi.html-2790fd0a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Symbol、BigInt、mobanzifuchuandeyingyongchangjinghedicengyuanli.html-687c1ba9.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/shejimoshi - diedaiqimoshihe Iterator bianliqiyu for...of xunhuan.html-2fa5c90c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS zhong class leixing，fanxing，leixingduanyanhexinjichu yu shijianyingyong.html-1daa5901.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS gongchengshijianzhongdebianyigongju，daimajianchagongju，danyuanceshi.html-f9b921dc.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS gongchengshijian，goujiangongju，mokuaixitong，bianxieleixingshengmingwenjian.html-9788409d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS mokuai，namespace mingmingkongjian，declare guanjianzi.html-b753b10d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS deleixingjianchajizhi，leixingjianrongxing、baohujizhi、gaojileixing.html-45b11901.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript zhong Enum meijuleixing、interface jiekouleixing.html-c1f7d18f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript hanshuleixing、symbol leixing、duixiangleixing.html-46ca47be.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript kuaisurumen - hexinjichu，TS jibenshujuleixing.html-7818d471.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript shuzu、yuanzu，any、unknown、never leixing.html-99c3ae7b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript zhushizhiling，tsconfig.json，tsc minglingxingbianjiqi.html-000c0509.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript leixingyunsuanfu，leixingyingshe，leixinggongju.html-ac4a71d5.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-b0da4c7a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Pinia quanjuzhuangtaiguanli，shenru State、Getter、Action.html-79f7b0d1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue Router daohangshouwei、guoduyugundong、lanjiazai、dongtailuyou.html-3c905286.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue Router luyouchuancan、bieming、pipeiyufa、bianchengshidaohang.html-266b3c65.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue Router luyou，qianhouduanluyouyuanli yu jutishixian.html-40cbc854.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zhong Transition he TransitionGroup zujian，shijianyingyong.html-637cb469.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zhongde Teleport nazhizujian.html-cfe0a9df.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue xiongdizujianjiantongxin、fabuyudingyue，dongtai、yibuzujian.html-51954835.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue danwenjianzujian，fuzizujianjianchuanzhi、tongxin，touchuanshuxing.html-fc307d9c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue jichu - mobanyufa、shijianchuli、jisuanshuxing、zhentingqi.html-d2004456.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue jichu - biaodan、yangshibangding，tiaojian、liebiaoxuanran、zhiling.html-ad9bed7f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue chajiankaifa，Element Plus、VantUI zujiankushijianyingyong.html-e16136eb.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue chacao Slots，zidingyidanchuang、gaojiliebiaozujian，yilaizhuru.html-286b482c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue xuanranjizhi - xuni DOM，render、h hanshu，xuanranliucheng.html-0a1645af.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue shengmingzhouqi、zidingyizhiling、mobanyinyongdeyuanliyushijian.html-1891e63e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zuheshi API - ref，tongxin API，yilaizhuru，shengmingzhouqi.html-0534c781.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html-7efe16f2.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zuheshi API - watch he watchEffect、zidingyizhiling.html-ef680d5e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-2eea7b84.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-bfcad5c2.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-9e62a274.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-37764a08.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-b4301eb2.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-3f3e0ac5.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-98245fe7.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-10bf6ede.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-cf44f621.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-2a96e13d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-d770288e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-e390d144.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-4f29ec0e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-6ce28d36.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-4dc498b5.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-04d00920.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-a70c527f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-0e65f09d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-3ecd9a8f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-b4cae7e0.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-03480296.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-bd4dad91.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-4715d885.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-1949cd30.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-bb5f0b0b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-3168a5d9.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-c742634d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-4b93f1b2.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-976f8e6c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-4523a0a3.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-74093f54.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-c60318ee.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-60ac5bfc.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-a4001b77.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-28eb2b16.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-3fdf13a9.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-f533c4ea.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-a9738019.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-350652cd.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-084265ff.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-c3683869.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-cb77dc18.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/erchashu.html-e65857e5.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/api.html-1914e85a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/home.html-355f9ded.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/plugin.html-adb3992c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/theme.html-732857d2.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-1dcc3f25.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-ff508548.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/meirimianshiti.html-21b2921c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-27e4ed1d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-dcbc577f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JSON、Ajax、kuayuqingqiu、XHR duixiang、Axios yu Fetch.html-67d30b28.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/qianhouduanshujujiaohu yu HTTP xieyi.html-0b543209.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/bendicunchu Cookie、localStorage、sessionStorage shijian.html-43721b28.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JS mianxiangduixiang、fencengsheji、dongtaishujubianlizuijiashijianyuyingyong.html-9d9d0187.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/qianhouduanfenlijiagou VS chuantongjiagou，xingyezuijiashijian.html-061b4430.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/xiaochengxu npm zhichi，zhuangtaiguanli，fenbao，zidingyi tabBar.html-1cc5f405.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/xiaochengxujieliufangdou，gujiapinggongnen、yonghutiyanyouhuayushijian.html-02ad5ffe.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/xiaochengxuxiangmujiegou、peizhiceng、shituceng、luojiceng、suzhuhuanjing.html-4af09646.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxuyunkaifashixianzhucedenglu yu duozhongduanchangjiandenglufangshi.html-6797ff09.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxufazhanshi、kaifahuanjingzhunbei、tuanduixiezuoshangxianliucheng.html-c79a099d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxudeshengmingzhouqi、shengmingzhouqihanshu yu shijianyingyong.html-457465f9.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxuzidingyizujianfengzhuang，xiangmuzuijiashijianzongheyingyong.html-cf1ac4f4.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxuzidingyizujian，hexinjichu he shijianyingyong.html-a1f25617.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxushitucengdezujian、shujubangding，liebiao、tiaojianxuanran.html-29646934.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxuyemiandaohang、chuancan、shijian、API、wangluoqingqiu.html-0fea6ab2.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Class leideshuxing、fangfa、jicheng、gouzaohanshujijiejuefangan.html-b19472b4.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ECMAScript、ES6 jianshi，let、const、var qubieheyingyong.html-d5edbe06.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 Module mokuaixitong.html-3e89d219.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 Proxy daili yu Reflect fanshe，Vue3 xiangyingshishujuyuanli.html-02f3e4f2.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 shengyucanshu he zhankaiyunsuanfuzaishijikaifazhongdeyingyong.html-bcf0c400.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 zifuchuan、shuzu、duixiangdexinzengfangfahechangjianyingyong.html-9e530274.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 jiantouhanshu he duixiangzimianliangzengqiang，dachangmianshizhentijiexi.html-4322f939.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 jiegoufuzhi，hanshucanshumorenzhi，zaixiangmuzhongdeyingyongchangjing.html-6a384c08.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Generator hanshudeshijianyushijianyingyong.html-603ddbca.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript zhongde Event Loop shijianxunhuan、weirenwuyuhongrenwu.html-3270bc53.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Promise yongfa、shilifangfa、yuanliyuyibubianchengdeshijianyingyong.html-6089a1a1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Set、WeakSet、Map shujujiegoudeyingyongjimianshizhentijiexi.html-e531000e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Symbol、BigInt、mobanzifuchuandeyingyongchangjinghedicengyuanli.html-6962f0fe.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/shejimoshi - diedaiqimoshihe Iterator bianliqiyu for...of xunhuan.html-8740bdaa.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS zhong class leixing，fanxing，leixingduanyanhexinjichu yu shijianyingyong.html-d2905729.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS gongchengshijianzhongdebianyigongju，daimajianchagongju，danyuanceshi.html-d1fda6e0.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS gongchengshijian，goujiangongju，mokuaixitong，bianxieleixingshengmingwenjian.html-f403fe06.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS mokuai，namespace mingmingkongjian，declare guanjianzi.html-c389788f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS deleixingjianchajizhi，leixingjianrongxing、baohujizhi、gaojileixing.html-860d0893.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript zhong Enum meijuleixing、interface jiekouleixing.html-09644a04.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript hanshuleixing、symbol leixing、duixiangleixing.html-3e750b7a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript kuaisurumen - hexinjichu，TS jibenshujuleixing.html-1f953793.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript shuzu、yuanzu，any、unknown、never leixing.html-dffe1d99.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript zhushizhiling，tsconfig.json，tsc minglingxingbianjiqi.html-34fe7abb.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript leixingyunsuanfu，leixingyingshe，leixinggongju.html-807d6e04.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-36ee6a0d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Pinia quanjuzhuangtaiguanli，shenru State、Getter、Action.html-e95a9cd3.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue Router daohangshouwei、guoduyugundong、lanjiazai、dongtailuyou.html-ce949450.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue Router luyouchuancan、bieming、pipeiyufa、bianchengshidaohang.html-4bd7524e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue Router luyou，qianhouduanluyouyuanli yu jutishixian.html-b3967e56.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zhong Transition he TransitionGroup zujian，shijianyingyong.html-44b87668.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zhongde Teleport nazhizujian.html-c7fcce6b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue xiongdizujianjiantongxin、fabuyudingyue，dongtai、yibuzujian.html-ff4dd225.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue danwenjianzujian，fuzizujianjianchuanzhi、tongxin，touchuanshuxing.html-0c1e3c18.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue jichu - mobanyufa、shijianchuli、jisuanshuxing、zhentingqi.html-b7cb6d90.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue jichu - biaodan、yangshibangding，tiaojian、liebiaoxuanran、zhiling.html-b9ea78c1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue chajiankaifa，Element Plus、VantUI zujiankushijianyingyong.html-ec904e92.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue chacao Slots，zidingyidanchuang、gaojiliebiaozujian，yilaizhuru.html-23f02b01.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue xuanranjizhi - xuni DOM，render、h hanshu，xuanranliucheng.html-8b59e027.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue shengmingzhouqi、zidingyizhiling、mobanyinyongdeyuanliyushijian.html-045b0337.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zuheshi API - ref，tongxin API，yilaizhuru，shengmingzhouqi.html-21495e1f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html-c3458b82.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zuheshi API - watch he watchEffect、zidingyizhiling.html-5d31846e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/404.html-ae6f3138.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/reco-valine-a195b6e9.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/giscus-2a044aea-497f0bd4.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/style-e9220a04.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/docsearch-1d421ddb.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index-82585c84.js" as="script">
    <link rel="preload" href="/xunyu-blog/assets/style-1de2dafc.css" as="style"><link rel="stylesheet" href="/xunyu-blog/assets/style-1de2dafc.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper show-series show-catalog"><header class="navbar-container" style="top:0;"><div class="site-brand nav-item"><img class="logo" src="/xunyu-blog/logo.jpg" alt="xunyublog"><a href="/xunyu-blog/" class="site-name can-hide">xunyublog</a></div><div class="nav-item navbar-links-wrapper" style=""><div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/xunyu-blog/" class="link router-link-active" aria-label="主页"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16.612 2.214a1.01 1.01 0 0 0-1.242 0L1 13.419l1.243 1.572L4 13.621V26a2.004 2.004 0 0 0 2 2h20a2.004 2.004 0 0 0 2-2V13.63L29.757 15L31 13.428zM18 26h-4v-8h4zm2 0v-8a2.002 2.002 0 0 0-2-2h-4a2.002 2.002 0 0 0-2 2v8H6V12.062l10-7.79l10 7.8V26z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->主页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="前端学习笔记"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 2H8a2 2 0 0 0-2 2v4H4v2h2v5H4v2h2v5H4v2h2v4a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm0 26H8v-4h2v-2H8v-5h2v-2H8v-5h2V8H8V4h18z" fill="currentColor"></path><path d="M14 8h8v2h-8z" fill="currentColor"></path><path d="M14 15h8v2h-8z" fill="currentColor"></path><path d="M14 22h8v2h-8z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端学习笔记<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="前端学习笔记"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 2H8a2 2 0 0 0-2 2v4H4v2h2v5H4v2h2v5H4v2h2v4a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm0 26H8v-4h2v-2H8v-5h2v-2H8v-5h2V8H8V4h18z" fill="currentColor"></path><path d="M14 8h8v2h-8z" fill="currentColor"></path><path d="M14 15h8v2h-8z" fill="currentColor"></path><path d="M14 22h8v2h-8z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端学习笔记<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端基础<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/html/" class="link" aria-label="HTML"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTML<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/css/" class="link" aria-label="CSS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/javascript/" class="link" aria-label="JavaScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->进阶<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/ajax/前后端数据交互 与 HTTP 协议.md" class="link" aria-label="Ajax"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Ajax<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/es6/ECMAScript、ES6 简史，let、const、var 区别和应用.md" class="link" aria-label="ES6"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ES6<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/brower/" class="link" aria-label="浏览器原理和性能优化"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->浏览器原理和性能优化<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->小程序<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/applet/微信小程序发展史、开发环境准备、团队协作上线流程.md" class="link" aria-label="微信小程序"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->框架<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/vue/Vue 基础 - 模板语法、事件处理、计算属性、侦听器.md" class="link" aria-label="Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/react/" class="link" aria-label="React"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->外部库<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a class="link" href="https://element.eleme.io/#/zh-CN" target="_blank" rel="noopener noreferrer" aria-label="Element Ui"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Element Ui<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/naiveui/" class="link" aria-label="Naive Ui"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Naive Ui<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/echarts/" class="link" aria-label="Echarts"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Echarts<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TypeScript<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/typescript/TypeScript 快速入门 - 核心基础，TS 基本数据类型.md" class="link" aria-label="TypeScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TypeScript<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->构建工具<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/webpack/" class="link" aria-label="Webpack"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Webpack<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/vite/" class="link" aria-label="Vite"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vite<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="面试题"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M28 10h-5V6a2.002 2.002 0 0 0-2-2H11a2.002 2.002 0 0 0-2 2v4H4a2.002 2.002 0 0 0-2 2v16a2.002 2.002 0 0 0 2 2h24a2.002 2.002 0 0 0 2-2V12a2.002 2.002 0 0 0-2-2zM4 28V12h5v2H7v2h2v2H7v2h2v2H7v2h2v4zm17 0H11V6h10zm7 0h-5v-4h2v-2h-2v-2h2v-2h-2v-2h2v-2h-2v-2h5z" fill="currentColor"></path><path d="M14 8h4v2h-4z" fill="currentColor"></path><path d="M14 12h4v2h-4z" fill="currentColor"></path><path d="M14 16h4v2h-4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试题<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="面试题"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M28 10h-5V6a2.002 2.002 0 0 0-2-2H11a2.002 2.002 0 0 0-2 2v4H4a2.002 2.002 0 0 0-2 2v16a2.002 2.002 0 0 0 2 2h24a2.002 2.002 0 0 0 2-2V12a2.002 2.002 0 0 0-2-2zM4 28V12h5v2H7v2h2v2H7v2h2v2H7v2h2v4zm17 0H11V6h10zm7 0h-5v-4h2v-2h-2v-2h2v-2h-2v-2h2v-2h-2v-2h5z" fill="currentColor"></path><path d="M14 8h4v2h-4z" fill="currentColor"></path><path d="M14 12h4v2h-4z" fill="currentColor"></path><path d="M14 16h4v2h-4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试题<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/html/" class="link" aria-label="HTML"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTML<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/css/" class="link" aria-label="CSS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/javascript/" class="link" aria-label="JavaScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/es6/" class="link" aria-label="ES6"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ES6<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/write/" class="link" aria-label="手写面试题 "><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->手写面试题 <!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/blogs/webpack/" class="link" aria-label="webpack"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->webpack<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/brower/" class="link" aria-label="浏览器网络"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->浏览器网络<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/vue/" class="link" aria-label="Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/react/" class="link" aria-label="React"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/algorithm/" class="link" aria-label="算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->算法<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a href="/xunyu-blog/blogs/algorithm/二叉树.md" class="link" aria-label="算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M19 13h6v2h-6z" fill="currentColor"></path><path d="M13 21h-2v-2H9v2H7v2h2v2h2v-2h2v-2z" fill="currentColor"></path><path d="M7 9h6v2H7z" fill="currentColor"></path><path d="M19 17h6v2h-6z" fill="currentColor"></path><path d="M27 3H5a2.002 2.002 0 0 0-2 2v22a2.002 2.002 0 0 0 2 2h22a2.002 2.002 0 0 0 2-2V5a2.002 2.002 0 0 0-2-2zM15 5v10H5V5zM5 17h10v10H5zm12 10V5h10v22z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->算法<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/xunyu-blog/project/" class="link" aria-label="项目"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 17v8H6v-8h10m0-2H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M27 6v5H17V6h10m0-2H17a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M27 17v5h-5v-5h5m0-2h-5a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M11 6v5H6V6h5m0-2H6a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->项目<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="文件夹"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->文件夹<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="文件夹"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->文件夹<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/xunyu-blog/categories/vue/1/" class="link" aria-label="vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/categories/applet/1/" class="link" aria-label="微信小程序"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/categories/mianshi/1/" class="link" aria-label="面试"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><span class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></header><header class="sub-navbar-container"><span class="nav-item"><div class="toggle-series-button" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div> Series </span></header><div class="mobile-menus-container"><nav class="navbar-links mobile"><!--[--><div class="navbar-links__item"><a href="/xunyu-blog/" class="link router-link-active" aria-label="主页"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16.612 2.214a1.01 1.01 0 0 0-1.242 0L1 13.419l1.243 1.572L4 13.621V26a2.004 2.004 0 0 0 2 2h20a2.004 2.004 0 0 0 2-2V13.63L29.757 15L31 13.428zM18 26h-4v-8h4zm2 0v-8a2.002 2.002 0 0 0-2-2h-4a2.002 2.002 0 0 0-2 2v8H6V12.062l10-7.79l10 7.8V26z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->主页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="前端学习笔记"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 2H8a2 2 0 0 0-2 2v4H4v2h2v5H4v2h2v5H4v2h2v4a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm0 26H8v-4h2v-2H8v-5h2v-2H8v-5h2V8H8V4h18z" fill="currentColor"></path><path d="M14 8h8v2h-8z" fill="currentColor"></path><path d="M14 15h8v2h-8z" fill="currentColor"></path><path d="M14 22h8v2h-8z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端学习笔记<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="前端学习笔记"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 2H8a2 2 0 0 0-2 2v4H4v2h2v5H4v2h2v5H4v2h2v4a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm0 26H8v-4h2v-2H8v-5h2v-2H8v-5h2V8H8V4h18z" fill="currentColor"></path><path d="M14 8h8v2h-8z" fill="currentColor"></path><path d="M14 15h8v2h-8z" fill="currentColor"></path><path d="M14 22h8v2h-8z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端学习笔记<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端基础<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/html/" class="link" aria-label="HTML"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTML<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/css/" class="link" aria-label="CSS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/javascript/" class="link" aria-label="JavaScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->进阶<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/ajax/前后端数据交互 与 HTTP 协议.md" class="link" aria-label="Ajax"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Ajax<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/es6/ECMAScript、ES6 简史，let、const、var 区别和应用.md" class="link" aria-label="ES6"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ES6<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/brower/" class="link" aria-label="浏览器原理和性能优化"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->浏览器原理和性能优化<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->小程序<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/applet/微信小程序发展史、开发环境准备、团队协作上线流程.md" class="link" aria-label="微信小程序"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->框架<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/vue/Vue 基础 - 模板语法、事件处理、计算属性、侦听器.md" class="link" aria-label="Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/react/" class="link" aria-label="React"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->外部库<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a class="link" href="https://element.eleme.io/#/zh-CN" target="_blank" rel="noopener noreferrer" aria-label="Element Ui"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Element Ui<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/naiveui/" class="link" aria-label="Naive Ui"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Naive Ui<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/echarts/" class="link" aria-label="Echarts"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Echarts<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TypeScript<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/typescript/TypeScript 快速入门 - 核心基础，TS 基本数据类型.md" class="link" aria-label="TypeScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TypeScript<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->构建工具<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/webpack/" class="link" aria-label="Webpack"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Webpack<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/vite/" class="link" aria-label="Vite"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vite<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="面试题"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M28 10h-5V6a2.002 2.002 0 0 0-2-2H11a2.002 2.002 0 0 0-2 2v4H4a2.002 2.002 0 0 0-2 2v16a2.002 2.002 0 0 0 2 2h24a2.002 2.002 0 0 0 2-2V12a2.002 2.002 0 0 0-2-2zM4 28V12h5v2H7v2h2v2H7v2h2v2H7v2h2v4zm17 0H11V6h10zm7 0h-5v-4h2v-2h-2v-2h2v-2h-2v-2h2v-2h-2v-2h5z" fill="currentColor"></path><path d="M14 8h4v2h-4z" fill="currentColor"></path><path d="M14 12h4v2h-4z" fill="currentColor"></path><path d="M14 16h4v2h-4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试题<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="面试题"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M28 10h-5V6a2.002 2.002 0 0 0-2-2H11a2.002 2.002 0 0 0-2 2v4H4a2.002 2.002 0 0 0-2 2v16a2.002 2.002 0 0 0 2 2h24a2.002 2.002 0 0 0 2-2V12a2.002 2.002 0 0 0-2-2zM4 28V12h5v2H7v2h2v2H7v2h2v2H7v2h2v4zm17 0H11V6h10zm7 0h-5v-4h2v-2h-2v-2h2v-2h-2v-2h2v-2h-2v-2h5z" fill="currentColor"></path><path d="M14 8h4v2h-4z" fill="currentColor"></path><path d="M14 12h4v2h-4z" fill="currentColor"></path><path d="M14 16h4v2h-4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试题<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/html/" class="link" aria-label="HTML"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTML<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/css/" class="link" aria-label="CSS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/javascript/" class="link" aria-label="JavaScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/es6/" class="link" aria-label="ES6"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ES6<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/write/" class="link" aria-label="手写面试题 "><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->手写面试题 <!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/blogs/webpack/" class="link" aria-label="webpack"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->webpack<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/brower/" class="link" aria-label="浏览器网络"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->浏览器网络<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/vue/" class="link" aria-label="Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/react/" class="link" aria-label="React"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/algorithm/" class="link" aria-label="算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->算法<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a href="/xunyu-blog/blogs/algorithm/二叉树.md" class="link" aria-label="算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M19 13h6v2h-6z" fill="currentColor"></path><path d="M13 21h-2v-2H9v2H7v2h2v2h2v-2h2v-2z" fill="currentColor"></path><path d="M7 9h6v2H7z" fill="currentColor"></path><path d="M19 17h6v2h-6z" fill="currentColor"></path><path d="M27 3H5a2.002 2.002 0 0 0-2 2v22a2.002 2.002 0 0 0 2 2h22a2.002 2.002 0 0 0 2-2V5a2.002 2.002 0 0 0-2-2zM15 5v10H5V5zM5 17h10v10H5zm12 10V5h10v22z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->算法<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/xunyu-blog/project/" class="link" aria-label="项目"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 17v8H6v-8h10m0-2H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M27 6v5H17V6h10m0-2H17a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M27 17v5h-5v-5h5m0-2h-5a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M11 6v5H6V6h5m0-2H6a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->项目<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="文件夹"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->文件夹<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="文件夹"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->文件夹<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/xunyu-blog/categories/vue/1/" class="link" aria-label="vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/categories/applet/1/" class="link" aria-label="微信小程序"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/categories/mianshi/1/" class="link" aria-label="面试"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><div class="appearance"><span>Appearance</span><span class="xicon-container btn-toggle-dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span></div></div><div class="series-mask"></div><aside class="series-container"><div class="site-brand"><img class="logo" src="/xunyu-blog/logo.jpg" alt="xunyublog"><a href="/xunyu-blog/" class="site-name can-hide">xunyublog</a></div><!--[--><!--[--><section class="series-group series-item"><h5 class="series-heading active">微信小程序<span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a href="/xunyu-blog/blogs/web/applet/weixinxiaochengxufazhanshi、kaifahuanjingzhunbei、tuanduixiezuoshangxianliucheng.html" class="link series-item" aria-label="微信小程序发展史、开发环境准备、团队协作上线流程"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序发展史、开发环境准备、团队协作上线流程<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/applet/xiaochengxuxiangmujiegou、peizhiceng、shituceng、luojiceng、suzhuhuanjing.html" class="link series-item" aria-label="小程序项目结构、配置层、视图层、逻辑层、宿主环境"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->小程序项目结构、配置层、视图层、逻辑层、宿主环境<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/applet/weixinxiaochengxushitucengdezujian、shujubangding，liebiao、tiaojianxuanran.html" class="link series-item" aria-label="微信小程序视图层的组件、数据绑定，列表、条件渲染"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序视图层的组件、数据绑定，列表、条件渲染<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/applet/weixinxiaochengxuyemiandaohang、chuancan、shijian、API、wangluoqingqiu.html" class="link series-item" aria-label="微信小程序页面导航、传参、事件、API、网络请求"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序页面导航、传参、事件、API、网络请求<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/applet/weixinxiaochengxudeshengmingzhouqi、shengmingzhouqihanshu yu shijianyingyong.html" class="link series-item" aria-label="微信小程序的生命周期、生命周期函数 与 实践应用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序的生命周期、生命周期函数 与 实践应用<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/applet/qianhouduanfenlijiagou VS chuantongjiagou，xingyezuijiashijian.html" class="link series-item" aria-label="前后端分离架构 VS 传统架构，行业最佳实践"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前后端分离架构 VS 传统架构，行业最佳实践<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/applet/weixinxiaochengxuzidingyizujian，hexinjichu he shijianyingyong.html" class="link series-item" aria-label="微信小程序自定义组件，核心基础 和 实践应用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序自定义组件，核心基础 和 实践应用<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/applet/weixinxiaochengxuzidingyizujianfengzhuang，xiangmuzuijiashijianzongheyingyong.html" class="link series-item" aria-label="微信小程序自定义组件封装，项目最佳实践综合应用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序自定义组件封装，项目最佳实践综合应用<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html" class="router-link-active router-link-exact-active link router-link-active series-item active" aria-label="JS 面向对象，代码分层架构设计实践 与 网络请求封装"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JS 面向对象，代码分层架构设计实践 与 网络请求封装<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang、fencengsheji、dongtaishujubianlizuijiashijianyuyingyong.html" class="link series-item" aria-label="JS 面向对象、分层设计、动态数据遍历最佳实践与应用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JS 面向对象、分层设计、动态数据遍历最佳实践与应用<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/applet/xiaochengxujieliufangdou，gujiapinggongnen、yonghutiyanyouhuayushijian.html" class="link series-item" aria-label="小程序节流防抖，骨架屏功能、用户体验优化与实践"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->小程序节流防抖，骨架屏功能、用户体验优化与实践<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/applet/xiaochengxu npm zhichi，zhuangtaiguanli，fenbao，zidingyi tabBar.html" class="link series-item" aria-label="小程序 npm 支持，状态管理，分包，自定义 tabBar"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->小程序 npm 支持，状态管理，分包，自定义 tabBar<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/applet/weixinxiaochengxuyunkaifashixianzhucedenglu yu duozhongduanchangjiandenglufangshi.html" class="link series-item" aria-label="微信小程序云开发实现注册登录 与 多终端常见登录方式"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序云开发实现注册登录 与 多终端常见登录方式<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--]--></aside><!--[--><main class="page-container"><h1 class="page-title">JS 面向对象，代码分层架构设计实践 与 网络请求封装</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->xunyu<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2023-10-28<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->applet<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M10 14a4 4 0 1 1 4-4a4.005 4.005 0 0 1-4 4zm0-6a2 2 0 1 0 1.998 2.004A2.002 2.002 0 0 0 10 8z" fill="currentColor"></path><path d="M16.644 29.415L2.586 15.354A2 2 0 0 1 2 13.941V4a2 2 0 0 1 2-2h9.941a2 2 0 0 1 1.414.586l14.06 14.058a2 2 0 0 1 0 2.828l-9.943 9.943a2 2 0 0 1-2.829 0zM4 4v9.942L18.058 28L28 18.058L13.942 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->applet<!--]--></span></span><!----></div><div class="theme-reco-default-content"><div><h1 id="js-面向对象-代码分层架构设计实践-与-网络请求封装" tabindex="-1"><a class="header-anchor" href="#js-面向对象-代码分层架构设计实践-与-网络请求封装" aria-hidden="true">#</a> JS 面向对象，代码分层架构设计实践 与 网络请求封装</h1><p>TIP</p><p>通过上一章节的学习，我们使用微信小程序自定义组件的能力，封装了一个 tabs 组件，经过这个过程我们解决了一个工程隐患，即代码重复实现的问题。</p><p>经历了发现问题，逐步解决问题的方式，学习到了微信小程序小程序项目开发中的实践技巧和解决方案。但我们项目中还没有实际的动态业务数据。</p><p>因此本节内容我们开始来实践如何获取业务数据 并 进行渲染的综合实践。从而衍生到复杂项目中应用 JavaScript 的面向对象 与 代码分层、架构设计等。同时会对 <code>wx.request</code> 进行二次封装实现统一响应、异常处理 以及 async/await 与 同步/异步编程等。再次升级微信小程序自定义组件的封装难度，进行新的自定义组件的封装实践。</p><blockquote><p>搞清楚这些核心实践在实际的项目该如何应用，它的由来、既解决工程问题又能搞定面试相关</p></blockquote><p><strong>JavaScript 面向对象 与 代码分层架构设计</strong></p><ul><li>常规的实现方式</li><li>什么模型</li><li>模型的意义</li><li>软件工程最佳实践</li><li>分层设计的好处</li></ul><p><strong>wx.request 二次封装，实现统一响应和异常处理</strong></p><ul><li><code>wx.request</code> 封装</li><li>全局统一响应、异常处理</li><li>解决方案一：回调函数</li><li>回调地狱解决方案演进脉络</li><li>解决方案二：Promise 演进</li><li>小程序 API 的 Promise 化</li><li>终极解决方案：async/await</li></ul><h2 id="一、javascript-面向对象-与-代码分层架构设计" tabindex="-1"><a class="header-anchor" href="#一、javascript-面向对象-与-代码分层架构设计" aria-hidden="true">#</a> 一、JavaScript 面向对象 与 代码分层架构设计</h2><p>TIP</p><p>前面我们实现了内容标签页 tabs 自定义组件，接下来实现在内容标签的基础上加载不同的数据内容。</p><p>深入浅出面向对象在 JavaScript 中的实践，利用代码分层设计提高代码的可维护性 和 扩展性。</p><h3 id="_1、常规的实现方式" tabindex="-1"><a class="header-anchor" href="#_1、常规的实现方式" aria-hidden="true">#</a> 1、常规的实现方式</h3><p>TIP</p><p>我们前面的学习中，是通过以下方式，发起网络请求来获取页面初始化的数据的</p><p>在 <code>pages/index/index.js</code> 页面逻辑中</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// pages/index/index.js</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 页面的初始数据</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 生命周期函数--监听页面加载</span>
  <span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 初始化课程列表</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getCourseList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 执行其他函数 ......</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 获取课程列表（以 _ 开头，表示页面私有函数）</span>
  <span class="token function">_getCourseList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 发起网络请求，获取课程列表数据</span>
    wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// ......</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 部分省略 ......</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在企业项目开发中的最佳实践</p><ul><li>页面数据初始化时，onLoad 生命周期函数作为一个总的入口，进入后会分别执行各种函数，不要在其中写任何业务逻辑。这样做对于项目维护性、代码的可读性都会非常高</li><li>对于函数的封装也有利于在其他函数中复用，因此不会在 onLoad 中直接发起网络请求</li><li>会重新定义一个页面的私有函数，并以 <code>_</code>开头，然后再 onLoad 中调用该函数</li><li>在 <code>_getCourseList()</code> 函数中同样也不可以直接发起网络请求 <code>wx.request()</code> ，同样是也是为了代码的可维护性、复用性的问题</li></ul><blockquote><p>我们前面都是通过以上代码的方式做了很多实践，就会发现在其他页面 或 方法中都会用到 <code>wx.request()</code> 并还需要传递很多参数，每次都会重复的书写。这样的方式会带来很多隐患</p></blockquote><ul><li>其中的 url 在多个方法中都会用到，一旦服务端 API 接口域名地址改变了，就需要把项目中所有的接口地址更新，是非常危险的，后期也很难维护</li><li>因此，需要对 <code>wx.request()</code> 这个部分进行再次封装，从而提高项目的可维护性</li></ul><blockquote><p>接下来我们就会通过建立<strong>模型</strong>方式，增加一层来实现。如下</p></blockquote><h3 id="_2、什么是-模型" tabindex="-1"><a class="header-anchor" href="#_2、什么是-模型" aria-hidden="true">#</a> 2、什么是 模型</h3><p>TIP</p><ul><li>对某个业务或数据进行归纳总结，最终对外提供若干函数方法</li><li>每个对外提供的函数方法都有各自独立的作用</li></ul><p>我们需要定义一个通用的模型，后续只要其他页面有需求时，直接调用某个方法，就能拿到我想要的数据</p><p>在项目的根目录中创建文件夹 <code>model</code></p><div class="language-markdown line-numbers-mode" data-ext="md"><pre class="language-markdown"><code>icoding-com-course
├─ model
│ ├─ course.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 <code>/mode/course.js</code> 中定义一个 <code>Course</code> 类</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> arry老师
 * <span class="token keyword">@description</span> 课程相关
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Course</span> <span class="token punctuation">{</span>
  <span class="token doc-comment comment">/**
   * 分页获取课程列表
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">page</span> 页码
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">count</span> 每页数量
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">categoryId</span> 分类 ID（可为空）
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">type</span> 课程类型（可为空）
   */</span>
  <span class="token function">getCourseList</span><span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">,</span> count<span class="token punctuation">,</span> categoryId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;获取课程列表&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 发起网络请求，获取数据</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Course<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 <code>pages/index/index.js</code> 页面逻辑 <code>_getCourseList()</code> 方法中调用模型层中的方法</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// pages/index/index.js</span>

<span class="token comment">// 导入 Course 类</span>
<span class="token keyword">import</span> Course <span class="token keyword">from</span> <span class="token string">&quot;../../mode/course&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 实例化 Course</span>
<span class="token keyword">const</span> course <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Course</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 页面的初始数据</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 生命周期函数--监听页面加载</span>
  <span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 初始化课程列表</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getCourseList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 执行其他函数 ......</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 获取课程列表（以 _ 开头，表示页面私有函数）</span>
  <span class="token function">_getCourseList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 调用模型层中的方法</span>
    course<span class="token punctuation">.</span><span class="token function">getCourseList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 部分省略 ......</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>当页面加载时，就会成功调用模型层中的 <code>getCourseList()</code> 方法</p></blockquote><h3 id="_3、模型的意义" tabindex="-1"><a class="header-anchor" href="#_3、模型的意义" aria-hidden="true">#</a> 3、模型的意义</h3><p>TIP</p><p>用来分离调用 与 内部实现，实现功能解耦</p><h3 id="_3-1、传统的方式" tabindex="-1"><a class="header-anchor" href="#_3-1、传统的方式" aria-hidden="true">#</a> 3.1、传统的方式</h3><p><img src="data:image/png;base64,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" alt="image-20230424193857074"></p><p>注：</p><p>按照传统方式，我们直接在 JS 中发起 <code>wx.request</code> 网络请求 -&gt; 获取到数据 -&gt; 返回到 JS 中 -&gt; 完成数据绑定，渲染到页面</p><h3 id="_3-2、改变调用链路" tabindex="-1"><a class="header-anchor" href="#_3-2、改变调用链路" aria-hidden="true">#</a> 3.2、改变调用链路</h3><p>TIP</p><p>新增一个 Model 模型类（增加一层）</p><p><img src="data:image/png;base64,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" alt="image-20230424194136124"></p><p>注：</p><p>在 JS 中调用 Model 模型类中的方法 -&gt; 在模型类中再发起 <code>wx.request</code> 网络请求 -&gt; 将获取到的数据返回给 Model 模型 -&gt; 再从模型返回给 JS，同时还可有多个 JS （页面）调用模型层</p><p>这么做的目的就是为了解决上边提到的几个问题：</p><ul><li>当接口发生改变时，如果有多个页面 JS 中使用了就都需要修改，通过增加一个 模型层就能很好的解决这个问题</li><li>将具体的请求封装到模型层中，JS 只跟模型做交互，我们还可以有多个 JS（页面）同时调用模型，如果一旦接口发生了改变，我们只需要修改模型层中的代码即可，模型暴露的通常都是模型的方法</li></ul><p>也就是说，无论我们的接口怎么变，只需要在模型中做好适配即可，所有调用模型类的页面全部都不用做改动。这就叫做 “调用与实现的分离”，将可能存在变化的部分隔离起来，集中在一个地方。这与我们前面在自定义组件封装时提到的编程思想 “高类聚，低耦合” 类似。</p><p>把功能与功能之间的耦合度尽量的降低，又可以实现易于维护、并易于扩展的代码。这种在调用 与 实现中加一层的思想在软件工程中的实践是非常广泛的。</p><h3 id="_4、软件工程最佳实践" tabindex="-1"><a class="header-anchor" href="#_4、软件工程最佳实践" aria-hidden="true">#</a> 4、软件工程最佳实践</h3><p>TIP</p><p>计算机科学领域的任何问题都可以通过增加一个间接的中间层来解决。</p><blockquote><p>被用于各个项目工程中，如 Java 工程</p></blockquote><ul><li>DO（Data Object）：与数据库表结构一一对应，通过 DAO 层向上传输数据源对象。</li><li>DTO（Data Transfer Object）：数据传输对象，Service 或 Manager 向外传输的对象。</li><li>BO（Business Object）：业务对象，由 Service 层输出的封装业务逻辑的对象。</li><li>AO（Application Object）：应用对象，在 Web 层与 Service 层之间抽象的复用对象模型，极为贴近展示层，复用度不高。</li><li>VO（View Object）：显示层对象，通常是 Web 向模板渲染引擎层传输的对象。</li><li>Countroller：业务控制层，负责接收数据和请求，并且调用 Service 层实现这个业务逻辑。</li><li>Service：服务层或业务层，封装 Dao 层的操作，使一个方法对外表现为实现一种功能</li><li>Model：模型层</li></ul><blockquote><p>不同的项目分层设计都会不一样，尤其是在中大型项目中优势会体现的更明显，还会有更多其他的分层。做这么分层的目的和我们前面讲的都一样，就是为了 分离调用 与 内部实现，实现功能与功能之间的解耦。</p></blockquote><p>注：</p><p>项目是否分层不是编程语言决定的，而是项目复杂度决定的。</p><h3 id="_5、分层设计的好处" tabindex="-1"><a class="header-anchor" href="#_5、分层设计的好处" aria-hidden="true">#</a> 5、分层设计的好处</h3><p>TIP</p><ul><li>高内聚：分层的设计可以简化系统设计，让不同的层专注做某一模块的事</li><li>低耦合：层与层之间通过接口 或 API 来交互，依赖方不用知道被依赖方的细节</li><li>复用：分层之后可以做到很高的复用</li><li>扩展性：分层架构可以让我们更容易做横向扩展</li></ul><blockquote><p>如果系统没有分层，当业务规模增加或流量增大时我们只能针对整体系统来做扩展。分层之后可以很方便的把一些模块抽离出来，独立成一个系统。</p></blockquote><h3 id="_6、发起网络请求" tabindex="-1"><a class="header-anchor" href="#_6、发起网络请求" aria-hidden="true">#</a> 6、发起网络请求</h3><p>TIP</p><p>通过上边的学习对于模型在工程实践中的意义有一些了解了。接下来就需要实现发起网络请求</p><p>在 <code>/mode/course.js</code> 模型层的 <code>getCourseList</code> 方法中发起网络请求</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> arry老师
 * <span class="token keyword">@description</span> 课程相关
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Course</span> <span class="token punctuation">{</span>
  <span class="token doc-comment comment">/**
   * 分页获取课程列表
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">page</span> 页码
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">count</span> 每页数量
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">categoryId</span> 分类 ID（可为空）
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">type</span> 课程类型（可为空）
   */</span>
  <span class="token function">getCourseList</span><span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">,</span> count<span class="token punctuation">,</span> categoryId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;获取课程列表&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 发起网络请求，获取数据</span>
    wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Course<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上代码</p><p>我们设计了一个模型类确实解决了模型方法的复用问题，当如果我们在模型方法中直接发起一个 <code>wx.request</code> 请求的话就会产生另外一些工程上的问题</p><ul><li>①、容易犯错：在工程实践中要 尽量避免提供犯错的机会。因为我们需要 request 中配置大量的参数，直接调用 <code>wx.request</code> 的方式对开发者不友好，很容易犯错。因此，需要将 <code>wx.request</code> 这个 API 做一层封装。</li><li>②、请求响应 和 异常处理，如果请求成功了还好，如果失败了就需要每次单独处理和判断（根据不同状态码）。无法做到 统一的响应和处理，如果封装后就可以集中处理</li></ul><blockquote><p>对<code>wx.request</code>API 的封装，再一次体现了调用与实现分离的思想，这网络请求这个部分进一步做了解耦。</p></blockquote><h2 id="二、wx-request-二次封装-实现统一响应和异常处理" tabindex="-1"><a class="header-anchor" href="#二、wx-request-二次封装-实现统一响应和异常处理" aria-hidden="true">#</a> 二、wx.request 二次封装，实现统一响应和异常处理</h2><p>TIP</p><p>我们前面封装了一个 Model 模型类，但发现如果直接在模型类中直接发起请求获取数据，后期会造成大量的重复代码，在真实的开发场景下，一般都会网络请求做二次封装。</p><p>通过封装可以把统一的响应和异常处理集中在一个函数中，可以大大提高使用效率以及降低维护成本。</p><ul><li><code>wx.request</code> 二次封装，简化调用</li><li>全局统一响应、异常处理</li></ul><h3 id="_1、wx-request-封装" tabindex="-1"><a class="header-anchor" href="#_1、wx-request-封装" aria-hidden="true">#</a> 1、wx.request 封装</h3><p>在项目根目录 <code>utils</code> 文件夹中新建 <code>http.js</code> 文件用于封装 <code>wx.request</code></p><div class="language-markdown line-numbers-mode" data-ext="md"><pre class="language-markdown"><code>icoding-com-course
├─ utils
│ ├─ http.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 <code>/utils/http.js</code> 中</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 导入 API 接口根地址</span>
<span class="token keyword">import</span> APIConfig <span class="token keyword">from</span> <span class="token string">&quot;../config/api&quot;</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> arry老师
 * <span class="token keyword">@description</span> 网络请求
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Http</span> <span class="token punctuation">{</span>
  <span class="token comment">// 静态方法：</span>
  <span class="token comment">// 当方法不需要使用到类的属性</span>
  <span class="token comment">// 调用静态方法不需要实例化，直接使用 “类名.方法名” 即可直接调用方法了</span>

  <span class="token doc-comment comment">/**
   * 发起网络请求
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">url</span> 接口地址
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Object<span class="token punctuation">}</span></span> <span class="token parameter">data</span> 服务器请求，需要传递参数
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">method</span> HTTP 请求方法 （默认值 GET）
   */</span>
  <span class="token keyword">static</span> <span class="token function">request</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> APIConfig<span class="token punctuation">.</span>baseUrl <span class="token operator">+</span> url<span class="token punctuation">,</span> <span class="token comment">// 将接口根地址单独管理配置，方便统一修改</span>
      data<span class="token punctuation">,</span>
      method<span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 全局的统一响应 和 异常处理</span>

        <span class="token comment">// 请求成功</span>

        <span class="token comment">// 请求失败</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Http<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在项目根目录中新建 <code>config</code> 文件夹，并创建 <code>api.js</code> 文件</p><div class="language-markdown line-numbers-mode" data-ext="md"><pre class="language-markdown"><code>icoding-com-course
├─ config
│ ├─ api.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 <code>/config/api.js</code> 中</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> arry老师
 * <span class="token keyword">@description</span> 服务器接口根地址（域名）
 */</span>
<span class="token keyword">const</span> APIConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">baseUrl</span><span class="token operator">:</span>
    <span class="token string">&quot;https://www.fastmock.site/mock/3f688708823217b086a3a3f316e13307/icoding-course&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> APIConfig<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在模型层 <code>/mode/course.js</code> 中调用测试网络请求</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> Http <span class="token keyword">from</span> <span class="token string">&quot;../utils/http&quot;</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> arry老师
 * <span class="token keyword">@description</span> 课程相关
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Course</span> <span class="token punctuation">{</span>
  <span class="token doc-comment comment">/**
   * 分页获取课程列表
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">page</span> 页码
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">count</span> 每页数量
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">categoryId</span> 分类 ID（可为空）
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">type</span> 课程类型（可为空）
   */</span>
  <span class="token function">getCourseList</span><span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">,</span> count<span class="token punctuation">,</span> categoryId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;获取课程列表&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 发起网络请求，获取数据</span>
    Http<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;/api/course/list&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> page<span class="token punctuation">,</span> count <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Course<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>网络请求数据获取成功</p><p><img src="https://www.arryblog.com/assets/img/image-20230423045219701.6e04bd81.png" alt="image-20230423045219701"></p><blockquote><p>通过服务端返回的 <code>statusCode</code> 状态码来判断请求是成功 还是 出现异常了</p></blockquote><h3 id="_2、全局统一响应、异常处理" tabindex="-1"><a class="header-anchor" href="#_2、全局统一响应、异常处理" aria-hidden="true">#</a> 2、全局统一响应、异常处理</h3><p>TIP</p><p>通过返回结果中的 <code>statusCode</code> 判断状态码（请求成功 OR 失败）</p><ul><li>请求成功：状态码正常是 200 ，其他如接口中返回有特殊的定义，按接口来即可</li><li>请求失败：根据接口文档中定义的状态码，来进行判断即可</li><li>其他公共的错误信息处理：接口错误信息一定要看清楚文档，哪些适合直接给用户展示，哪些不适合展示（仅开发者自己看的），一般情况会单独定义一个函数来处理。</li></ul><blockquote><p>如微信官方相关错误码，<a href="https://pay.weixin.qq.com/wiki/doc/apiv3/apis/chapter3_1_1.shtml" target="_blank" rel="noopener noreferrer">点击查看接口文档 - 错误码字典(opens new window)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>其他公共的错误信息处理思路如下</p><ul><li>在本地定义字典，将不适合对外展示的列举出来，当接口提示了对应的错误信息时，将接口返回的错误码和字典作比对</li><li>如果找到了，就不展示这条错误信息，而是用我们另外定义的错误信息作展示；</li><li>如果没有找到，就直接把接口返回的错误信息作展示</li></ul><p>在 <code>/utils/http.js</code> 中定义</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 导入 API 接口根地址</span>
<span class="token keyword">import</span> APIConfig <span class="token keyword">from</span> <span class="token string">&quot;../config/api&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> exceptionMessage <span class="token keyword">from</span> <span class="token string">&quot;../config/exception-message&quot;</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> arry老师
 * <span class="token keyword">@description</span> 网络请求
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Http</span> <span class="token punctuation">{</span>
  <span class="token doc-comment comment">/**
   * 发起网络请求
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">url</span> 接口地址
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Object<span class="token punctuation">}</span></span> <span class="token parameter">data</span> 服务器请求，需要传递参数
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">method</span> HTTP 请求方法 （默认值 GET）
   */</span>
  <span class="token keyword">static</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">&quot;GET&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> APIConfig<span class="token punctuation">.</span>baseUrl <span class="token operator">+</span> url<span class="token punctuation">,</span> <span class="token comment">// 将接口根地址单独管理配置，方便统一修改</span>
      data<span class="token punctuation">,</span>
      method<span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 全局的统一响应 和 异常处理</span>

        <span class="token comment">// 请求成功（测试异常处理时，先将其注释，由于我们该接口中没有返回大于 400 的状态码）</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">&lt;</span> <span class="token number">400</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 请求失败（将接口中定义的相关失败的状态码，进行判断）</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 接口错误信息，一定要看清楚文档，哪些适合直接给用户展示，哪些不适合展示（仅开发者自己看的）</span>
        <span class="token comment">// 正规的接口的文档都有会 错误码字典</span>

        <span class="token comment">// 实现思路：</span>
        <span class="token comment">// 在本地定义字典，将不适合对外展示的列举出来，当接口提示了对应的错误信息时，将接口返回的错误码和字典作比对。</span>
        <span class="token comment">// 如果找到了，就不展示这条错误信息，而是用我们另外定义的错误信息作展示；</span>
        <span class="token comment">// 如果没有找到，就直接把接口返回的错误信息作展示</span>

        Http<span class="token punctuation">.</span><span class="token function">_showError</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code<span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token doc-comment comment">/**
   * 错误信息比对校验
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">errorCode</span> 接口返回的错误码
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">message</span> 接口返回的错误信息内容
   * <span class="token keyword">@desc</span> 演示时，需要在模型层 course.js 中，制造错误才可看到效果
   */</span>
  <span class="token keyword">static</span> <span class="token function">_showError</span><span class="token punctuation">(</span><span class="token parameter">errorCode<span class="token punctuation">,</span> message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>errorCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 弹窗展示给用户的信息</span>
    <span class="token keyword">let</span> title <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 在对象中通过 [] 的方式进行匹配，如果匹配成功直接返回对应的值，如失败 返回 undefined</span>
    <span class="token keyword">const</span> errorMessage <span class="token operator">=</span> exceptionMessage<span class="token punctuation">[</span>errorCode<span class="token punctuation">]</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>errorMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 判断如果返回的不是一个有效的字符串（undefined），就需要取其他的展示信息</span>
    <span class="token comment">// 优先取字典中的内容，如果没有取原始接口中返回的内容，还没有就直接 “未知异常”</span>
    title <span class="token operator">=</span> errorMessage <span class="token operator">||</span> message <span class="token operator">||</span> <span class="token string">&quot;未知异常&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// desc: {page: &quot;page 不能为空&quot;,count: &quot;count 不能为空&quot;}</span>
    <span class="token comment">// 如果有多个参数都异常的话，会返回一个对象</span>
    <span class="token comment">// Object.values(title) 在对象上找到的可枚举属性值，返回一个数组</span>
    <span class="token comment">// .join(&#39;;&#39;) 把数组中的所有元素转换一个字符串,通过指定的分隔符进行分隔的</span>
    title <span class="token operator">=</span> <span class="token keyword">typeof</span> title <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">?</span> Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;;&quot;</span><span class="token punctuation">)</span> <span class="token operator">:</span> title<span class="token punctuation">;</span>

    <span class="token comment">// 在页面中展示信息</span>
    wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token punctuation">,</span>
      <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Http<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在项目根目录中新建错误码字典</p><div class="language-markdown line-numbers-mode" data-ext="md"><pre class="language-markdown"><code>icoding-com-course
├─ config
│ ├─ exception-message.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在<code>/config/exception-message.js</code> 中定义字典，将不适合对外展示的列举出来</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> arry老师
 * <span class="token keyword">@description</span> 不适合对外展示的错误码字典（在本地定义字典，将不适合对外展示的列举出来）
 */</span>
<span class="token keyword">const</span> exceptionMessage <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;0002&quot;</span><span class="token operator">:</span> <span class="token string">&quot;这是测试信息&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> exceptionMessage<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注：</p><p>演示异常处理时，需要在模型层 <code>course.js</code> 的网络请求中故意制造错误才可看到效果。如：将 url 中的路径修改错误，再测试</p><h3 id="_3、在模型类中调用封装好的-request-请求" tabindex="-1"><a class="header-anchor" href="#_3、在模型类中调用封装好的-request-请求" aria-hidden="true">#</a> 3、在模型类中调用封装好的 request 请求</h3><p>TIP</p><p>在模型类 <code>mode/course.js</code> 中调用 <code>Http</code> 类中封装好的 <code>wx.request</code> 请求，并接收返回值在控制台打印，输出请求返回结果</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> Http <span class="token keyword">from</span> <span class="token string">&quot;../utils/http&quot;</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> arry老师
 * <span class="token keyword">@description</span> 课程相关
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Course</span> <span class="token punctuation">{</span>
  <span class="token doc-comment comment">/**
   * 分页获取课程列表
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">page</span> 页码
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">count</span> 每页数量
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">categoryId</span> 分类 ID（可为空）
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">type</span> 课程类型（可为空）
   */</span>
  <span class="token function">getCourseList</span><span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">,</span> count<span class="token punctuation">,</span> categoryId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;获取课程列表&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 发起网络请求，获取数据</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> Http<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;/api/course/list&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> page<span class="token punctuation">,</span> count <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 输出结果 为 undefined</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Course<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注：</p><p>当我们在模型类中打印输出返回结果为 <code>undefined</code> 这是为什么呢 ？</p><p>但我们在 <code>Http</code> 类中打印输出 <code>res</code> 请求结果时是有正确返回请求结果的。却在模型类 <code>Course</code> 中没有拿到接口返回的数据，而输出了 <code>undefined</code></p><p><strong>原因是：</strong></p><p>在 <code>Http</code> 类的 request 方法中 success 返回的请求结果是在一个回调函数中，当请求成功时不能通过 return 取到值的。</p><blockquote><p>那怎么才能拿到值呢 ？否则封装网络请求就么有意义了 ！</p></blockquote><h3 id="_5、解决方法-一-回调函数" tabindex="-1"><a class="header-anchor" href="#_5、解决方法-一-回调函数" aria-hidden="true">#</a> 5、解决方法 一 ：回调函数</h3><p>TIP</p><p>刚刚我们通过网络请求进行简单的封装，但我们测试时发现根本无法拿到接口返回的数据 ！我们接下来就来解决这个问题</p><p>我们将最终通过之前学过的 JavaScript 中非常重要的一个机制 async/await 来解决此类问题，这其中就会涉及同步编程和异步编程的概念。</p><blockquote><p>一起来看下从 回调函数 -&gt; Promise -&gt; async/await 整个演进过程，从而来了解如何告别回调地狱的问题</p></blockquote><h3 id="_5-1、什么是回调地狱" tabindex="-1"><a class="header-anchor" href="#_5-1、什么是回调地狱" aria-hidden="true">#</a> 5.1、什么是回调地狱</h3><p>TIP</p><p>我们可以看到代码中通过 <code>wx.request</code> 请求接口，请求成功后 success 中是通过回调函数的方式来接收请求的结果。因为 <code>wx.request</code> 本身就是微信小程序提供的一个异步 API ，当我们要去接收一个 异步 API 结果时，只能用另外一个函数传递给它，并在这个 API 的内部去调用函数来获取这种结果的目的。</p><blockquote><p>这种回调函数 调用 回调函数的方式 就会形成回调地狱</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 导入 API 接口根地址</span>
<span class="token keyword">import</span> APIConfig <span class="token keyword">from</span> <span class="token string">&quot;../config/api&quot;</span>
<span class="token keyword">import</span> exceptionMessage <span class="token keyword">from</span> <span class="token string">&quot;../config/exception-message&quot;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> arry老师
 * <span class="token keyword">@description</span> 网络请求
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Http</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * 发起网络请求
     * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">url</span> 接口地址
     * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Object<span class="token punctuation">}</span></span> <span class="token parameter">data</span> 服务器请求，需要传递参数
     * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">method</span> HTTP 请求方法 （默认值 GET）
     */</span>
    <span class="token keyword">static</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>url<span class="token punctuation">,</span>data<span class="token punctuation">,</span>method<span class="token operator">=</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token comment">// wx.request 本身就是微信小程序提供的一个异步API ，当我们要去接收一个 异步 API 结果时，只能用另外一个函数传递给它，并在这个API 的内部去调用函数来获取这种结果的目的</span>
        wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">url</span><span class="token operator">:</span> APIConfig<span class="token punctuation">.</span>baseUrl <span class="token operator">+</span> url<span class="token punctuation">,</span>
          data<span class="token punctuation">,</span>
          method<span class="token punctuation">,</span>
          <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token comment">// console.log(res)</span>

              <span class="token comment">// 请求成功</span>
              <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">&lt;</span> <span class="token number">400</span>
                  <span class="token comment">// 当请求成功时不能通过 return 取到值的</span>
                  <span class="token keyword">return</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data
                  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
              <span class="token punctuation">}</span>

              <span class="token comment">// 请求失败</span>
              <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                  <span class="token keyword">return</span>
              <span class="token punctuation">}</span>

              <span class="token comment">// 错误信息比对校验</span>
              Http<span class="token punctuation">.</span><span class="token function">_showError</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code<span class="token punctuation">,</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>desc<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

	<span class="token comment">// 省略部分 ......</span>

<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Http
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2、同步编程" tabindex="-1"><a class="header-anchor" href="#_5-2、同步编程" aria-hidden="true">#</a> 5.2、同步编程</h3><p>TIP</p><p>同步编程的代码是按顺序执行的，下一行代码是建立在上一行代码执行完成的基础上才会执行，这就是同步编程。</p><p>如果我们的应用程序中所有的代码都是同步执行的就会有问题，一旦上一行代码的执行时间很长（如：20s） 就意味着在这条代码执行完毕之前，后边的代码永远都不会执行。这样就会大大的降低程序的执行效率 ！因此就有了异步编程的概念 。</p><h3 id="_5-3、异步编程" tabindex="-1"><a class="header-anchor" href="#_5-3、异步编程" aria-hidden="true">#</a> 5.3、异步编程</h3><p>TIP</p><p>如果我们要执行三条编程语句：①、②、③</p><p>在异步编程中它的执行顺序就改变了，当执行了第 ① 条语句后，第 ② 语句并不会等待第 ① 条语句执行完毕后才执行。而是执行了第 ① 条语句，就立马执行第 ② 条语句，同样第 ③ 条也同样</p><p>它们是并发执行的，通过这样的执行方式，我们的应用程序就可以提高工作效率了。问题来了，它异步执行后结果去哪里了 ！我们还能够像原来一样用同步的方式把它的结果拿到吗 ？当然不行 ！</p><blockquote><p>这也是为什么我们上边的代码中，直接通过 <code>return res.data.data</code> 在模型类中是取不到值的</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">&lt;</span> <span class="token number">400</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 当请求成功时不能通过 return 取到值的</span>
    <span class="token keyword">return</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过一张图来分析一下，整个异步执行的结果</p><p><img src="https://www.arryblog.com/assets/img/image-20230424194723482.cad89c6b.png" alt="image-20230424194723482"></p><p>执行过程分析</p><ul><li>首先调用了一个微信的 <code>wx.requesst</code> API -&gt;</li><li>传递一个回调函数接收 API 返回的结果 -&gt;</li><li>接下来执行一个打印操作 <code>console.log(res)</code> 执行打印结果，这里肯定是拿不到结果的，因为它是分叉出去的 。</li></ul><blockquote><p>在这种异步编程中，如何才能实现在原来代码中去拿到异步函数的执行结果呢</p></blockquote><p><img src="https://www.arryblog.com/assets/img/image-20230424195120892.975e9504.png" alt="image-20230424195120892"></p><p>执行过程分析</p><ul><li>调用 微信的 <code>wx.requesst</code> API -&gt;</li><li>定义一个回调函数 A 接收请求的结果 -&gt; 再定义一个回调函数 B</li><li>然后在 回调函数 A 中写一行逻辑，即：当我们的结果拿到后，反过来去调用回调函数 B，同时把回调函数 A 之前拿到的结果传递给回调函数 B，这样就可以实现拿到回调函数 A 的请求结果了</li></ul><blockquote><p>这样的思路，就是用回调函数调用回调函数的方式，当然是可以取到值的。代码实现如下</p></blockquote><p>在模型层 <code>mode/course.js</code> 的 <code>Http.request()</code> 中增加一个参数</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> Http <span class="token keyword">from</span> <span class="token string">&quot;../utils/http&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Course</span> <span class="token punctuation">{</span>
  <span class="token function">getCourseList</span><span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">,</span> count<span class="token punctuation">,</span> categoryId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;获取课程列表&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 在调用 request 方法时，在增加一个参数（函数式的参数）</span>
    <span class="token comment">// 函数中接收参数 res 表示，异步回调中的结果，我们要在 Http.request 类库中反过来调用传递进来的函数</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> Http<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;/api/course/list&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> page<span class="token punctuation">,</span> count <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(res)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Course<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 <code>/utils/http.js</code> 函数 <code>request()</code> 方法中增加 参数</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 导入 API 接口根地址</span>
<span class="token keyword">import</span> APIConfig <span class="token keyword">from</span> <span class="token string">&quot;../config/api&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> exceptionMessage <span class="token keyword">from</span> <span class="token string">&quot;../config/exception-message&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Http</span> <span class="token punctuation">{</span>
  <span class="token comment">// 增加接收回调函数的参数 callback 回调函数</span>
  <span class="token keyword">static</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">&quot;GET&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> APIConfig<span class="token punctuation">.</span>baseUrl <span class="token operator">+</span> url<span class="token punctuation">,</span>
      data<span class="token punctuation">,</span>
      method<span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 请求成功</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">&lt;</span> <span class="token number">400</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 调用 callback 回调函数，并将返回结果 res.data.data 传入</span>
          <span class="token function">callback</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//   return res.data.data</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 请求失败</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        Http<span class="token punctuation">.</span><span class="token function">_showError</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code<span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 省略部分 ......</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Http<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上代码中</p><p>可以看到在模型类中确实打印出了请求结果，我们通过让原本一个异步 API 的回调函数中，反过来在调用我们传递进去的参数（函数），在这里函数中就可以拿到异步的结果 ！</p><p>就有一种魔法打败魔法的感觉了，这种回调函数 调用 回调函数的方式也是最原始解决异步编程计算结果的一种解决方案。</p><h3 id="_6、回调地狱解决方案演进脉络" tabindex="-1"><a class="header-anchor" href="#_6、回调地狱解决方案演进脉络" aria-hidden="true">#</a> 6、回调地狱解决方案演进脉络</h3><p>TIP</p><p>以上我们通过回调函数 调用 回调函数的解决方案的问题就是 <strong>回调地狱</strong>。我们上边实现的代码仅仅只是嵌套了一层还好问题不大，如果需求更复杂了，嵌套层级多了就是真正变成了回调地狱，我们在 JavaScript 部分已经详细学过了。这里就不再赘述 ！</p><p>这也是为什么随着前端应用越来多、越来越广泛之后，回调地狱的问题就被 JavaScript 社区摆上了台面。因为这个问题已经严重影响了我们在编写一些复杂项目时候的开发和维护效率。</p><p>针对回调地狱，社区首先提出了 Promise ，也是 JavaScript 中非常重要的知识点、也是应用非常广泛点。虽然它并没有完全解决我们的回调地狱问题，但它是一个非常有用的东西。包括我们后边会讲到的最终的解决方案，也是建立在 Promise 基础上的，它是实现的一个很重要的前提。</p><p><img src="data:image/png;base64,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" alt="image-20230424195318441"></p><h3 id="_6-1、使用-promise-解决地狱回调" tabindex="-1"><a class="header-anchor" href="#_6-1、使用-promise-解决地狱回调" aria-hidden="true">#</a> 6.1、使用 Promise 解决地狱回调</h3><p>TIP</p><p>在 ES6 中推出了一种新的机制 Promise ，它的初衷就是为了解决回调地狱的问题。</p><p>在 <code>/utils/http.js</code> 中 我们不希望像原来，给 success 属性传递一个函数的方式来接收值，更新希望通过下边的方式来实现，定义个变量 res 直接就能拿到结果，Promise 的出现让这个愿景成为了可能</p><p>不过它本身对这个的解决就不是特别的彻底，后边还是需要 <code>.then</code> 还需要接收一个函数的方式（还是嵌套了函数）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 伪代码</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> wx
  <span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ...... 一路 .then 下去将原来回调函数的方式 变成了 链式调用的方式，比原来的嵌套方式的回调地狱得到了很好的优化</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注：</p><p>Promise 的链式调用从客观来看，确实是有很大的帮助和提升的。但这种解决方案并不完美，原因也是出在链式调用的方式上。</p><p>虽然 Promise 的出现确实让我们原来的嵌套方式调用变得相对扁平了，但还需要我们去维护这个调用链的。如果调用成功还好，我们知道 Promise 是有两种状态结果的（成功和异常）以上的代码是成功的状态。</p><blockquote><p>异常如下</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 伪代码</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> wx
  <span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// 出现异常后</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 每一个都捕获异常的话，就会变成这样的链式调用</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注：</p><p>如果代码一旦复杂了，依然是非常丑陋的，并且难以维护这个调用链。因此就有最终的解决方案。</p><blockquote><p>虽然，我们在项目中不会直接使用 Promise 的链式调用来开发，但 毕竟 Promise 是基础，我们接下来先将 <code>wx.request</code> 请求 Promise 化</p></blockquote><h3 id="_6-2、小程序-api-的-promise-化" tabindex="-1"><a class="header-anchor" href="#_6-2、小程序-api-的-promise-化" aria-hidden="true">#</a> 6.2、小程序 API 的 Promise 化</h3><p>TIP</p><p>回调地狱确实在实际工程中是一个大问题，在项目开发中就需要提前考虑到，面试题也爱考。</p><p>在小程序早期，很多 API 都是异步的 API ，它并没有提供原生支持 Promise 的 API，那时候我们都是自己封装一个函数 或 第三方库来转换一下，将小程序原生的异步 API 转成一个 Promise 对象，最后再使用 async/await 最终解决方案（后边会讲）来实现一个以同步代码编写的方式调用异步的函数，这样的最终实现结果。</p><p>这样的方式，维持了很长的一段时间，直到后来小程序在某一版本把官方提供的 API 中，绝大多数的异步 API 都提供了一种原生 Promise 的 支持。这样就大大简化了我们的开发工作，而且变得更友好了。</p><p>但，很不幸的是由于底层的实现机制问题，小程序的原生 API 中是有几个不支持 Promise 化的，还需要我们开发者自己手动转化，其中一个就是 网络请求 <code>wx.request</code></p><blockquote><p>详细查阅，<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/api.html#API" target="_blank" rel="noopener noreferrer">微信小程序官方文档 - 异步 API 返回 Promise(opens new window)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>在项目根目录 <code>utils</code> 文件夹中，新建一个 <code>wx.js</code> 文件，封装一个函数用来处理原生不支持 Promise 的官方 API</p><p>在 <code>/utils/wx.js</code> 中</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 转换原生不支持 Promise 的官方API
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">method</span> 需要调用的小程序官方 API
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Object<span class="token punctuation">}</span></span> <span class="token parameter">options</span> 调用时需要传递的参数
 */</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">wxToPromise</span><span class="token punctuation">(</span><span class="token parameter">method<span class="token punctuation">,</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    options<span class="token punctuation">.</span>success <span class="token operator">=</span> resolve<span class="token punctuation">;</span>
    options<span class="token punctuation">.</span><span class="token function-variable function">fail</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    wx<span class="token punctuation">[</span>method<span class="token punctuation">]</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 <code>/utils/http.js</code> 中使用封装好的 <code>wxToPromise</code> 函数</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 导入 API 接口根地址</span>
<span class="token keyword">import</span> APIConfig <span class="token keyword">from</span> <span class="token string">&quot;../config/api&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> exceptionMessage <span class="token keyword">from</span> <span class="token string">&quot;../config/exception-message&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> wxToPromise <span class="token keyword">from</span> <span class="token string">&quot;./wx&quot;</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> arry老师
 * <span class="token keyword">@description</span> 网络请求
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Http</span> <span class="token punctuation">{</span>
  <span class="token doc-comment comment">/**
   * 发起网络请求
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">url</span> 接口地址
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Object<span class="token punctuation">}</span></span> <span class="token parameter">data</span> 服务器请求，需要传递参数
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">method</span> HTTP 请求方法 （默认值 GET）
   */</span>
  <span class="token keyword">static</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">&quot;GET&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 调用封装好的 wxToPromise 函数，使用 Promise 方式返回结果</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">wxToPromise</span><span class="token punctuation">(</span><span class="token string">&quot;request&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> APIConfig<span class="token punctuation">.</span>baseUrl <span class="token operator">+</span> url<span class="token punctuation">,</span>
      data<span class="token punctuation">,</span>
      method<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    res<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// wx.request({</span>
    <span class="token comment">//   url: APIConfig.baseUrl + url, // 将接口根地址单独管理配置，方便统一修改</span>
    <span class="token comment">//   data,</span>
    <span class="token comment">//   method,</span>
    <span class="token comment">//   success: (res) =&gt; {</span>
    <span class="token comment">//     //   console.log(res)</span>
    <span class="token comment">//       // 全局的统一响应 和 异常处理</span>

    <span class="token comment">//       // 请求成功（测试异常处理时，先将其注释，由于我们该接口中没有返回大于 400 的状态码）</span>
    <span class="token comment">//       if(res.statusCode &lt; 400){</span>
    <span class="token comment">//           // 调用 callback 回调函数，并将返回结果 res.data.data 传入</span>
    <span class="token comment">//           callback(res.data.data)</span>
    <span class="token comment">//         //   return res.data.data</span>
    <span class="token comment">//       }</span>

    <span class="token comment">//       // 请求失败（将接口中定义的相关失败的状态码，进行判断）</span>
    <span class="token comment">//       if(res.statusCode === 401){</span>
    <span class="token comment">//           return</span>
    <span class="token comment">//       }</span>

    <span class="token comment">//       // 接口错误信息，一定要看清楚文档，哪些适合直接给用户展示，哪些不适合展示（仅开发者自己看的）</span>
    <span class="token comment">//       // 正规的接口的文档都有会 错误码字典</span>

    <span class="token comment">//       // 实现思路：</span>
    <span class="token comment">//       // 在本地定义字典，将不适合对外展示的列举出来，当接口提示了对应的错误信息时，将接口返回的错误码和字典作比对。</span>
    <span class="token comment">//       // 如果找到了，就不展示这条错误信息，而是用我们另外定义的错误信息作展示；</span>
    <span class="token comment">//       // 如果没有找到，就直接把接口返回的错误信息作展示</span>

    <span class="token comment">//       Http._showError(res.data.code,res.data.desc)</span>
    <span class="token comment">//   }</span>
    <span class="token comment">// })</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 部分省略 ......</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Http<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>通过调用 <code>wxToPromise</code> 函数，以上代码，测试控制台打印信息，成功返回值</p></blockquote><h3 id="_6-3、改造完善-http-类中的方法" tabindex="-1"><a class="header-anchor" href="#_6-3、改造完善-http-类中的方法" aria-hidden="true">#</a> 6.3、改造完善 Http 类中的方法</h3><p>TIP</p><p>现在就可以在 <code>res.then()</code> 中直接 return ，这个值也会被包装成一个 Promise 对象</p><p>在 <code>/utils/http.js</code> 中</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 导入 API 接口根地址</span>
<span class="token keyword">import</span> APIConfig <span class="token keyword">from</span> <span class="token string">&quot;../config/api&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> exceptionMessage <span class="token keyword">from</span> <span class="token string">&quot;../config/exception-message&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> wxToPromise <span class="token keyword">from</span> <span class="token string">&quot;./wx&quot;</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> arry老师
 * <span class="token keyword">@description</span> 网络请求
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Http</span> <span class="token punctuation">{</span>
  <span class="token doc-comment comment">/**
   * 发起网络请求
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">url</span> 接口地址
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Object<span class="token punctuation">}</span></span> <span class="token parameter">data</span> 服务器请求，需要传递参数
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">method</span> HTTP 请求方法 （默认值 GET）
   */</span>
  <span class="token keyword">static</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">&quot;GET&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 去掉 callback 参数</span>

    <span class="token comment">// 调用封装好的 wxToPromise 函数，使用 Promise 方式返回结果</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">wxToPromise</span><span class="token punctuation">(</span><span class="token string">&quot;request&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> APIConfig<span class="token punctuation">.</span>baseUrl <span class="token operator">+</span> url<span class="token punctuation">,</span>
      data<span class="token punctuation">,</span>
      method<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 同时，需要将整个成功的对象返回出去</span>
    <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">&lt;</span> <span class="token number">400</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// callback(res.data.data)</span>
        <span class="token comment">// 直接 return 也会被包装成一个 Promise 的对象，并且是一个成功的状态，外界调用时就能获取到值</span>
        <span class="token keyword">return</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 请求失败（将接口中定义的相关失败的状态码，进行判断）</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 错误信息比对校验</span>
      Http<span class="token punctuation">.</span><span class="token function">_showError</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code<span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 省略部分 .......</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Http<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在模型类<code>mode/course.js</code>中调用封装好的 request 方法，即可返回一个 Promise 对象</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> Http <span class="token keyword">from</span> <span class="token string">&quot;../utils/http&quot;</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> arry老师
 * <span class="token keyword">@description</span> 课程相关
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Course</span> <span class="token punctuation">{</span>
  <span class="token doc-comment comment">/**
   * 分页获取课程列表
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">page</span> 页码
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">count</span> 每页数量
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">categoryId</span> 分类 ID（可为空）
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Number<span class="token punctuation">}</span></span> <span class="token parameter">type</span> 课程类型（可为空）
   */</span>
  <span class="token function">getCourseList</span><span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">,</span> count<span class="token punctuation">,</span> categoryId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;获取课程列表&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 发起网络请求，获取数据</span>
    <span class="token comment">// 去掉原来的函数式的参数，直接输出就能返回 Promise 对象</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> Http<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;/api/course/list&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> page<span class="token punctuation">,</span> count <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 获取 Promise 对象</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 获取 Promise 成功的值</span>
    result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// .catch(error=&gt;{ // 失败</span>
    <span class="token comment">//   console.log(error)</span>
    <span class="token comment">// })</span>

    <span class="token comment">// 返回到页面中，做数据绑定即可，但依然非常的麻烦</span>
    <span class="token comment">// 需要再次以 Promise 对象的方式返回，一路 .then 的方式取值</span>
    <span class="token comment">// return result.then()</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Course<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注：</p><p>以上代码中，我们发现返回 Promise 对象，但依然非常的麻烦，效率非常低下</p><h3 id="_7、async-await-终极解决方案" tabindex="-1"><a class="header-anchor" href="#_7、async-await-终极解决方案" aria-hidden="true">#</a> 7、async/await 终极解决方案</h3><p>TIP</p><p>后来社区又出了一个方法 <code>Generator</code> 生成器一个全新的机制，可以在函数中实现暂停，且暂停的控制是交给调用者的。也就是说我们在<code>Generator</code> 函数中定义很多方法（如我们刚刚写的异步函数），通过暂停拿到值， 继续下一步 ！就很好的解决我们的问题，同时在书写是也可以像写同步方法一样去调用异步函数。</p><p><strong>但很遗憾有两点：</strong></p><ul><li>微信小程序不支持 <code>Generator</code></li><li><code>Generator</code> 生成器在实际的项目工程中，最后演变成了一般只会在偏底层的组件、函数类库、框架中才会使用这个机制，在应用层面的开发很少会使用 Generator</li></ul><blockquote><p>一方面 Generator 在使用还是有开发成本的，很多概念不是很好理解，如果在应用层使用对开发者的要求就非常高了，这也是为什么小程序不支持 Generator 生成器的机制也是非常明智的。</p></blockquote><h3 id="_7-1、async-await-的本质" tabindex="-1"><a class="header-anchor" href="#_7-1、async-await-的本质" aria-hidden="true">#</a> 7.1、async/await 的本质</h3><p>TIP</p><p>在经历了各种方案之间的斗争之后，终于产生了终极的解决方案 async/await ，它本身不是一个全新的技术，也没有新的知识点。</p><p>它的本质就是 Promise + Generator 这两个解决方案的结合体，它是一个语法糖。</p><p><strong>也就是说：</strong> 在实际的开发中，只需要通过简单的 两个关键字（async/await）就能实现 Promise + Generator 这两个解决方案的结合。从而完美的实现异步调用的问题。</p><p><img src="https://www.arryblog.com/assets/img/image-20230424195638577.3595c2af.png" alt="image-20230424195638577"></p><p>注：</p><p>有了 <code>async/await</code> 后，接下来只需要在包含有异步操作的函数或方法上，声明 <code>async</code> 关键字，通过这个声明就说明，这个函数或方法中是存在异步调用的</p><p>然后，在每一个异步调用的前面加上 <code>await</code> ，这个 await 顾名思义就是等待，当我们执行当前方法时，需要先等待它的结果返回（之前我们执行完该方法就会执行下面的代码，即异步执行）因此就不需要后面的 <code>.then</code> 了，就可以像写同步代码一样，对于返回值就可以直接拿来用。</p><h3 id="_7-2、通过-async-await-改造完善-http-类中的方法" tabindex="-1"><a class="header-anchor" href="#_7-2、通过-async-await-改造完善-http-类中的方法" aria-hidden="true">#</a> 7.2、通过 async/await 改造完善 Http 类中的方法</h3><p>在 <code>/utils/http.js</code> 中</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 导入 API 接口根地址</span>
<span class="token keyword">import</span> APIConfig <span class="token keyword">from</span> <span class="token string">&quot;../config/api&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> exceptionMessage <span class="token keyword">from</span> <span class="token string">&quot;../config/exception-message&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> wxToPromise <span class="token keyword">from</span> <span class="token string">&quot;./wx&quot;</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> arry老师
 * <span class="token keyword">@description</span> 网络请求
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Http</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在包含有异步操作的函数上，声明 async 关键词，说明这个函数或方法中是存在异步调用的</span>
  <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">&quot;GET&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 异步调用的前面加上 await 等待它的结果返回</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">wxToPromise</span><span class="token punctuation">(</span><span class="token string">&quot;request&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> APIConfig<span class="token punctuation">.</span>baseUrl <span class="token operator">+</span> url<span class="token punctuation">,</span>
      data<span class="token punctuation">,</span>
      method<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 上边通过 await 关键字等待后，直接返回结果，下边就可以直接使用了，就跟同步代码一样的用法</span>
    <span class="token comment">// return res.then((res)=&gt;{</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">&lt;</span> <span class="token number">400</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 直接 return 也会被包装成一个 Promise 的对象</span>
      <span class="token keyword">return</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 请求失败（将接口中定义的相关失败的状态码，进行判断）</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 错误信息比对校验</span>
    Http<span class="token punctuation">.</span><span class="token function">_showError</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code<span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// })</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 省略部分 ......</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Http<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在模型类 <code>mode/course.js</code> 中，添加 async/await</p><p>如果我们在模型类中需要调用该方法，并对结果进行计算或运算时，同样是需要在调用的方法上加上 <code>async</code> 关键字声明，同样 <code>await</code> 等待异步函数的执行结果</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> Http <span class="token keyword">from</span> <span class="token string">&quot;../utils/http&quot;</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> arry老师
 * <span class="token keyword">@description</span> 课程相关
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Course</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在使用异步函数时，需要在调用的方法上加上 async 关键字声明</span>
  <span class="token keyword">async</span> <span class="token function">getCourseList</span><span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">,</span> count<span class="token punctuation">,</span> categoryId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;获取课程列表&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 同样需要添加，await 关键字，等待异步函数的执行结果</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> Http<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;/api/course/list&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> page<span class="token punctuation">,</span> count <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 同样可以取到值</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 再返回到页面中，做数据绑定即可</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Course<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8、在页面逻辑中调用模型类中的方法" tabindex="-1"><a class="header-anchor" href="#_8、在页面逻辑中调用模型类中的方法" aria-hidden="true">#</a> 8、在页面逻辑中调用模型类中的方法</h3><p>在 <code>/pages/index/index.js</code> 中</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// pages/index/index.js</span>

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 页面的初始数据</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 省略部分 .......</span>

  <span class="token comment">// 生命周期函数--监听页面加载</span>
  <span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 初始化课程列表</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getCourseList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 执行其他函数 ......</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 添加 async 关键字</span>
  <span class="token keyword">async</span> <span class="token function">_getCourseList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 添加 await 关键字</span>
    <span class="token keyword">const</span> courseList <span class="token operator">=</span> <span class="token keyword">await</span> course<span class="token punctuation">.</span><span class="token function">getCourseList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 打印验证</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>courseList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上代码</p><p>实现了通过 async、await 机制解决回调地狱的问题，这个机制是在我们真实开发场景中必备的能力，一定要掌握。</p><p>同时，从理论层面理解回调地狱解决方案的演进过程也是非常重要的，在面试中也非常喜欢问这个意义是什么 ？ 本质上 async/await 就是为了解决原有的 回调函数、Promise、Generator 这几种方案的不完美，它本身是一种语法糖（结合了 Promise + Generator 这两种机制）</p><p>因此，我们在实际开发中，需要重点关注的是：回调函数、Promise、async/await 这三个，Generator 在应用层面会用的比较少。</p><blockquote><p>当然我们上边封装的这些请求库还不是很完满，会根据项目需求再持续迭代优化</p></blockquote></div></div><footer class="page-meta"><div class="meta-item edit-link"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M2 26h28v2H2z" fill="currentColor"></path><path d="M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->修改此页面<!--]--></span></span></div><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->最后一次修改 2023/10/28 23:22:51<!--]--></span></span></div></footer><nav class="page-nav"><p class="hasPrev hasNext inner"><span class="page-nav-item prev"> ← 微信小程序自定义组件封装，项目最佳实践综合应用</span><span class="page-nav-item next">JS 面向对象、分层设计、动态数据遍历最佳实践与应用 → </span></p></nav><!----></main><!--]--><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#一、javascript-面向对象-与-代码分层架构设计" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="一、JavaScript 面向对象 与 代码分层架构设计"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->一、JavaScript 面向对象 与 代码分层架构设计<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_1、常规的实现方式" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="1、常规的实现方式"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->1、常规的实现方式<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_2、什么是-模型" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2、什么是 模型"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2、什么是 模型<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_3、模型的意义" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3、模型的意义"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3、模型的意义<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_3-1、传统的方式" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3.1、传统的方式"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3.1、传统的方式<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_3-2、改变调用链路" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3.2、改变调用链路"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3.2、改变调用链路<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_4、软件工程最佳实践" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4、软件工程最佳实践"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4、软件工程最佳实践<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_5、分层设计的好处" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5、分层设计的好处"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5、分层设计的好处<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_6、发起网络请求" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6、发起网络请求"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6、发起网络请求<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#二、wx-request-二次封装-实现统一响应和异常处理" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="二、wx.request 二次封装，实现统一响应和异常处理"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->二、wx.request 二次封装，实现统一响应和异常处理<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_1、wx-request-封装" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="1、wx.request 封装"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->1、wx.request 封装<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_2、全局统一响应、异常处理" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2、全局统一响应、异常处理"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2、全局统一响应、异常处理<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_3、在模型类中调用封装好的-request-请求" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3、在模型类中调用封装好的 request 请求"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3、在模型类中调用封装好的 request 请求<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_5、解决方法-一-回调函数" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5、解决方法 一 ：回调函数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5、解决方法 一 ：回调函数<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_5-1、什么是回调地狱" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5.1、什么是回调地狱"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5.1、什么是回调地狱<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_5-2、同步编程" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5.2、同步编程"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5.2、同步编程<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_5-3、异步编程" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5.3、异步编程"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5.3、异步编程<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_6、回调地狱解决方案演进脉络" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6、回调地狱解决方案演进脉络"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6、回调地狱解决方案演进脉络<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_6-1、使用-promise-解决地狱回调" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6.1、使用 Promise 解决地狱回调"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6.1、使用 Promise 解决地狱回调<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_6-2、小程序-api-的-promise-化" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6.2、小程序 API 的 Promise 化"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6.2、小程序 API 的 Promise 化<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_6-3、改造完善-http-类中的方法" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6.3、改造完善 Http 类中的方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6.3、改造完善 Http 类中的方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_7、async-await-终极解决方案" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="7、async/await 终极解决方案"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->7、async/await 终极解决方案<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_7-1、async-await-的本质" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="7.1、async/await 的本质"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->7.1、async/await 的本质<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_7-2、通过-async-await-改造完善-http-类中的方法" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="7.2、通过 async/await 改造完善 Http 类中的方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->7.2、通过 async/await 改造完善 Http 类中的方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/applet/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html#_8、在页面逻辑中调用模型类中的方法" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="8、在页面逻辑中调用模型类中的方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->8、在页面逻辑中调用模型类中的方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--]--></ul></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/xunyu-blog/assets/app-9abed726.js" defer></script>
  </body>
</html>
