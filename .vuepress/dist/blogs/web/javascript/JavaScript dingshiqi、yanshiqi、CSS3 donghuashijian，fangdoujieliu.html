<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <link rel="icon" href="favicon.ico"><title>JavaScript 定时器、延时器、CSS3 动画事件，防抖节流 | xunyublog</title><meta name="description" content="用代码将梦想照进现实">
    <link rel="modulepreload" href="/xunyu-blog/assets/app-e6acbbcc.js"><link rel="modulepreload" href="/xunyu-blog/assets/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html-68642e13.js"><link rel="modulepreload" href="/xunyu-blog/assets/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html-8d2eb83f.js"><link rel="prefetch" href="/xunyu-blog/assets/index.html-0a05feab.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-8c2edf06.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-4b3ba946.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-06281f40.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-f0d1d354.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-47172bd3.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-ebff1241.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-8ebf0941.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-7e2fe36f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-f01b1d86.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-cb91802b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-ec10ed1d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-17c6444b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-ee5a3abc.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-2bff94e1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-671d86a4.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-7c68cf3f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-47efc587.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-80880afd.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-04bbd1d5.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-103e2208.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-652450b0.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-f9835b2a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-ce0d065c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-30015e5f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-d207aad1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-21469184.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-c10c52d6.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-5d7f901a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-cfdaadf7.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-2a4bf96c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-0b0463a7.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-953f98a2.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-6599e18f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-6cf06f14.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-1a88d37b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-c8e98ed0.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-800887e5.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-06f5ab5e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-5d669565.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-cda0070c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-fe378dda.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-dffdd74d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-0f53ed8c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-fce4e91d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-4eeeb806.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/erchashu.html-dadfe748.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/shuzuzifuchuan.html-06bd1210.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-1065dd3d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/meirimianshiti.html-a095cf63.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-1d33ca8a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-28d0f9d0.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JSON、Ajax、kuayuqingqiu、XHR duixiang、Axios yu Fetch.html-23fe59a2.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/qianhouduanshujujiaohu yu HTTP xieyi.html-c5812704.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/bendicunchu Cookie、localStorage、sessionStorage shijian.html-d63306bd.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JS mianxiangduixiang、fencengsheji、dongtaishujubianlizuijiashijianyuyingyong.html-a9b6bef3.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html-5c8a708b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/qianhouduanfenlijiagou VS chuantongjiagou，xingyezuijiashijian.html-172091df.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/xiaochengxu npm zhichi，zhuangtaiguanli，fenbao，zidingyi tabBar.html-b3426240.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/xiaochengxujieliufangdou，gujiapinggongnen、yonghutiyanyouhuayushijian.html-f8b68c9f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/xiaochengxuxiangmujiegou、peizhiceng、shituceng、luojiceng、suzhuhuanjing.html-90705cfb.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxuyunkaifashixianzhucedenglu yu duozhongduanchangjiandenglufangshi.html-14ca5690.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxufazhanshi、kaifahuanjingzhunbei、tuanduixiezuoshangxianliucheng.html-3d1374ce.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxudeshengmingzhouqi、shengmingzhouqihanshu yu shijianyingyong.html-7f594dd4.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxuzidingyizujianfengzhuang，xiangmuzuijiashijianzongheyingyong.html-aa99b441.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxuzidingyizujian，hexinjichu he shijianyingyong.html-c621ce40.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxushitucengdezujian、shujubangding，liebiao、tiaojianxuanran.html-7171a62e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxuyemiandaohang、chuancan、shijian、API、wangluoqingqiu.html-aac75206.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/CSS display shuxing、beijingshuxing、qitachangyongshuxing.html-1f4b3412.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/CSS sandatexing：jicheng、cengdiexing、youxianji.html-d384b284.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/CSS jichurenzhi he xuanzeqi.html-5746782c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/CSS dingwei、cengdieshunxu、cengdieshangxiawen.html-41b86989.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/CSS wenbenhezitishuxing、liebiaoshuxing.html-f6832785.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/CSS hezimoxing.html-c68f8f7a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/margin fuzhidezuijiashijian.html-04fb9053.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/transform 2D yu 3D zhuanhuan.html-02b71b48.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/transition guodudonghuayu animation zidingyidonghua.html-6807d786.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/qianduan CSS、CSS3 hexinyangshiheshuxing.html-92d23bc4.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/yuanjiao、yinying、wenbentuxiangchuli、CSS hanshu.html-4e69ec3a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/fudong、BFC guifan、qingchufudongdezuijiashijian.html-1134247d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/fangyushibiancheng - fangyushi CSS.html-918615e6.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Class leideshuxing、fangfa、jicheng、gouzaohanshujijiejuefangan.html-8f566f31.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ECMAScript、ES6 jianshi，let、const、var qubieheyingyong.html-d552e040.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 Module mokuaixitong.html-0ad5c722.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 Proxy daili yu Reflect fanshe，Vue3 xiangyingshishujuyuanli.html-13541bf2.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 shengyucanshu he zhankaiyunsuanfuzaishijikaifazhongdeyingyong.html-b4c4488e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 zifuchuan、shuzu、duixiangdexinzengfangfahechangjianyingyong.html-d21920b1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 jiantouhanshu he duixiangzimianliangzengqiang，dachangmianshizhentijiexi.html-b43e9626.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 jiegoufuzhi，hanshucanshumorenzhi，zaixiangmuzhongdeyingyongchangjing.html-f2d65469.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Generator hanshudeshijianyushijianyingyong.html-dbb76cce.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript zhongde Event Loop shijianxunhuan、weirenwuyuhongrenwu.html-e4327356.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Promise yongfa、shilifangfa、yuanliyuyibubianchengdeshijianyingyong.html-0bd1d8ef.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Set、WeakSet、Map shujujiegoudeyingyongjimianshizhentijiexi.html-1331742d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Symbol、BigInt、mobanzifuchuandeyingyongchangjinghedicengyuanli.html-9ab441e9.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/shejimoshi - diedaiqimoshihe Iterator bianliqiyu for...of xunhuan.html-118bbcf8.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/HTMLHTML5 changyongbiaoqianheshuxing.html-db99e9c6.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/HTMLHTML5 biaoqianjichuyufa.html-3664e169.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/qianduan HTMLHTML5 hexinbiaoqianheshuxing.html-e4fad838.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/defineProperty fangfa，JS gongyou、siyou、jingtai，zhanheduilie.html-122c5a02.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript BOM hexin Window duixiangshuxing、fangfa、shijian.html-87d62307.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript DOM shijian，shijianliu，shijianduixiang，shijianweituo.html-5030874f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript DOM yangshi yu jiediancaozuo.html-cdce436e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript sandabaozhuanglei Number、String、Boolean.html-eb4e697b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript zhixingyuanli、bibao、lajihuishou、lijizhixinghanshu.html-2d674298.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript shujuleixingheleixingzhuanhuan.html-ec9b7b47.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript shuzuyingyong he suanfa.html-c6e3ea4a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript hexinjichu，jieduanceshiti.html-be8b0cbb.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript zhengzebiaodashicongrumendaoshijian，zhengzexiangguangongju.html-ec060863.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript liuchengkongzhiyuju he suanfa.html-cd8bb86c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript jianjie、hexinyufa、bianliang.html-76d92116.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript suanfa，dachangqianduanmianshizhenti.html-ce1a1f6b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript jichengde 6 zhongfangshi、yingyongchangjing，nazhigouzaohanshu.html-3cc9bb45.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript biaodashi、caozuofu、weiyunsuanfu.html-9a641544.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript cuowuchuli、LHS zuochaxun、RHS youchaxun.html-fc8aa281.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript mianxiangduixiang，yuanxingheyuanxinglian.html-1de0dd82.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript shubiaoshijian he HTML5 tuozhuaishijiandezongheyingyong.html-afce948c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JS hanshu、zuoyongyu（lian）、bianlianghanshutisheng、suanfahexin.html-3351d340.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JS de Math yu Date duixiang，shouxiehuodongdaojishi、rilizujian.html-20495e4f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/shenru JavaScript shuzuxiangguanfangfa he API.html-8cb66978.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS zhong class leixing，fanxing，leixingduanyanhexinjichu yu shijianyingyong.html-3c6db7ce.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS gongchengshijianzhongdebianyigongju，daimajianchagongju，danyuanceshi.html-c7e03fc3.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS gongchengshijian，goujiangongju，mokuaixitong，bianxieleixingshengmingwenjian.html-4a5e4fb0.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS mokuai，namespace mingmingkongjian，declare guanjianzi.html-c8f9d93a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS deleixingjianchajizhi，leixingjianrongxing、baohujizhi、gaojileixing.html-9e64c6fb.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript zhong Enum meijuleixing、interface jiekouleixing.html-1a198f0b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript hanshuleixing、symbol leixing、duixiangleixing.html-440742ff.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript kuaisurumen - hexinjichu，TS jibenshujuleixing.html-d16ffff2.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript shuzu、yuanzu，any、unknown、never leixing.html-43175d3f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript zhushizhiling，tsconfig.json，tsc minglingxingbianjiqi.html-d2cd11fc.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript leixingyunsuanfu，leixingyingshe，leixinggongju.html-fea698ef.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-b0da4c7a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Pinia quanjuzhuangtaiguanli，shenru State、Getter、Action.html-79f7b0d1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue Router daohangshouwei、guoduyugundong、lanjiazai、dongtailuyou.html-3c905286.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue Router luyouchuancan、bieming、pipeiyufa、bianchengshidaohang.html-266b3c65.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue Router luyou，qianhouduanluyouyuanli yu jutishixian.html-40cbc854.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zhong Transition he TransitionGroup zujian，shijianyingyong.html-637cb469.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zhongde Teleport nazhizujian.html-cfe0a9df.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue xiongdizujianjiantongxin、fabuyudingyue，dongtai、yibuzujian.html-51954835.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue danwenjianzujian，fuzizujianjianchuanzhi、tongxin，touchuanshuxing.html-fc307d9c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue jichu - mobanyufa、shijianchuli、jisuanshuxing、zhentingqi.html-d2004456.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue jichu - biaodan、yangshibangding，tiaojian、liebiaoxuanran、zhiling.html-ad9bed7f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue chajiankaifa，Element Plus、VantUI zujiankushijianyingyong.html-e16136eb.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue chacao Slots，zidingyidanchuang、gaojiliebiaozujian，yilaizhuru.html-286b482c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue xuanranjizhi - xuni DOM，render、h hanshu，xuanranliucheng.html-0a1645af.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue shengmingzhouqi、zidingyizhiling、mobanyinyongdeyuanliyushijian.html-1891e63e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zuheshi API - ref，tongxin API，yilaizhuru，shengmingzhouqi.html-0534c781.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html-7efe16f2.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zuheshi API - watch he watchEffect、zidingyizhiling.html-ef680d5e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-e8746971.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-1e3f3d12.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-0ec94cd6.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-878e1e3d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-99e62dc7.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-253af406.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-52e93341.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-e607bef8.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-b677c9d4.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-d886c017.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-e2d9e0f1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-8417dc60.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-5eba1ef3.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-7d5d3a24.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-cc644e55.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-c921a9c6.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-24dc6b8c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-f7bdec04.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-b9ed927c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-2ea3bd97.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-16961c02.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-26893b23.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-6dbda73d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-581b6ebc.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-737fff38.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-b6f3ce0f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-f4f317b2.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-7c6ba81b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-d3c47778.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-0454517d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-8aeb11a5.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-3348dca8.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-923b7ed6.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-da28b259.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-4ff571d7.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-a608c8fd.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-f4d7362e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-852db63e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-4d025540.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-0d33dae7.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-267a8317.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-283e0783.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-c0546935.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-7ef14def.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-0b5e964f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-060da2ee.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/erchashu.html-a3e6c2bd.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/shuzuzifuchuan.html-43d9c252.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-499f4139.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/meirimianshiti.html-581f56a8.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-c6315699.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-1a1252e1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JSON、Ajax、kuayuqingqiu、XHR duixiang、Axios yu Fetch.html-b4246646.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/qianhouduanshujujiaohu yu HTTP xieyi.html-29100b57.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/bendicunchu Cookie、localStorage、sessionStorage shijian.html-d727c3c5.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JS mianxiangduixiang、fencengsheji、dongtaishujubianlizuijiashijianyuyingyong.html-7fba4063.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JS mianxiangduixiang，daimafencengjiagoushejishijian yu wangluoqingqiufengzhuang.html-8840916a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/qianhouduanfenlijiagou VS chuantongjiagou，xingyezuijiashijian.html-a926e57e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/xiaochengxu npm zhichi，zhuangtaiguanli，fenbao，zidingyi tabBar.html-2aa2af07.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/xiaochengxujieliufangdou，gujiapinggongnen、yonghutiyanyouhuayushijian.html-7cb84792.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/xiaochengxuxiangmujiegou、peizhiceng、shituceng、luojiceng、suzhuhuanjing.html-8240f61e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxuyunkaifashixianzhucedenglu yu duozhongduanchangjiandenglufangshi.html-9202d848.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxufazhanshi、kaifahuanjingzhunbei、tuanduixiezuoshangxianliucheng.html-c4a5db76.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxudeshengmingzhouqi、shengmingzhouqihanshu yu shijianyingyong.html-569b2ebf.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxuzidingyizujianfengzhuang，xiangmuzuijiashijianzongheyingyong.html-b887f886.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxuzidingyizujian，hexinjichu he shijianyingyong.html-268899dc.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxushitucengdezujian、shujubangding，liebiao、tiaojianxuanran.html-9420fb0b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/weixinxiaochengxuyemiandaohang、chuancan、shijian、API、wangluoqingqiu.html-11286f59.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/CSS display shuxing、beijingshuxing、qitachangyongshuxing.html-96c4de2a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/CSS sandatexing：jicheng、cengdiexing、youxianji.html-27f3dc1a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/CSS jichurenzhi he xuanzeqi.html-11ab29ca.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/CSS dingwei、cengdieshunxu、cengdieshangxiawen.html-0955e04d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/CSS wenbenhezitishuxing、liebiaoshuxing.html-65c61620.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/CSS hezimoxing.html-4dfa76f6.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/margin fuzhidezuijiashijian.html-3067b737.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/transform 2D yu 3D zhuanhuan.html-545ebdb6.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/transition guodudonghuayu animation zidingyidonghua.html-343ca919.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/qianduan CSS、CSS3 hexinyangshiheshuxing.html-9f4dbbf1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/yuanjiao、yinying、wenbentuxiangchuli、CSS hanshu.html-14804a57.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/fudong、BFC guifan、qingchufudongdezuijiashijian.html-369f6d61.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/fangyushibiancheng - fangyushi CSS.html-6c8574b5.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Class leideshuxing、fangfa、jicheng、gouzaohanshujijiejuefangan.html-68cd4d47.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ECMAScript、ES6 jianshi，let、const、var qubieheyingyong.html-7aee346f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 Module mokuaixitong.html-33638b85.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 Proxy daili yu Reflect fanshe，Vue3 xiangyingshishujuyuanli.html-eefc752a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 shengyucanshu he zhankaiyunsuanfuzaishijikaifazhongdeyingyong.html-a4d13aac.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 zifuchuan、shuzu、duixiangdexinzengfangfahechangjianyingyong.html-9991e2e0.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 jiantouhanshu he duixiangzimianliangzengqiang，dachangmianshizhentijiexi.html-129f7af5.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/ES6 jiegoufuzhi，hanshucanshumorenzhi，zaixiangmuzhongdeyingyongchangjing.html-332f63b5.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Generator hanshudeshijianyushijianyingyong.html-fc19e0c0.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript zhongde Event Loop shijianxunhuan、weirenwuyuhongrenwu.html-f627bde7.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Promise yongfa、shilifangfa、yuanliyuyibubianchengdeshijianyingyong.html-5c0b81e1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Set、WeakSet、Map shujujiegoudeyingyongjimianshizhentijiexi.html-8556e39b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Symbol、BigInt、mobanzifuchuandeyingyongchangjinghedicengyuanli.html-9a3c8ee1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/shejimoshi - diedaiqimoshihe Iterator bianliqiyu for...of xunhuan.html-2a45bef7.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/HTMLHTML5 changyongbiaoqianheshuxing.html-ecf2cf35.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/HTMLHTML5 biaoqianjichuyufa.html-1d558997.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/qianduan HTMLHTML5 hexinbiaoqianheshuxing.html-59524e8c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/defineProperty fangfa，JS gongyou、siyou、jingtai，zhanheduilie.html-8925e7b2.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript BOM hexin Window duixiangshuxing、fangfa、shijian.html-41420b83.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript DOM shijian，shijianliu，shijianduixiang，shijianweituo.html-986d2e70.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript DOM yangshi yu jiediancaozuo.html-d056d7e7.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript sandabaozhuanglei Number、String、Boolean.html-5c024ded.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript zhixingyuanli、bibao、lajihuishou、lijizhixinghanshu.html-1268aacd.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript shujuleixingheleixingzhuanhuan.html-10798382.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript shuzuyingyong he suanfa.html-470b13e0.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript hexinjichu，jieduanceshiti.html-a79a04d3.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript zhengzebiaodashicongrumendaoshijian，zhengzexiangguangongju.html-2f263f75.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript liuchengkongzhiyuju he suanfa.html-5cda12b1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript jianjie、hexinyufa、bianliang.html-5b08f053.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript suanfa，dachangqianduanmianshizhenti.html-ad5b777e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript jichengde 6 zhongfangshi、yingyongchangjing，nazhigouzaohanshu.html-6af3fe01.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript biaodashi、caozuofu、weiyunsuanfu.html-c831791b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript cuowuchuli、LHS zuochaxun、RHS youchaxun.html-2d27029d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript mianxiangduixiang，yuanxingheyuanxinglian.html-61241526.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JavaScript shubiaoshijian he HTML5 tuozhuaishijiandezongheyingyong.html-f6ec0dc2.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JS hanshu、zuoyongyu（lian）、bianlianghanshutisheng、suanfahexin.html-4a0b92c9.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/JS de Math yu Date duixiang，shouxiehuodongdaojishi、rilizujian.html-3aa1ffb6.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/shenru JavaScript shuzuxiangguanfangfa he API.html-fa8f706e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS zhong class leixing，fanxing，leixingduanyanhexinjichu yu shijianyingyong.html-09150064.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS gongchengshijianzhongdebianyigongju，daimajianchagongju，danyuanceshi.html-0f811e55.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS gongchengshijian，goujiangongju，mokuaixitong，bianxieleixingshengmingwenjian.html-09ff99cb.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS mokuai，namespace mingmingkongjian，declare guanjianzi.html-f2fcc9b5.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TS deleixingjianchajizhi，leixingjianrongxing、baohujizhi、gaojileixing.html-cb274009.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript zhong Enum meijuleixing、interface jiekouleixing.html-8a73d646.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript hanshuleixing、symbol leixing、duixiangleixing.html-927f3d84.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript kuaisurumen - hexinjichu，TS jibenshujuleixing.html-1928f40f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript shuzu、yuanzu，any、unknown、never leixing.html-42e3986a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript zhushizhiling，tsconfig.json，tsc minglingxingbianjiqi.html-0366c3a8.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/TypeScript leixingyunsuanfu，leixingyingshe，leixinggongju.html-b7419d8b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-096c91ba.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Pinia quanjuzhuangtaiguanli，shenru State、Getter、Action.html-5953ca56.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue Router daohangshouwei、guoduyugundong、lanjiazai、dongtailuyou.html-9918ec0a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue Router luyouchuancan、bieming、pipeiyufa、bianchengshidaohang.html-1399ac4c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue Router luyou，qianhouduanluyouyuanli yu jutishixian.html-7bf6ae10.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zhong Transition he TransitionGroup zujian，shijianyingyong.html-7694a51c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zhongde Teleport nazhizujian.html-786e0148.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue xiongdizujianjiantongxin、fabuyudingyue，dongtai、yibuzujian.html-88948c91.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue danwenjianzujian，fuzizujianjianchuanzhi、tongxin，touchuanshuxing.html-192fb2eb.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue jichu - mobanyufa、shijianchuli、jisuanshuxing、zhentingqi.html-72db0552.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue jichu - biaodan、yangshibangding，tiaojian、liebiaoxuanran、zhiling.html-4af1c94a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue chajiankaifa，Element Plus、VantUI zujiankushijianyingyong.html-fcae5486.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue chacao Slots，zidingyidanchuang、gaojiliebiaozujian，yilaizhuru.html-2d55ee20.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue xuanranjizhi - xuni DOM，render、h hanshu，xuanranliucheng.html-f71f23cb.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue shengmingzhouqi、zidingyizhiling、mobanyinyongdeyuanliyushijian.html-cbefcd15.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zuheshi API - ref，tongxin API，yilaizhuru，shengmingzhouqi.html-92033268.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html-03beed90.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zuheshi API - watch he watchEffect、zidingyizhiling.html-0f13c883.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/404.html-0c9309ab.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/reco-valine-a195b6e9.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/giscus-2a044aea-497f0bd4.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/style-e9220a04.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/docsearch-1d421ddb.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index-82585c84.js" as="script">
    <link rel="preload" href="/xunyu-blog/assets/style-944c878d.css" as="style"><link rel="stylesheet" href="/xunyu-blog/assets/style-944c878d.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper show-series show-catalog"><header class="navbar-container" style="top:0;"><div class="site-brand nav-item"><img class="logo" src="/xunyu-blog/logo.jpg" alt="xunyublog"><a href="/xunyu-blog/" class="site-name can-hide">xunyublog</a></div><div class="nav-item navbar-links-wrapper" style=""><div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/xunyu-blog/" class="link router-link-active" aria-label="主页"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16.612 2.214a1.01 1.01 0 0 0-1.242 0L1 13.419l1.243 1.572L4 13.621V26a2.004 2.004 0 0 0 2 2h20a2.004 2.004 0 0 0 2-2V13.63L29.757 15L31 13.428zM18 26h-4v-8h4zm2 0v-8a2.002 2.002 0 0 0-2-2h-4a2.002 2.002 0 0 0-2 2v8H6V12.062l10-7.79l10 7.8V26z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->主页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="前端学习笔记"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 2H8a2 2 0 0 0-2 2v4H4v2h2v5H4v2h2v5H4v2h2v4a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm0 26H8v-4h2v-2H8v-5h2v-2H8v-5h2V8H8V4h18z" fill="currentColor"></path><path d="M14 8h8v2h-8z" fill="currentColor"></path><path d="M14 15h8v2h-8z" fill="currentColor"></path><path d="M14 22h8v2h-8z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端学习笔记<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="前端学习笔记"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 2H8a2 2 0 0 0-2 2v4H4v2h2v5H4v2h2v5H4v2h2v4a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm0 26H8v-4h2v-2H8v-5h2v-2H8v-5h2V8H8V4h18z" fill="currentColor"></path><path d="M14 8h8v2h-8z" fill="currentColor"></path><path d="M14 15h8v2h-8z" fill="currentColor"></path><path d="M14 22h8v2h-8z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端学习笔记<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端基础<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/html/前端 HTMLHTML5 核心标签和属性.md" class="link" aria-label="HTML"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTML<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/css/前端 CSS、CSS3 核心样式和属性.md" class="link" aria-label="CSS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/javascript/JavaScript 简介、核心语法、变量.md" class="link" aria-label="JavaScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->进阶<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/ajax/前后端数据交互 与 HTTP 协议.md" class="link" aria-label="Ajax"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Ajax<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/es6/ECMAScript、ES6 简史，let、const、var 区别和应用.md" class="link" aria-label="ES6"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ES6<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/brower/" class="link" aria-label="浏览器原理和性能优化"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->浏览器原理和性能优化<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->小程序<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/applet/微信小程序发展史、开发环境准备、团队协作上线流程.md" class="link" aria-label="微信小程序"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->框架<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/vue/Vue 基础 - 模板语法、事件处理、计算属性、侦听器.md" class="link" aria-label="Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/react/" class="link" aria-label="React"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TypeScript<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/typescript/TypeScript 快速入门 - 核心基础，TS 基本数据类型.md" class="link" aria-label="TypeScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TypeScript<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->构建工具<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/webpack/" class="link" aria-label="Webpack"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Webpack<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/vite/" class="link" aria-label="Vite"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vite<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="外部库"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.947 19a4.948 4.948 0 0 1-3.499-8.447l5.106-5.104a4.948 4.948 0 0 1 6.998 6.998l-.553.552l-1.415-1.413l.557-.557a2.95 2.95 0 0 0-.004-4.166a3.02 3.02 0 0 0-4.17 0l-5.104 5.104a2.947 2.947 0 0 0 0 4.17a3.02 3.02 0 0 0 4.17 0l1.414 1.414a4.918 4.918 0 0 1-3.5 1.449z" fill="currentColor"></path><path d="M19.947 17a4.948 4.948 0 0 1-3.499-8.447l.553-.552l1.414 1.415l-.552.552a2.948 2.948 0 0 0 0 4.169a3.02 3.02 0 0 0 4.17 0l5.105-5.105a2.951 2.951 0 0 0 0-4.168a3.02 3.02 0 0 0-4.17 0l-1.414-1.415a4.948 4.948 0 0 1 6.998 6.998l-5.104 5.103a4.92 4.92 0 0 1-3.5 1.45z" fill="currentColor"></path><path d="M24 30H4a2.002 2.002 0 0 1-2-2V8a2.002 2.002 0 0 1 2-2h4v2H4v20h20V18h2v10a2.002 2.002 0 0 1-2 2z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->外部库<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="外部库"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.947 19a4.948 4.948 0 0 1-3.499-8.447l5.106-5.104a4.948 4.948 0 0 1 6.998 6.998l-.553.552l-1.415-1.413l.557-.557a2.95 2.95 0 0 0-.004-4.166a3.02 3.02 0 0 0-4.17 0l-5.104 5.104a2.947 2.947 0 0 0 0 4.17a3.02 3.02 0 0 0 4.17 0l1.414 1.414a4.918 4.918 0 0 1-3.5 1.449z" fill="currentColor"></path><path d="M19.947 17a4.948 4.948 0 0 1-3.499-8.447l.553-.552l1.414 1.415l-.552.552a2.948 2.948 0 0 0 0 4.169a3.02 3.02 0 0 0 4.17 0l5.105-5.105a2.951 2.951 0 0 0 0-4.168a3.02 3.02 0 0 0-4.17 0l-1.414-1.415a4.948 4.948 0 0 1 6.998 6.998l-5.104 5.103a4.92 4.92 0 0 1-3.5 1.45z" fill="currentColor"></path><path d="M24 30H4a2.002 2.002 0 0 1-2-2V8a2.002 2.002 0 0 1 2-2h4v2H4v20h20V18h2v10a2.002 2.002 0 0 1-2 2z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->外部库<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->外部库<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a class="link" href="https://element.eleme.io/#/zh-CN" target="_blank" rel="noopener noreferrer" aria-label="Element Ui"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Element Ui<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a class="link" href="https://www.naiveui.com/zh-CN/light/docs/introduction" target="_blank" rel="noopener noreferrer" aria-label="Naive Ui"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Naive Ui<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a class="link" href="https://echarts.apache.org/zh/index.html" target="_blank" rel="noopener noreferrer" aria-label="Echarts"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Echarts<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="面试题"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M28 10h-5V6a2.002 2.002 0 0 0-2-2H11a2.002 2.002 0 0 0-2 2v4H4a2.002 2.002 0 0 0-2 2v16a2.002 2.002 0 0 0 2 2h24a2.002 2.002 0 0 0 2-2V12a2.002 2.002 0 0 0-2-2zM4 28V12h5v2H7v2h2v2H7v2h2v2H7v2h2v4zm17 0H11V6h10zm7 0h-5v-4h2v-2h-2v-2h2v-2h-2v-2h2v-2h-2v-2h5z" fill="currentColor"></path><path d="M14 8h4v2h-4z" fill="currentColor"></path><path d="M14 12h4v2h-4z" fill="currentColor"></path><path d="M14 16h4v2h-4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试题<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="面试题"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M28 10h-5V6a2.002 2.002 0 0 0-2-2H11a2.002 2.002 0 0 0-2 2v4H4a2.002 2.002 0 0 0-2 2v16a2.002 2.002 0 0 0 2 2h24a2.002 2.002 0 0 0 2-2V12a2.002 2.002 0 0 0-2-2zM4 28V12h5v2H7v2h2v2H7v2h2v2H7v2h2v4zm17 0H11V6h10zm7 0h-5v-4h2v-2h-2v-2h2v-2h-2v-2h2v-2h-2v-2h5z" fill="currentColor"></path><path d="M14 8h4v2h-4z" fill="currentColor"></path><path d="M14 12h4v2h-4z" fill="currentColor"></path><path d="M14 16h4v2h-4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试题<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/everyday/每日面试题.md" class="link" aria-label="每日面试题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->每日面试题<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/html/" class="link" aria-label="HTML"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTML<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/css/" class="link" aria-label="CSS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/javascript/" class="link" aria-label="JavaScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/es6/" class="link" aria-label="ES6"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ES6<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/write/" class="link" aria-label="手写面试题 "><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->手写面试题 <!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/blogs/webpack/" class="link" aria-label="webpack"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->webpack<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/brower/" class="link" aria-label="浏览器网络"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->浏览器网络<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/vue/" class="link" aria-label="Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/react/" class="link" aria-label="React"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/algorithm/" class="link" aria-label="算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->算法<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a href="/xunyu-blog/blogs/algorithm/二叉树.md" class="link" aria-label="算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M19 13h6v2h-6z" fill="currentColor"></path><path d="M13 21h-2v-2H9v2H7v2h2v2h2v-2h2v-2z" fill="currentColor"></path><path d="M7 9h6v2H7z" fill="currentColor"></path><path d="M19 17h6v2h-6z" fill="currentColor"></path><path d="M27 3H5a2.002 2.002 0 0 0-2 2v22a2.002 2.002 0 0 0 2 2h22a2.002 2.002 0 0 0 2-2V5a2.002 2.002 0 0 0-2-2zM15 5v10H5V5zM5 17h10v10H5zm12 10V5h10v22z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->算法<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/xunyu-blog/project/" class="link" aria-label="项目"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 17v8H6v-8h10m0-2H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M27 6v5H17V6h10m0-2H17a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M27 17v5h-5v-5h5m0-2h-5a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M11 6v5H6V6h5m0-2H6a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->项目<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="文件夹"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->文件夹<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="文件夹"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->文件夹<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/xunyu-blog/categories/vue/1/" class="link" aria-label="vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/categories/applet/1/" class="link" aria-label="微信小程序"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/categories/mianshi/1/" class="link" aria-label="面试"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><span class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></header><header class="sub-navbar-container"><span class="nav-item"><div class="toggle-series-button" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div> Series </span></header><div class="mobile-menus-container"><nav class="navbar-links mobile"><!--[--><div class="navbar-links__item"><a href="/xunyu-blog/" class="link router-link-active" aria-label="主页"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16.612 2.214a1.01 1.01 0 0 0-1.242 0L1 13.419l1.243 1.572L4 13.621V26a2.004 2.004 0 0 0 2 2h20a2.004 2.004 0 0 0 2-2V13.63L29.757 15L31 13.428zM18 26h-4v-8h4zm2 0v-8a2.002 2.002 0 0 0-2-2h-4a2.002 2.002 0 0 0-2 2v8H6V12.062l10-7.79l10 7.8V26z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->主页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="前端学习笔记"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 2H8a2 2 0 0 0-2 2v4H4v2h2v5H4v2h2v5H4v2h2v4a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm0 26H8v-4h2v-2H8v-5h2v-2H8v-5h2V8H8V4h18z" fill="currentColor"></path><path d="M14 8h8v2h-8z" fill="currentColor"></path><path d="M14 15h8v2h-8z" fill="currentColor"></path><path d="M14 22h8v2h-8z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端学习笔记<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="前端学习笔记"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 2H8a2 2 0 0 0-2 2v4H4v2h2v5H4v2h2v5H4v2h2v4a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm0 26H8v-4h2v-2H8v-5h2v-2H8v-5h2V8H8V4h18z" fill="currentColor"></path><path d="M14 8h8v2h-8z" fill="currentColor"></path><path d="M14 15h8v2h-8z" fill="currentColor"></path><path d="M14 22h8v2h-8z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端学习笔记<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端基础<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/html/前端 HTMLHTML5 核心标签和属性.md" class="link" aria-label="HTML"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTML<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/css/前端 CSS、CSS3 核心样式和属性.md" class="link" aria-label="CSS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/javascript/JavaScript 简介、核心语法、变量.md" class="link" aria-label="JavaScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->进阶<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/ajax/前后端数据交互 与 HTTP 协议.md" class="link" aria-label="Ajax"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Ajax<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/es6/ECMAScript、ES6 简史，let、const、var 区别和应用.md" class="link" aria-label="ES6"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ES6<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/brower/" class="link" aria-label="浏览器原理和性能优化"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->浏览器原理和性能优化<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->小程序<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/applet/微信小程序发展史、开发环境准备、团队协作上线流程.md" class="link" aria-label="微信小程序"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->框架<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/vue/Vue 基础 - 模板语法、事件处理、计算属性、侦听器.md" class="link" aria-label="Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/react/" class="link" aria-label="React"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TypeScript<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/typescript/TypeScript 快速入门 - 核心基础，TS 基本数据类型.md" class="link" aria-label="TypeScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TypeScript<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->构建工具<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/webpack/" class="link" aria-label="Webpack"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Webpack<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/vite/" class="link" aria-label="Vite"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vite<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="外部库"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.947 19a4.948 4.948 0 0 1-3.499-8.447l5.106-5.104a4.948 4.948 0 0 1 6.998 6.998l-.553.552l-1.415-1.413l.557-.557a2.95 2.95 0 0 0-.004-4.166a3.02 3.02 0 0 0-4.17 0l-5.104 5.104a2.947 2.947 0 0 0 0 4.17a3.02 3.02 0 0 0 4.17 0l1.414 1.414a4.918 4.918 0 0 1-3.5 1.449z" fill="currentColor"></path><path d="M19.947 17a4.948 4.948 0 0 1-3.499-8.447l.553-.552l1.414 1.415l-.552.552a2.948 2.948 0 0 0 0 4.169a3.02 3.02 0 0 0 4.17 0l5.105-5.105a2.951 2.951 0 0 0 0-4.168a3.02 3.02 0 0 0-4.17 0l-1.414-1.415a4.948 4.948 0 0 1 6.998 6.998l-5.104 5.103a4.92 4.92 0 0 1-3.5 1.45z" fill="currentColor"></path><path d="M24 30H4a2.002 2.002 0 0 1-2-2V8a2.002 2.002 0 0 1 2-2h4v2H4v20h20V18h2v10a2.002 2.002 0 0 1-2 2z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->外部库<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="外部库"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.947 19a4.948 4.948 0 0 1-3.499-8.447l5.106-5.104a4.948 4.948 0 0 1 6.998 6.998l-.553.552l-1.415-1.413l.557-.557a2.95 2.95 0 0 0-.004-4.166a3.02 3.02 0 0 0-4.17 0l-5.104 5.104a2.947 2.947 0 0 0 0 4.17a3.02 3.02 0 0 0 4.17 0l1.414 1.414a4.918 4.918 0 0 1-3.5 1.449z" fill="currentColor"></path><path d="M19.947 17a4.948 4.948 0 0 1-3.499-8.447l.553-.552l1.414 1.415l-.552.552a2.948 2.948 0 0 0 0 4.169a3.02 3.02 0 0 0 4.17 0l5.105-5.105a2.951 2.951 0 0 0 0-4.168a3.02 3.02 0 0 0-4.17 0l-1.414-1.415a4.948 4.948 0 0 1 6.998 6.998l-5.104 5.103a4.92 4.92 0 0 1-3.5 1.45z" fill="currentColor"></path><path d="M24 30H4a2.002 2.002 0 0 1-2-2V8a2.002 2.002 0 0 1 2-2h4v2H4v20h20V18h2v10a2.002 2.002 0 0 1-2 2z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->外部库<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->外部库<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a class="link" href="https://element.eleme.io/#/zh-CN" target="_blank" rel="noopener noreferrer" aria-label="Element Ui"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Element Ui<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a class="link" href="https://www.naiveui.com/zh-CN/light/docs/introduction" target="_blank" rel="noopener noreferrer" aria-label="Naive Ui"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Naive Ui<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a class="link" href="https://echarts.apache.org/zh/index.html" target="_blank" rel="noopener noreferrer" aria-label="Echarts"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Echarts<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="面试题"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M28 10h-5V6a2.002 2.002 0 0 0-2-2H11a2.002 2.002 0 0 0-2 2v4H4a2.002 2.002 0 0 0-2 2v16a2.002 2.002 0 0 0 2 2h24a2.002 2.002 0 0 0 2-2V12a2.002 2.002 0 0 0-2-2zM4 28V12h5v2H7v2h2v2H7v2h2v2H7v2h2v4zm17 0H11V6h10zm7 0h-5v-4h2v-2h-2v-2h2v-2h-2v-2h2v-2h-2v-2h5z" fill="currentColor"></path><path d="M14 8h4v2h-4z" fill="currentColor"></path><path d="M14 12h4v2h-4z" fill="currentColor"></path><path d="M14 16h4v2h-4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试题<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="面试题"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M28 10h-5V6a2.002 2.002 0 0 0-2-2H11a2.002 2.002 0 0 0-2 2v4H4a2.002 2.002 0 0 0-2 2v16a2.002 2.002 0 0 0 2 2h24a2.002 2.002 0 0 0 2-2V12a2.002 2.002 0 0 0-2-2zM4 28V12h5v2H7v2h2v2H7v2h2v2H7v2h2v4zm17 0H11V6h10zm7 0h-5v-4h2v-2h-2v-2h2v-2h-2v-2h2v-2h-2v-2h5z" fill="currentColor"></path><path d="M14 8h4v2h-4z" fill="currentColor"></path><path d="M14 12h4v2h-4z" fill="currentColor"></path><path d="M14 16h4v2h-4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试题<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/everyday/每日面试题.md" class="link" aria-label="每日面试题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->每日面试题<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/html/" class="link" aria-label="HTML"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTML<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/css/" class="link" aria-label="CSS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/javascript/" class="link" aria-label="JavaScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/es6/" class="link" aria-label="ES6"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ES6<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/write/" class="link" aria-label="手写面试题 "><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->手写面试题 <!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/blogs/webpack/" class="link" aria-label="webpack"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->webpack<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/brower/" class="link" aria-label="浏览器网络"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->浏览器网络<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/vue/" class="link" aria-label="Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/react/" class="link" aria-label="React"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/algorithm/" class="link" aria-label="算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->算法<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a href="/xunyu-blog/blogs/algorithm/二叉树.md" class="link" aria-label="算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M19 13h6v2h-6z" fill="currentColor"></path><path d="M13 21h-2v-2H9v2H7v2h2v2h2v-2h2v-2z" fill="currentColor"></path><path d="M7 9h6v2H7z" fill="currentColor"></path><path d="M19 17h6v2h-6z" fill="currentColor"></path><path d="M27 3H5a2.002 2.002 0 0 0-2 2v22a2.002 2.002 0 0 0 2 2h22a2.002 2.002 0 0 0 2-2V5a2.002 2.002 0 0 0-2-2zM15 5v10H5V5zM5 17h10v10H5zm12 10V5h10v22z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->算法<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/xunyu-blog/project/" class="link" aria-label="项目"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 17v8H6v-8h10m0-2H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M27 6v5H17V6h10m0-2H17a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M27 17v5h-5v-5h5m0-2h-5a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M11 6v5H6V6h5m0-2H6a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->项目<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="文件夹"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->文件夹<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="文件夹"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->文件夹<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/xunyu-blog/categories/vue/1/" class="link" aria-label="vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/categories/applet/1/" class="link" aria-label="微信小程序"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/categories/mianshi/1/" class="link" aria-label="面试"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><div class="appearance"><span>Appearance</span><span class="xicon-container btn-toggle-dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span></div></div><div class="series-mask"></div><aside class="series-container"><div class="site-brand"><img class="logo" src="/xunyu-blog/logo.jpg" alt="xunyublog"><a href="/xunyu-blog/" class="site-name can-hide">xunyublog</a></div><!--[--><!--[--><section class="series-group series-item"><h5 class="series-heading">javascript核心基础<span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JavaScript jianjie、hexinyufa、bianliang.html" class="link series-item" aria-label="JavaScript 简介、核心语法、变量"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript 简介、核心语法、变量<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JavaScript shujuleixingheleixingzhuanhuan.html" class="link series-item" aria-label="JavaScript 数据类型和类型转换"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript 数据类型和类型转换<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JavaScript biaodashi、caozuofu、weiyunsuanfu.html" class="link series-item" aria-label="JavaScript 表达式、操作符、位运算符"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript 表达式、操作符、位运算符<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JavaScript liuchengkongzhiyuju he suanfa.html" class="link series-item" aria-label="JavaScript 流程控制语句 和 算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript 流程控制语句 和 算法<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JavaScript shuzuyingyong he suanfa.html" class="link series-item" aria-label="JavaScript 数组应用 和 算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript 数组应用 和 算法<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JS hanshu、zuoyongyu（lian）、bianlianghanshutisheng、suanfahexin.html" class="link series-item" aria-label="JS 函数、作用域（链）、变量函数提升、算法核心"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JS 函数、作用域（链）、变量函数提升、算法核心<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/shenru JavaScript shuzuxiangguanfangfa he API.html" class="link series-item" aria-label="深入 JavaScript 数组相关方法 和 API"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->深入 JavaScript 数组相关方法 和 API<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JavaScript suanfa，dachangqianduanmianshizhenti.html" class="link series-item" aria-label="JavaScript 算法，大厂前端面试真题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript 算法，大厂前端面试真题<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading active">javascript核心重点<span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JavaScript mianxiangduixiang，yuanxingheyuanxinglian.html" class="link series-item" aria-label="JavaScript 面向对象，原型和原型链"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript 面向对象，原型和原型链<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JavaScript DOM shijian，shijianliu，shijianduixiang，shijianweituo.html" class="link series-item" aria-label="JavaScript DOM 事件，事件流，事件对象，事件委托"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript DOM 事件，事件流，事件对象，事件委托<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JavaScript DOM yangshi yu jiediancaozuo.html" class="link series-item" aria-label="JavaScript DOM 样式 与 节点操作"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript DOM 样式 与 节点操作<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html" class="router-link-active router-link-exact-active link router-link-active series-item active" aria-label="JavaScript 定时器、延时器、CSS3 动画事件，防抖节流"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript 定时器、延时器、CSS3 动画事件，防抖节流<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JavaScript shubiaoshijian he HTML5 tuozhuaishijiandezongheyingyong.html" class="link series-item" aria-label="JavaScript 鼠标事件 和 HTML5 拖拽事件的综合应用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript 鼠标事件 和 HTML5 拖拽事件的综合应用<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JavaScript BOM hexin Window duixiangshuxing、fangfa、shijian.html" class="link series-item" aria-label="JavaScript BOM 核心 Window 对象属性、方法、事件"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript BOM 核心 Window 对象属性、方法、事件<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/defineProperty fangfa，JS gongyou、siyou、jingtai，zhanheduilie.html" class="link series-item" aria-label="defineProperty 方法，JS 公有、私有、静态，栈和队列"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->defineProperty 方法，JS 公有、私有、静态，栈和队列<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JavaScript jichengde 6 zhongfangshi、yingyongchangjing，nazhigouzaohanshu.html" class="link series-item" aria-label="JavaScript 继承的 6 种方式、应用场景，内置构造函数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript 继承的 6 种方式、应用场景，内置构造函数<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JavaScript sandabaozhuanglei Number、String、Boolean.html" class="link series-item" aria-label="JavaScript 三大包装类 Number、String、Boolean"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript 三大包装类 Number、String、Boolean<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JS de Math yu Date duixiang，shouxiehuodongdaojishi、rilizujian.html" class="link series-item" aria-label="JS 的 Math 与 Date 对象，手写活动倒计时、日历组件"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JS 的 Math 与 Date 对象，手写活动倒计时、日历组件<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JavaScript zhengzebiaodashicongrumendaoshijian，zhengzexiangguangongju.html" class="link series-item" aria-label="JavaScript 正则表达式从入门到实践，正则相关工具"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript 正则表达式从入门到实践，正则相关工具<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JavaScript hexinjichu，jieduanceshiti.html" class="link series-item" aria-label="JavaScript 核心基础，阶段测试题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript 核心基础，阶段测试题<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">javascript底层原理<span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JavaScript zhixingyuanli、bibao、lajihuishou、lijizhixinghanshu.html" class="link series-item" aria-label="JavaScript 执行原理、闭包、垃圾回收、立即执行函数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript 执行原理、闭包、垃圾回收、立即执行函数<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/javascript/JavaScript cuowuchuli、LHS zuochaxun、RHS youchaxun.html" class="link series-item" aria-label="JavaScript 错误处理、LHS 左查询、RHS 右查询"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript 错误处理、LHS 左查询、RHS 右查询<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--]--></aside><!--[--><main class="page-container"><h1 class="page-title">JavaScript 定时器、延时器、CSS3 动画事件，防抖节流</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->xunyu<!--]--></span></span><!----><!----><!----><!----></div><div class="theme-reco-default-content"><div><h1 id="javascript-定时器、延时器、css3-动画事件-防抖节流" tabindex="-1"><a class="header-anchor" href="#javascript-定时器、延时器、css3-动画事件-防抖节流" aria-hidden="true">#</a> JavaScript 定时器、延时器、CSS3 动画事件，防抖节流</h1><p>本节内容我们开始学习 JavaScript 定时器、延时器，requestAnimationFrame 解决定时器和延时器动画丢帧、卡顿的相关问题，CSS3 动画事件，防抖和节流，性能优化等在实际开发中的综合真实应用场景和企业高频面试真题和答案解析。</p><h2 id="一、定时器与延时器" tabindex="-1"><a class="header-anchor" href="#一、定时器与延时器" aria-hidden="true">#</a> 一、定时器与延时器</h2><p>接下来我们学习两个非常重要的知识点，定时器与延时器。<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/setInterval" target="_blank" rel="noopener noreferrer">详见 MDN 官方参考(opens new window)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="_1、setinterval-与-clearinterval" tabindex="-1"><a class="header-anchor" href="#_1、setinterval-与-clearinterval" aria-hidden="true">#</a> 1、setInterval() 与 clearInterval()</h3><p><code>setInterval()</code> 方法设置一个定时器，每间隔相同的一段时间，重复调用一个函数或执行一个代码片段</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 基本语法</span>
<span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>funtion<span class="token punctuation">,</span> delay<span class="token punctuation">,</span> arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">,</span> arg3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>delay：表示定时器延迟的时间，以毫秒为位，1 秒等于 1000 毫秒</li><li>function：这个参数是一个函数，每经过指定 delay 毫秒后执行一次。第一次调用发生在 <code>delay</code> 毫秒之后。</li><li>arg1...arg3：每次定时器到指定时间，要执行 function 函数前，这些参数会被当成 function 的参数传递给 function</li><li>timer：表示延时器的返回值，返回值是一个正整数，表示定时器的编号，这个值可以传递给<code>clearInterval()</code>来取消该定时器</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 每一秒输出一个数字</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setInterval</span><span class="token punctuation">(</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 形式参数a的值是22，形式参数b的值是66</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不断重复，过2秒在页面输入22，66</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token number">2000</span><span class="token punctuation">,</span>
  <span class="token number">22</span><span class="token punctuation">,</span>
  <span class="token number">66</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从22第三个参数开始，表示传入函数内的参数</span>

<span class="token comment">// 具名函数也可以传入setInterval</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 具名函数当做第一个参数，注意：fun这里没有圆括号</span>
<span class="token function">setInterval</span><span class="token punctuation">(</span>fun<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>清除定时器</strong></p><blockquote><p><code>clearInterval()</code> 函数可以清除一个定时器</p></blockquote><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我清除定时器<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> oBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment">// 设置定时器，并且用timer变量接收这个定时器</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 点击按钮时，清除定时器</span>
  oBtn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 清除定时器，这时需要传入定时器变量</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;清除定时器成功 ！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>案例：计时器功能</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>0秒<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>开始<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>暂停<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> oInfo <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;info&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> oBtn1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> oBtn2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment">// 设置一个定时器全局变量</span>
  <span class="token keyword">var</span> timer<span class="token punctuation">;</span>

  <span class="token comment">// 点击开始</span>
  oBtn1<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 为了防止定时器叠加（当我们不停点击开始按钮时，就能看到），我们应该在设置定时器之前先清除定时器</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 更改全局变量timer的值为一个定时器实体</span>
    timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      oInfo<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token operator">++</span>n <span class="token operator">+</span> <span class="token string">&quot;秒&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 暂停，清除定时器</span>
  oBtn2<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、settimeout-与-cleartimeout" tabindex="-1"><a class="header-anchor" href="#_2、settimeout-与-cleartimeout" aria-hidden="true">#</a> 2、setTimeout() 与 clearTimeout()</h3><p><code>setTimeout()</code>方法设置一个延时器，该延时器在定时器到期后执行一个函数或指定的一段代码。</p><blockquote><p>注意：当指定时间到了之后，<strong>会执行函数一次，不再重复执行</strong></p></blockquote><p><strong>语法</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 设置一个定时器</span>
<span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>funtion<span class="token punctuation">,</span> delay<span class="token punctuation">,</span> arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">,</span> arg3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>delay ：表示定时器延迟的时间，以毫秒为位，1 秒等于 1000 毫秒</li><li>function 这个参数是一个函数，当延时器延迟时间<code>delay</code>到期后，就会执行这个函数</li><li>arg1...arg3 等：附加参数，一旦定时器到期，它们会作为参数传递给 function ，ie 不支持</li><li>timer：表示延时器的返回值，返回值是一个正整数，表示定时器的编号，这个值可以传递给<code>clearTimeout()</code>来取消该延时器。</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在页面弹出弹窗</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 设置定时器，2，3作为函数形参a,b对应的实参</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在页面弹出 5</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token number">3</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>清除延时器</strong></p><blockquote><p><code>clearTimeout()</code>用来取消一个延时器</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 清除一个定时器</span>
<span class="token function">cleartTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn1&quot;</span><span class="token operator">&gt;</span><span class="token number">2</span>秒后弹出 Hello World ！<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn2&quot;</span><span class="token operator">&gt;</span>取消弹出<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">var</span> btn1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> btn2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 定义延时器全局变量</span>
  <span class="token keyword">var</span> timer<span class="token punctuation">;</span>

  btn1<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 更改全局变量timer的值为一个延时器实体</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World ！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 点击取消按钮</span>
  btn2<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 清除延时器</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、定时器中-this-问题" tabindex="-1"><a class="header-anchor" href="#_3、定时器中-this-问题" aria-hidden="true">#</a> 3、定时器中 this 问题</h3><ul><li>setTimout 和 setInterval 函数中的第一个参数是一个函数，当定时器到时间执行这个函数</li><li>这个函数中的<code>this</code>默认指向<code>window</code>或<code>global</code>，在严格模式下，<code>this</code>也指向<code>window</code></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">sayHello</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;大家好，我叫&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">setInterval</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>sayHello<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>修改 this 指向</strong></p><blockquote><p>方法一： 包装函数来实现 this</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">sayHello</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// obj</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;大家好，我叫&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>方法二：利用 bind 来实现</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">sayHello</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;大家好，我叫&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">setInterval</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>方法三：在外层作用域，保存 this</p></blockquote><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>start<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>开始<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> start <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  start<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>that<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// this指向start</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4、队列" tabindex="-1"><a class="header-anchor" href="#_4、队列" aria-hidden="true">#</a> 4、队列</h3><p>在讲接下来的同步与异步相关内容时，会涉及到队列相关知识，所以我们先来学习下队列相关内容</p><ul><li>队是一种线性的数据结构，它的特点是先进先出（<code>First In First Out</code>,简称<code>FIFO</code>），后进后出。</li><li>队列的出口端叫作<strong>队头</strong>（<code>front</code>），队列的入口端叫作<strong>队尾</strong>(<code>rear</code>)</li><li><strong>入队</strong>（<code>enqueue</code>）就是把新元素放入队列中，只允许在队列的队尾放入元素</li><li><strong>出队</strong>（<code>dequeue</code>）就是把元素移出队列，只允许在队列的队头移出元素。</li></ul><p><img src="https://www.arryblog.com/assets/img/image-20221103162913639.4f29d364.png" alt="image-20221103162913639"></p><p><strong>用数组来模拟队列</strong></p><p><img src="data:image/png;base64,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" alt="image-20221103211210042"></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 入队</span>
arr<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 出队</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-1、用-js-来实现一个队列" tabindex="-1"><a class="header-anchor" href="#_4-1、用-js-来实现一个队列" aria-hidden="true">#</a> 4.1、用 JS 来实现一个队列</h3><ul><li>要求队列在创建时规定好其容量</li><li>要求实现出队、入队、查看队列是否为空、队列是否已满、查看队列中元素</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function-variable function">Queue</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">maxSize</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>maxSize <span class="token operator">=</span> maxSize<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 入队</span>
  <span class="token class-name">Queue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">enqueue</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 入队前判断</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;队列已满&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 出队</span>
  <span class="token class-name">Queue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">dequeue</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;队列已空&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      arr<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 查看当前队列是否为空</span>
  <span class="token class-name">Queue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">isEmpty</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 判断队列是否满</span>
  <span class="token class-name">Queue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">isFull</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxSize<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 查看队列中所有元素</span>
  <span class="token class-name">Queue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">view</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
queue<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
queue<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
queue<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
queue<span class="token punctuation">.</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
queue<span class="token punctuation">.</span><span class="token function">isFull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上述版本缺点</p><ul><li>以上版本，在入队时还好，直接尾部插入元素，但是在出队时从队头取出元素，本质上会造成整个数组往后的所有元素都向前移动，非常消耗性能。</li><li>同时队列的容量大小一直是在不断变化的，而实际上一个队列的大小一开始分配时，大小应该是固定才更合理。</li></ul><blockquote><p>有没有什么办法能实现在出队时，能正常出，但不需要动数组中的其它元素呢 ? 同时保证整个出队和入队过程程中，栈的容量大小是固定的</p></blockquote><h3 id="_4-2、优化版本" tabindex="-1"><a class="header-anchor" href="#_4-2、优化版本" aria-hidden="true">#</a> 4.2、优化版本</h3><ul><li>我们可以利用双指针思想，同时采用循环队列的方式来实现</li><li>以下图中的队列容量（长度）为 4，需要用长度为 5 的数组来实现。</li><li>定义两个指针 front 和 rear，front 和 rear 分别表示当前队列<strong>队头</strong>和<strong>队尾</strong>的下标</li><li>刚开始初始化的队列为空，则 <code>front = rear = 0</code></li><li>入队一个元素，rear+1，向右移一位，如果队未满，当 <code>rear + 1 === arr.length</code> 时，则 <code>rear = 0</code></li><li>出队一个元素，<code>front + 1</code>,向右移一位，如果队未空，当 <code>front + 1 === arr.lenght</code> 时，<code>front = 0</code>;</li></ul><blockquote><p>重点强调：队列的容量 + 1 = 数组的长度</p></blockquote><p><img src="https://www.arryblog.com/assets/img/image-20221104001903505.2ca00ec6.png" alt="image-20221104001903505"></p><p>队列入队的整个过程</p><p><img src="https://www.arryblog.com/assets/img/image-20221103235611430.171330e9.png" alt="image-20221103235611430"></p><p>队列出队与队入的整过程</p><p><img src="https://www.arryblog.com/assets/img/image-20221103235647233.6137f46f.png" alt="image-20221103235647233"></p><p>队列出队的整个过程</p><p>通过以上绘图分析得出如下结论</p><ul><li>队满： 当 <code>(rear+1) % arr.lenght === front</code> 时，表示队满</li><li>队空： 当 <code>rear === front</code> 时，表示队空</li></ul><p><strong>出队</strong>：</p><ul><li>出队时要判断当前队是否为空，如果为空，啥也不做。</li><li>如果队不为空，要判断 <code>front + 1 === arr.length</code>如果成立则出队后，<code>front = 0</code></li><li>如果不成立，则 <code>front + 1</code></li></ul><blockquote><p>front 的计算公式：<code>front = (front + 1) % arr.length</code></p></blockquote><p><strong>入队</strong>：</p><ul><li>入队时要判断当前队是否满，如果满，啥也不做</li><li>如果队未满，要判断 <code>rear + 1 === arr.lenght</code> 如果成立，则入队后，<code>rear = 0</code></li><li>如果未满，则 <code>rear + 1</code></li></ul><blockquote><p>rear 的计算公式：<code>rear=(rear+1) % arr.length</code></p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 数组实现队</span>
  <span class="token keyword">var</span> front <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 队头</span>
  <span class="token keyword">var</span> rear <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 队尾</span>
  <span class="token function-variable function">Queue</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">capacity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>capacity <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 初始化队列长度,数组长度大比队列长度大1</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 入队</span>
  <span class="token class-name">Queue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">enQueue</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 判断是栈满</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isFull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;栈满&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    arr<span class="token punctuation">[</span>rear<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
    rear <span class="token operator">=</span> <span class="token punctuation">(</span>rear <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 入队成功</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 出队</span>
  <span class="token class-name">Queue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">deQueue</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 判断是否栈空</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;栈空&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> deQueueElement <span class="token operator">=</span> arr<span class="token punctuation">[</span>front<span class="token punctuation">]</span><span class="token punctuation">;</span>
    front <span class="token operator">=</span> <span class="token punctuation">(</span>front <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">return</span> deQueueElement<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 队满</span>
  <span class="token class-name">Queue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">isFull</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>rear <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> arr<span class="token punctuation">.</span>length <span class="token operator">===</span> front<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 队空</span>
  <span class="token class-name">Queue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">isEmpty</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>front <span class="token operator">===</span> rear<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 遍历队（或显示队）</span>
  <span class="token class-name">Queue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">view</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、单线程、同步与异步" tabindex="-1"><a class="header-anchor" href="#_5、单线程、同步与异步" aria-hidden="true">#</a> 5、单线程、同步与异步</h3><p>为了让大家更好的理解单线程、同步和异步，我们先站在生活的角度来举一个例子，帮助大家理解。</p><p>比如你现在工作是查阅合同，并归档，并且这个工作只有你一个人在做，那就属性单线程执行。</p><blockquote><p>所谓单线程，站在现实角度，简单理解就是一个人干了所有活。</p><p>至于 JS 为什么设置成单线程的，我们后面在性能优化那节课来专门讲解。</p></blockquote><p><strong>比如，你现在的工作流程如下：</strong></p><ul><li>第一：查阅合同是否有错误，我们简称 A 事情</li><li>第二：如果有错误就要提交到老板处，让老板改正 我们简称 B 事情</li><li>第三：老板改正好之后，我们要拿回合同，然后一起归档，简称 C 事情</li><li>第四：可能中间还有其它同事需要我帮助等啥的，我们简称 D 事情</li></ul><p>如果说你现在手上有 10 个文档，当你查阅到第 3 个文档时，发现文档有错误，那你现在该怎么办 ？</p><h3 id="_5-1、第一种情况-同步执行任务" tabindex="-1"><a class="header-anchor" href="#_5-1、第一种情况-同步执行任务" aria-hidden="true">#</a> 5.1、第一种情况：同步执行任务</h3><p>把错误合同提交到老板处，让老板改正后，等老板改好，再拿回来，继续查况后面的合同。老板修改合同上的错误，肯定需要花很多时间，还要找律师啥，显然在老师改合同这个时间里，我们一直等着，后面的合同也不审，那太浪费时间了。</p><blockquote><p>这种情况，就是<strong>单线的同步执行任务</strong></p></blockquote><p>一次只能做一件事，而且每次要等前面的事做完了，再做后面的，否则就一直等着。而自己一直空闲着，但后面还有好多事又做不了。</p><p><strong>JS 单线程同步执行任务</strong></p><ul><li>JS 是属于单线程的，也就是一次只能做一件事。做了 A 就不能做 B。如果前面的 A 任务会花费大量的时间，就会导致后面的 B 任务停止执行，至到 A 执行完才会执行 B。</li><li>如果排队是因为计算量大，CPU 忙不过来，倒也算了，但是很多时候 CPU 是闲着的，因为 IO 设备（输入输出设备）很慢（比如 Ajax 操作从网络读取数据，进行大量计算），不得不等着结果出来，再往下执行。</li></ul><blockquote><p>显示如果单线执行任务，只能同步执行的话，那是非常麻烦的。</p></blockquote><h3 id="_5-2、第二种情况-同步与异步结合执行任务" tabindex="-1"><a class="header-anchor" href="#_5-2、第二种情况-同步与异步结合执行任务" aria-hidden="true">#</a> 5.2、第二种情况：同步与异步结合执行任务</h3><p>每次把错误的合同提交到老板那里，让老板去改正，自己继续审下面的合同。等老板改好合同后，来通知我去拿合同时，我才会<strong>考虑去取回合同</strong>。</p><p>老板通知我拿合同时，如果手上的事没有忙完，则等我忙完了，再去老板那里拿回合同，一起归档，如果忙完了，那就直接去老板哪里取回合同。</p><p>如果我忙完了，老板还没有通知我，那我闲着没事也没关系。</p><blockquote><p>这种情况，就是<strong>同步与异步混合的方式来执行任务</strong></p></blockquote><p>从上面这件事来看，第二种情况肯定工作效率会更高，那在我们 JS 执行代码时，他也采用的是第二种机制，同步与异步结合的方式执行代码。</p><p><strong>为了防止主线程的不阻塞，异步方案产生</strong></p><p>所有任务可以分成两种，一种是同步任务（synchronous），另一种是异步任务（asynchronous）。</p><blockquote><p>就好比上面的 A、B、D 是同步任务，C 是异步任务</p></blockquote><ul><li><strong>同步任务指的是：</strong> 在主线程上排队执行的任务，只有前一个任务执行完毕，才能执行后一个任务；</li><li><strong>异步任务指的是：</strong> 不进入主线程、而进入&quot;任务队列&quot;（task queue）的任务，只有&quot;任务队列&quot;通知主线程，某个异步任务可以执行了，该任务才会进入主线程执行</li></ul><blockquote><p>JS 中代码分为同步代码和异步代码。大部分代码是同步的，只有少许代码是异步的</p></blockquote><h3 id="_5-3、js-执行中遇到异步任务如何处理" tabindex="-1"><a class="header-anchor" href="#_5-3、js-执行中遇到异步任务如何处理" aria-hidden="true">#</a> 5.3、JS 执行中遇到异步任务如何处理</h3><ul><li>JS 代码在执行代码时，也是一样的，首先会将所有同步代码执行完了，再去执行异步的代码。</li><li>如果在执行过程中碰到了异步的代码，那 JS 就会先把他暂时放到一个<strong>任务队列中</strong>等着，等同步的代码全部执行完了再<strong>执行任务队列中的异步代码</strong>。</li><li>执行顺序按先插入队列的先拿出来执行。</li></ul><p><strong>JS 代码执行流程（简化版）</strong></p><p><img src="https://www.arryblog.com/assets/img/image-20221103170123369.e9094f48.png" alt="image-20221103170123369"></p><h3 id="_5-4、setinterval-和-settimeout-是两个异步语句" tabindex="-1"><a class="header-anchor" href="#_5-4、setinterval-和-settimeout-是两个异步语句" aria-hidden="true">#</a> 5.4、setInterval 和 setTimeout 是两个异步语句</h3><blockquote><p>我们来分析下，下面这段代码的执行结果</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;定时器1000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;定时器0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span><span class="token operator">...</span>

<span class="token comment">// 最后执行结果  1，2，3，4 定时器0  定时器1000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.arryblog.com/assets/img/image-20221028182135373.0f66236d.png" alt="image-20221028182135373"></p><p>代码从上往下执行时，碰到<code>setInterval()</code> 和<code>setTimeout()</code> 异步任务时，浏览器会把这个任务放在 <code>Event Table</code>，等到定时器计时一到，会把对应<strong>回调函数</strong>加入到<code>Event Queue</code><strong>事件队列</strong>中，等其它的同步代码执行完了，再去执行他们。</p><blockquote><p>定时器的计时不是由 JS 主线程来负责的。</p></blockquote><p>这里就会造成定时器并不能完全按预期的延迟时间来执行代码。因为有可能定时器的等待时间是 100ms，而同步代码执行的时间要 200ms，这样就会造成定时器要在 200ms 后才会第一次被执行。</p><p>总结</p><p><strong>单线程：</strong> 一个人干了所有活，而且每次只能做一件事，JS 就是单线程的。</p><p><strong>同步</strong></p><ul><li>同步就是一件一件事情来，只有等前面的事情做完了，才会做后面的事情，如果前面的事情耗时很长，也要一直等着完成才做后面。</li><li>同步会阻塞后续代码的执行</li></ul><p><strong>异步</strong></p><ul><li>异步是相同同步而言的，如果在做的过程中遇到异步的任务，就把他先放在一边，等同步的事情做完了，再去做异步的任务</li><li>异步不会阻塞后续代码的执行</li></ul><blockquote><p>异步任务一般都是非常耗时的，而且会受到外部影响。</p></blockquote><h3 id="_5-5、异步的应用场景" tabindex="-1"><a class="header-anchor" href="#_5-5、异步的应用场景" aria-hidden="true">#</a> 5.5、异步的应用场景</h3><ul><li>异步任务都是基于 callback 回调函数的形式来处理的，即需要异步处理的代码放在 callbacak 回调函数中</li><li>遇到异步任务，就会把对应的 callback 函数，添加到任务队列中，等同步执行完，再到任务队列中取出对应的回调数，开始执行。</li></ul><p><strong>常见的异步任务有</strong></p><ul><li>网络请求，如：ajax，图片加载</li><li>定时任务，如：<code>setInterval()</code> 和 <code>setTimeout()</code></li></ul><p><strong>图片加载案例</strong></p><ul><li>load 事件，表示图片加载成功后要触发的事件</li><li>error 事件，表示图片加载失败后要触发的事件</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;同步代码1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 同步代码</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;https://www.arryblog.com/logo.png&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 同步代码</span>
img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;图片加载成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 异步回调</span>
img<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;图片加载失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 异步回调</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;同步代码2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注：</p><p>ajax 后面还会重点讲，setInterval 和 setTimeout 接下来会重点讲</p><h3 id="_6、定时器实现动画" tabindex="-1"><a class="header-anchor" href="#_6、定时器实现动画" aria-hidden="true">#</a> 6、定时器实现动画</h3><ul><li>动画的本质，就是在更改 CSS 样式</li><li>比如，制作一个变色的小球，就是在一定的时间内改变 div 的背景颜色</li><li>比如，实现一个长方形，从左边移动到右边，本质就是在不停的更改 div 的 left 值（前提 div 是一个定位元素）</li></ul><blockquote><p>我们利用定时器，在一定的时间内，更改元素身上的 CSS 属性，就能实现简单的动画效果</p></blockquote><h3 id="_6-1、案例-1-实现变色小球" tabindex="-1"><a class="header-anchor" href="#_6-1、案例-1-实现变色小球" aria-hidden="true">#</a> 6.1、案例 1：实现变色小球</h3><blockquote><p>开一个定时器，间隔一定的时间，就更改下元素的背景颜色</p></blockquote><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.ball</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ball<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> ball <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.ball&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;yellow&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;skyblue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> index <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> len<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> color <span class="token operator">=</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
    ball<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> color<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2、案例-2-匀速运动-向右" tabindex="-1"><a class="header-anchor" href="#_6-2、案例-2-匀速运动-向右" aria-hidden="true">#</a> 6.2、案例 2：匀速运动 - 向右</h3><p>当点击开始按时，希望小球从左边运动到右边的某个位置，然后停下来，在整个过程中小球运动要到达目的地，可以是</p><ul><li>匀速运动</li><li>减速运动</li><li>限定时间（规定多长时间运动到目的）</li></ul><p><strong>我们来先看第一种：匀速运动 - 向右运动</strong></p><ul><li>匀速运动，即小球每次移动的距离是一样的，我们把每一次移动距离称为<strong>步长（step）</strong></li><li>我们可以开启一个定时器，让小球每次从当前位置向右移动规定的<strong>步长</strong></li><li>当小球到达目的时，暂停动画（即关闭定时器）</li></ul><blockquote><p>在小球每有到达目地的时，如果一直按开始按扭，会开启很多个定时器，小球的运动速度会越来越快</p><p>所以每次在开启一个新的定时器前，要关闭之前的定时器</p></blockquote><p><img src="https://www.arryblog.com/assets/img/GIF2022-11-1218-16-21.3c55fdbd.gif" alt="GIF2022-11-1218-16-21"></p><p><img src="https://www.arryblog.com/assets/img/image-20221113010343615.64a9347e.png" alt="image-20221113010343615"></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">#ball</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>开始<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ball<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 点击按扭，方块开始运动</span>
    <span class="token keyword">var</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ball <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;ball&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> step <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token comment">// 小球每次运动的步长</span>
    <span class="token keyword">var</span> target <span class="token operator">=</span> <span class="token number">800</span><span class="token punctuation">;</span> <span class="token comment">// 运动到的目的</span>
    <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//记录定时器</span>
    button<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 每次开启新定时器前，把之前的定时器关闭</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 定时器隔一定时间，让小球向右移动一定距离</span>
      timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果移动距离超过了目标位置，则让他运动到目标位置</span>
        <span class="token keyword">var</span> currentLocation <span class="token operator">=</span> ball<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> step<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>currentLocation <span class="token operator">&gt;=</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          currentLocation <span class="token operator">=</span> target<span class="token punctuation">;</span>
          <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        ball<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> currentLocation <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>把上面控制小球运动的代码封装成一个函数</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * move 运动函数 指定元素以规定的步长匀速运动到目的
 * <span class="token keyword">@param</span> <span class="token parameter">el</span> 需要运动的元素
 * <span class="token keyword">@param</span> <span class="token parameter">step</span> 每次运动的步长（移动的距离）
 * <span class="token keyword">@param</span> <span class="token parameter">target</span> 运动到的目的点
 * <span class="token keyword">@param</span> <span class="token parameter">delay</span> 定时器每次间隔时长，如果没有传就启用默认值20
 */</span>
<span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> step<span class="token punctuation">,</span> target<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">20</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 定时器隔一定时间，让小球向右移动一定距离</span>
  el<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果移动距离超过了目标位置，则让他运动到目标位置</span>
    <span class="token keyword">var</span> currentLocation <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> step<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentLocation <span class="token operator">&gt;=</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      currentLocation <span class="token operator">=</span> target<span class="token punctuation">;</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> currentLocation <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注：</p><p>以上方法，小球只能向右运动。如果想让小球在水平向左或向右运动，我们需要修改代码</p><h3 id="_6-3、案例-3-匀速水平-向左或向右" tabindex="-1"><a class="header-anchor" href="#_6-3、案例-3-匀速水平-向左或向右" aria-hidden="true">#</a> 6.3、案例 3：匀速水平（向左或向右）</h3><p>要让小球沿水平（向左或向右）运动，那就要判断小球的位置与目标点的距离</p><ul><li>如果小球位置 &lt; 目标点位置，则 step 为正数</li><li>如果小球位置 &gt; 目标点位置，则 step 为负数</li></ul><blockquote><p>所以小球运动到目标点停止的条件就变成了</p></blockquote><ul><li>当前位置 &gt;= 目标位置 &amp;&amp; step 为正数时，停止</li><li>或 当前位置 &lt;= 目标位置 &amp;&amp; step 为负数时，停止</li></ul><p><img src="data:image/gif;base64,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" alt="GIF2022-11-1218-41-16"></p><p><img src="https://www.arryblog.com/assets/img/image-20221113011727222.3faae5ed.png" alt="image-20221113011727222"></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 如果当前位置大于目标位置  step设为负数</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>offsetLeft <span class="token operator">&gt;</span> target<span class="token punctuation">)</span> step <span class="token operator">=</span> <span class="token operator">-</span>step<span class="token punctuation">;</span>

<span class="token comment">// 小球停止运动条件</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>
  <span class="token punctuation">(</span>currentLocation <span class="token operator">&gt;=</span> target <span class="token operator">&amp;&amp;</span> step <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">||</span>
  <span class="token punctuation">(</span>currentLocation <span class="token operator">&lt;=</span> target <span class="token operator">&amp;&amp;</span> step <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  currentLocation <span class="token operator">=</span> target<span class="token punctuation">;</span>
  <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>完整代码</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * move 运动函数 指定元素以规定的步长匀速运动到目的
 * <span class="token keyword">@param</span> <span class="token parameter">el</span> 需要运动的元素
 * <span class="token keyword">@param</span> <span class="token parameter">step</span> 每次运动的步长（移动的距离）
 * <span class="token keyword">@param</span> <span class="token parameter">target</span> 运动到的目的点
 * <span class="token keyword">@param</span> <span class="token parameter">delay</span> 定时器每次间隔时长，如果没有传就启用默认值20
 */</span>
<span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> step<span class="token punctuation">,</span> target<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">20</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 判断目标位置与当前元素位置</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>offsetLeft <span class="token operator">&gt;</span> target<span class="token punctuation">)</span> step <span class="token operator">=</span> <span class="token operator">-</span>step<span class="token punctuation">;</span>
  <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 定时器隔一定时间，让小球向右移动一定距离</span>
  el<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果移动距离超过了目标位置，则让他运动到目标位置</span>
    <span class="token keyword">var</span> currentLocation <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> step<span class="token punctuation">;</span>
    <span class="token comment">// 小球停止运动的条件</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      <span class="token punctuation">(</span>currentLocation <span class="token operator">&gt;=</span> target <span class="token operator">&amp;&amp;</span> step <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">||</span>
      <span class="token punctuation">(</span>currentLocation <span class="token operator">&lt;=</span> target <span class="token operator">&amp;&amp;</span> step <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      currentLocation <span class="token operator">=</span> target<span class="token punctuation">;</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> currentLocation <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-4、案例-3-减速运动-向右" tabindex="-1"><a class="header-anchor" href="#_6-4、案例-3-减速运动-向右" aria-hidden="true">#</a> 6.4、案例 3：减速运动 - 向右</h3><ul><li>所谓减速运动，我们可以理解为，让一个元素从左边运动到右边，其运动的速度越来越小，到最后停止运动。</li><li>比如小球从左边运动到右边，其<strong>步长</strong>变化类似于： <code>step = 10</code>，<code>step = 9</code>、<code>step = 7</code> ... <code>step = 1</code> 最后到达终点，然后停止运动。</li></ul><blockquote><p>这里的难点在于，整个过程中速度的变化如何消减，从而还要实现在速度消减到最小的时候小球运动到了目地的。这里有一个简单计算每一次小球运动步长的公式</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// n 是一个大于1的数，如果等于1，直接到达目地的，所以n仅可能设置大些</span>
step <span class="token operator">=</span> <span class="token punctuation">(</span>目地的 <span class="token operator">-</span> 当前位置<span class="token punctuation">)</span> <span class="token operator">/</span> n<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.arryblog.com/assets/img/image-20221113014902575.517a3db1.png" alt="image-20221113014902575"></p><blockquote><p>小球从最左边做减速运动运动到 600px 的位置</p></blockquote><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">#ball</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>开始<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ball<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// 点击按扭，方块开始运动</span>
  <span class="token keyword">var</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> ball <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;ball&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  button<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">move</span><span class="token punctuation">(</span>ball<span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token doc-comment comment">/**
   * move 实现减速运动
   * <span class="token keyword">@param</span> <span class="token parameter">el</span> 需要运动的元素
   * <span class="token keyword">@param</span> <span class="token parameter">target</span> 运动到的目的点
   * <span class="token keyword">@param</span> <span class="token parameter">delay</span> 定时器每次间隔时长，如果没有传就启用默认值20
   */</span>
  <span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> target<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">20</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 每次开启一个新定时器前，先清除原来的</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 开启定时器</span>
    el<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 计算每次运动的步长  小数向上取正</span>
      <span class="token keyword">var</span> step <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span>target <span class="token operator">-</span> el<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 到达目标位置，停上下（即清除定时器）</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>offsetLeft <span class="token operator">===</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 让小球运动起来</span>
      el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> step <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注：</p><p>以上方法，小球只能向右运动。如果想让小球在水平向左或向右运动，我们需要修改代码</p><h3 id="_6-5、案例-4-减速运动-水平-向左或向右" tabindex="-1"><a class="header-anchor" href="#_6-5、案例-4-减速运动-水平-向左或向右" aria-hidden="true">#</a> 6.5、案例 4：减速运动 - 水平（向左或向右）</h3><p>要让小球沿水平（向左或向右）运动，那就要判断小球的位置与目标点的距离</p><ul><li>如果小球位置 &lt; 目标点位置，则 step 为正数，向上取整</li><li>如果小球位置 &gt; 目标点位置，则 step 为负数，向下取整</li></ul><p><img src="https://www.arryblog.com/assets/img/image-20221113015120515.d62be9cf.png" alt="image-20221113015120515"></p><p><img src="https://www.arryblog.com/assets/img/image-20221113015231299.d810b055.png" alt="image-20221113015231299"></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * move 实现减速运动
 * <span class="token keyword">@param</span> <span class="token parameter">el</span> 需要运动的元素
 * <span class="token keyword">@param</span> <span class="token parameter">target</span> 运动到的目的点
 * <span class="token keyword">@param</span> <span class="token parameter">delay</span> 定时器每次间隔时长，如果没有传就启用默认值20
 */</span>
<span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> target<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">20</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 每次开启一个新定时器前，先清除原来的</span>
  <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 开启定时器</span>
  el<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 计算每次运动的步长</span>
    <span class="token keyword">var</span> step <span class="token operator">=</span> <span class="token punctuation">(</span>target <span class="token operator">-</span> el<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token comment">// 如果step大于0，则向上取正  如果step小于0，则向下取正</span>
    step <span class="token operator">=</span> step <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span> <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 到达目标位置，停上下（即清除定时器）</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>offsetLeft <span class="token operator">===</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 让小球运动起来</span>
    el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> step <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-6、案例-6-动画函数添加回调函数" tabindex="-1"><a class="header-anchor" href="#_6-6、案例-6-动画函数添加回调函数" aria-hidden="true">#</a> 6.6、案例 6：动画函数添加回调函数</h3><blockquote><p>我们希望动画运动结束后，再执行某些操作，我们就可以通过添加回调函数的形式来实现</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>button<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">move</span><span class="token punctuation">(</span>ball<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">move</span><span class="token punctuation">(</span>ball<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// move(ball, 500, move.bind(null, ball, 0));</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * move 实现减速运动
 * <span class="token keyword">@param</span> <span class="token parameter">el</span> 需要运动的元素
 * <span class="token keyword">@param</span> <span class="token parameter">target</span> 运动到的目地的
 * <span class="token keyword">@param</span> <span class="token parameter">callback</span> 回调函数，当运动执行结束后，执行回调函数中代码
 */</span>
<span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> target<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 每次开启一个新定时器前，先清除原来的</span>
  <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 开启定时器</span>
  el<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 计算每次运动的步长</span>
    <span class="token keyword">var</span> step <span class="token operator">=</span> <span class="token punctuation">(</span>target <span class="token operator">-</span> el<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token comment">// 如果step大于0，则向上取正  如果step小于0，则向下取正</span>
    step <span class="token operator">=</span> step <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span> <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>offsetLeft <span class="token operator">===</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 判断传过来的是不是一个函数，如果是一个函数就调用</span>
      callback <span class="token keyword">instanceof</span> <span class="token class-name">Function</span> <span class="token operator">?</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> callback<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 让小球运动起来</span>
    el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> step <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-7、案例-7-多属性减速运动" tabindex="-1"><a class="header-anchor" href="#_6-7、案例-7-多属性减速运动" aria-hidden="true">#</a> 6.7、案例 7：多属性减速运动</h3><p>我们希望小球按我们指定的属性来发生变化，如果同时指定多个属性呢 ？</p><blockquote><p>那要如何处理</p></blockquote><p><strong>难点一：多个属性如何指定，传值问题</strong>。</p><blockquote><p>我们把 target 目标参数改成一个对象，用对象的形式来指定变化的属性值，如下：</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>target <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">400</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>难点二：如何控制每个属性的变化</strong></p><ul><li>可以利用 <code>for..in</code> 循环遍历出 target 中的每个属性名和对应的属性值</li><li>然后利用 <code>getComputedStyle()</code> 方法，获取元素当前对应属性值，与目标值对比，来控制属性变化</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// for ...in 遍历target，获取对应属性名和属性值</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">}</span>

<span class="token comment">// 获取元素对应属性值</span>
<span class="token keyword">function</span> <span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> attr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">[</span>attr<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>难点三：何时暂停定时器</strong></p><ul><li>多个属性发生变化，只有当所有属性变化值都达到目标时，才会能暂停定时器。</li><li>判断方法：我们设置一个 flag 属性用来记录是否所有属性都达到了目标值，只要有一个没有达到<code>flag = false</code>,只有所有值都达到目标值时，<code>flag = true</code></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 清除定时器</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
 * move 实现多属性减速运动动画效果
 * <span class="token keyword">@param</span> <span class="token parameter">el</span> 需要运动的元素
 * <span class="token keyword">@param</span> <span class="token parameter">target</span> 运动到的目地的,是一个对象 传入方式 target = <span class="token punctuation">{</span> left: &quot;200px&quot;, top: &quot;300px&quot;, width: &quot;300px&quot;, height: &quot;400px&quot; <span class="token punctuation">}</span>;
 * <span class="token keyword">@param</span> <span class="token parameter">callback</span> 回调函数，当运动执行结束后，执行回调函数中代码
 */</span>

<span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 清除定时器</span>
  <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  el<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 假设当前所有属性值达到目标值</span>
    <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">// 遍历出target目标中的每个属性和对应属性值</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> attrValue <span class="token operator">=</span> <span class="token function">getStyle</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 元素对应属性值</span>
      <span class="token comment">// 计算每一次变化的步长</span>
      <span class="token keyword">var</span> step <span class="token operator">=</span> <span class="token punctuation">(</span>target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">-</span> attrValue<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>
      <span class="token comment">// 如果step大于0，向上取整，如果小于0，向下取整</span>
      step <span class="token operator">=</span> step <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span> <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 设置元素属性变化</span>
      el<span class="token punctuation">.</span>style<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> attrValue <span class="token operator">+</span> step <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      <span class="token comment">// 如果当前元素身上的值没有等于目标值，则flag=false</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!==</span> attrValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 以下判断要放在for..in循环的外面</span>
    <span class="token comment">// 如果所有属性达到目标值，则停止动画</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      callback <span class="token keyword">instanceof</span> <span class="token class-name">Function</span> <span class="token operator">?</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> callback<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取当前元素的css样式</span>
<span class="token keyword">function</span> <span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> attr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">[</span>attr<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>把 opacity 透明度属性融入进去</p><p>我们把 <code>透明度的属性值 * 100</code> 再处理，然后保存结果时，再除以 100</p><blockquote><p>如果用户传过来的对应属性 left，top，width，height，opacity 值，带有小数，我们在比较时用整数来比较。</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * move 多属性运动动画
 * el 运动的元素
 * target 多个属性的目标值 target=<span class="token punctuation">{</span>width:&#39;300px&#39;,height:&#39;400px&#39;<span class="token punctuation">}</span>
 * callback 回调函数  动画结束后执行
 * delay 定时器的执行间隔时间
 */</span>
<span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> target <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">20</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 开定时器之前，要清定时器</span>
  <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  el<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">//假设所有的属性都到达目标值</span>
    <span class="token comment">// 多属性动画</span>
    <span class="token comment">// 通过for...in遍历 target对象，取得每个key和(value)</span>
    <span class="token comment">// 通过key得到当前改变的属性，及属性的当前值</span>
    <span class="token comment">// 通过value得到当前改变的属性的目标值</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 要对传过来的key做一个判断，判断是不是一个opacity</span>
      <span class="token keyword">var</span> attrValue <span class="token operator">=</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 当前值   1</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;opacity&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 将值 1 或 0.4等 转换成 100或 40</span>
        attrValue <span class="token operator">=</span> attrValue <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        attrValue <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>attrValue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 当前值   1</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">var</span> targetValue <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 目标值   30</span>

      <span class="token comment">// 计算运动的步长step(速度 speed)</span>
      <span class="token keyword">var</span> step <span class="token operator">=</span> <span class="token punctuation">(</span>targetValue <span class="token operator">-</span> attrValue<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>
      step <span class="token operator">=</span> step <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span> <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">var</span> currentDistance <span class="token operator">=</span> attrValue <span class="token operator">+</span> step<span class="token punctuation">;</span>
      <span class="token comment">// 只要有一个属性没有到达目标值，那就把flag设置为false</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>currentDistance <span class="token operator">!==</span> targetValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 赋值</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;opacity&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        el<span class="token punctuation">.</span>style<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> currentDistance <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        el<span class="token punctuation">.</span>style<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> currentDistance <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 清定时器,只有flage=true时</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 执行回调</span>
      callback <span class="token keyword">instanceof</span> <span class="token class-name">Function</span> <span class="token operator">?</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> callback<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注：</p><p>以上情况，传入的 opacity 只能是 1 到 100 之间的整数</p><h3 id="_6-8、案例-8-限定时间动画" tabindex="-1"><a class="header-anchor" href="#_6-8、案例-8-限定时间动画" aria-hidden="true">#</a> 6.8、案例 8：限定时间动画</h3><ul><li>限定步长的动画，是没有办法精准的把控好时间的，其运动的距离也长，耗时越长</li><li>如果我们要限定时间，在规定的时间内完成动画，那需要如何实现呢 ？</li></ul><p><img src="https://www.arryblog.com/assets/img/image-20221113020442421.688f5c26.png" alt="image-20221113020442421"></p><p><strong>限定时间的匀速运动公式</strong></p><ul><li>T：time 已经运动的时间</li><li>B：begin 开始位置</li><li>C：change 需要移动的总距离 = Target - Begin</li><li>D：duration 动画运动的总时间</li></ul><p><code>CurrentDistance = T / D * C + B</code> 即 <code>当前位置 = T / D * C + B</code> 每次运动后，元素的当前位置</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * move 实现限定时间匀速运动
 * <span class="token keyword">@param</span> <span class="token parameter">el</span> 需要运动的元素
 * <span class="token keyword">@param</span> <span class="token parameter">target</span> 目标位置
 * <span class="token keyword">@param</span> <span class="token parameter">duration</span> 运动所消耗的总时长
 * <span class="token keyword">@param</span> <span class="token parameter">callback</span> 回调函数，当运动执行结束后，执行回调函数中代码
 */</span>
<span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> target<span class="token punctuation">,</span> duration <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 清除定时器</span>
  <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 用来记录当前运动的耗时</span>
  <span class="token keyword">var</span> begin <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span> <span class="token comment">// 开始位置</span>
  <span class="token keyword">var</span> change <span class="token operator">=</span> target <span class="token operator">-</span> begin<span class="token punctuation">;</span> <span class="token comment">// 移动的总距离</span>
  <span class="token keyword">var</span> currentDistance<span class="token punctuation">;</span> <span class="token comment">// 用来记录当前元素所在位置</span>
  el<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    time <span class="token operator">+=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> currentDistance <span class="token operator">=</span> <span class="token punctuation">(</span>time <span class="token operator">/</span> duration<span class="token punctuation">)</span> <span class="token operator">*</span> change <span class="token operator">+</span> begin<span class="token punctuation">;</span>
    <span class="token comment">// 如果时间超过总时间，则将最终位置设定为目标位置</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">&gt;=</span> duration<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      currentDistance <span class="token operator">=</span> target<span class="token punctuation">;</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> currentDistance <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">&gt;=</span> duration<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      callback <span class="token keyword">instanceof</span> <span class="token class-name">Function</span> <span class="token operator">?</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> callback<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-9、案例-9-多属性限定时间动画" tabindex="-1"><a class="header-anchor" href="#_6-9、案例-9-多属性限定时间动画" aria-hidden="true">#</a> 6.9、案例 9：多属性限定时间动画</h3><p><img src="https://www.arryblog.com/assets/img/GIF2022-11-150-58-34.f0de497d.gif" alt="GIF2022-11-150-58-34"></p><p><strong>关注以下几大核心问题：</strong></p><ul><li>多属性运动，target 保存数据的结构定义成如下，用户按这个格式来传数据</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> target <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">&quot;200px&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token string">&quot;2s&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token string">&quot;600px&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token string">&quot;5s&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token string">&quot;200px&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token string">&quot;1s&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>对上面结构的数据做转换，转成适合编程的如下结构数据</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * attr 运动的属性
 * target 运动的目标值
 * D ：duration 动画（某个属性）运动的总时间
 * B ：Begin 动画（当前属性）的开始位置
 * C : Change 需要改变的总距离  target -B
 */</span>
<span class="token keyword">var</span> target <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">attr</span><span class="token operator">:</span> <span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> <span class="token constant">D</span><span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">attr</span><span class="token operator">:</span> <span class="token string">&quot;left&quot;</span><span class="token punctuation">,</span> <span class="token constant">D</span><span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span> <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">:</span> <span class="token number">590</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">attr</span><span class="token operator">:</span> <span class="token string">&quot;top&quot;</span><span class="token punctuation">,</span> <span class="token constant">D</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token operator">:</span> <span class="token number">190</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>数据结构转换函数</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> attrArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;left&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;top&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;height&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">convertDataStruct</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> target<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> target<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> index <span class="token operator">=</span> attrArr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        obj<span class="token punctuation">.</span>attr <span class="token operator">=</span> key<span class="token punctuation">;</span>
        obj<span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        obj<span class="token punctuation">.</span><span class="token constant">B</span> <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        obj<span class="token punctuation">.</span><span class="token constant">C</span> <span class="token operator">=</span> obj<span class="token punctuation">.</span>target <span class="token operator">-</span> obj<span class="token punctuation">.</span><span class="token constant">B</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        obj<span class="token punctuation">.</span><span class="token constant">D</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>获取多个属性中，运动时间最长的那个时间。</li><li>只有当记录的时间大于等于多个属性中运动时间最长的那个，才能清除定时器</li><li>要考虑，用户可能没有传 duration 参数</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 获取数组中动画运动时间最长的时间，同时将时间转换成 ms  返回结果类似  5000
 * <span class="token keyword">@param</span> <span class="token parameter">target</span> 运动属性数组
 */</span>
<span class="token keyword">function</span> <span class="token function">getMaxTime</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> max <span class="token operator">=</span> target<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>duration <span class="token operator">&amp;&amp;</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>duration<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>
  max <span class="token operator">=</span> max <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 如果没有设置duration,则时间为0</span>
  target<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> time <span class="token operator">=</span> value<span class="token punctuation">.</span>duration <span class="token operator">&amp;&amp;</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>duration<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>
    time <span class="token operator">=</span> time <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>max <span class="token operator">&lt;</span> time<span class="token punctuation">)</span> max <span class="token operator">=</span> time<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> max<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> duration <span class="token operator">=</span> <span class="token function">getMaxTime</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>开启定时器，利用 for 循环，改变每个属性的的值</li><li>如果用户参数中没有传 duration，则把运动时间默认设为 200ms</li><li>如果 MaxTime 没有，或为 0，则把运动最大时间默认设为 200ms</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> target<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 清除定时器</span>

  <span class="token keyword">var</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 记录动画已经运动的时间</span>
  <span class="token keyword">var</span> MaxTime <span class="token operator">=</span> <span class="token function">getMaxTime</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">200</span><span class="token punctuation">;</span> <span class="token comment">// 获取目标属性中运动时间最长的那个时间</span>
  <span class="token keyword">var</span> target <span class="token operator">=</span> <span class="token function">convertDataStruct</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 开定时器</span>
  el<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token constant">T</span> <span class="token operator">+=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token comment">// 遍历目标数组</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> target<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> <span class="token constant">D</span> <span class="token operator">=</span> target<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token constant">D</span> <span class="token operator">||</span> <span class="token number">200</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> <span class="token constant">B</span> <span class="token operator">=</span> target<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token constant">B</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> <span class="token constant">C</span> <span class="token operator">=</span> target<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token constant">C</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> currentDistance <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token operator">/</span> <span class="token constant">D</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">C</span> <span class="token operator">+</span> <span class="token constant">B</span><span class="token punctuation">;</span>
      el<span class="token punctuation">.</span>style<span class="token punctuation">[</span>target<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>attr<span class="token punctuation">]</span> <span class="token operator">=</span> currentDistance <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>如何保证累计时间大于属性运动时间，元素属性值为目标值</li><li>如果累计时间 &gt; 属性运动时间，则属性值 = 目标值，但不清定时器</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 记录的时间大于或等于了当前属性的时间，那就要强制设置他的当前值为目标值</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token operator">&gt;=</span> <span class="token constant">D</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  currentDistance <span class="token operator">=</span> target<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>target<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>何时清除定时器</li><li>累计时间 &gt; 多个属性中最大运动时间时，清定时器</li><li>清定时器，表示动画结束，可以执行回调</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 当累计的时间超过的了最大的运动时间，就清定时器</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token operator">&gt;</span> MaxTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 动画执行完，执行回调函数</span>
  callback <span class="token keyword">instanceof</span> <span class="token class-name">Function</span> <span class="token operator">?</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> callback<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>完整源码</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span>move <span class="token operator">=</span> move<span class="token punctuation">;</span>

  <span class="token doc-comment comment">/**
   * 多属性 限定时间动画
   * el 运动的元素
   * target 表示运动的目标点
   * callback回调函数，动画执行完要做的事情
   * duration 动画运动的总时间
   */</span>

  <span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> target<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 清除定时器</span>

    <span class="token keyword">var</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 记录动画已经运动的时间</span>
    <span class="token keyword">var</span> MaxTime <span class="token operator">=</span> <span class="token function">getMaxTime</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">200</span><span class="token punctuation">;</span> <span class="token comment">// 获取目标属性中运动时间最长的那个时间</span>
    <span class="token keyword">var</span> target <span class="token operator">=</span> <span class="token function">convertDataStruct</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 开定时器</span>
    el<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token constant">T</span> <span class="token operator">+=</span> <span class="token number">20</span><span class="token punctuation">;</span>
      <span class="token comment">// 遍历目标数组</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> target<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> <span class="token constant">D</span> <span class="token operator">=</span> target<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token constant">D</span> <span class="token operator">||</span> <span class="token number">200</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> <span class="token constant">B</span> <span class="token operator">=</span> target<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token constant">B</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> <span class="token constant">C</span> <span class="token operator">=</span> target<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token constant">C</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> currentDistance <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token operator">/</span> <span class="token constant">D</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">C</span> <span class="token operator">+</span> <span class="token constant">B</span><span class="token punctuation">;</span>

        <span class="token comment">// 记录时间大于属性运动时间，强制把属性的值设为目标值</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token operator">&gt;=</span> <span class="token constant">D</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          currentDistance <span class="token operator">=</span> target<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>target<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        el<span class="token punctuation">.</span>style<span class="token punctuation">[</span>target<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>attr<span class="token punctuation">]</span> <span class="token operator">=</span> currentDistance <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token comment">// for结束位置</span>

      <span class="token comment">// 当累计的时间超过的了最大的运动时间，就清定时器</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token operator">&gt;</span> MaxTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 动画执行完，执行回调函数</span>
        callback <span class="token keyword">instanceof</span> <span class="token class-name">Function</span> <span class="token operator">?</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> callback<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">getMaxTime</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> max <span class="token operator">=</span> target<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>duration <span class="token operator">&amp;&amp;</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>duration<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>
    max <span class="token operator">=</span> max <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    target<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> time <span class="token operator">=</span> value<span class="token punctuation">.</span>duration <span class="token operator">&amp;&amp;</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>duration<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>
      time <span class="token operator">=</span> time <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>max <span class="token operator">&lt;</span> time<span class="token punctuation">)</span> max <span class="token operator">=</span> time<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> max<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 将以下数据结构转换为</span>
  <span class="token comment">/*
        var target = [
        {
          width: &quot;200px&quot;,
          duration: &quot;2s&quot;,
        },
        {
          left: &quot;600px&quot;,
          duration: &quot;5s&quot;,
        },
        {
          top: &quot;200px&quot;,
          // duration: &quot;1s&quot;,
        },
      ];
      */</span>

  <span class="token comment">/* 将上面数组结构，转换为下面这种数据结构
      var target = [
        { attr: &quot;width&quot;, D: 2000, target: 200, B: 100, C: 100 },
        { attr: &quot;left&quot;, D: 5000, target: 600, B: 10, C: 590 },
        { attr: &quot;top&quot;, D: 1000, target: 200, B: 10, C: 190 },
     ];
     */</span>

  <span class="token doc-comment comment">/**
   * convertDataStruct 转换数据结构
   * el 运动的元素
   * target 多属性运动数组
   */</span>
  <span class="token keyword">var</span> attrArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;left&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;top&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;height&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">convertDataStruct</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> target<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> target<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> index <span class="token operator">=</span> attrArr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          obj<span class="token punctuation">.</span>attr <span class="token operator">=</span> key<span class="token punctuation">;</span>
          obj<span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          obj<span class="token punctuation">.</span><span class="token constant">B</span> <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          obj<span class="token punctuation">.</span><span class="token constant">C</span> <span class="token operator">=</span> obj<span class="token punctuation">.</span>target <span class="token operator">-</span> obj<span class="token punctuation">.</span><span class="token constant">B</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          obj<span class="token punctuation">.</span><span class="token constant">D</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>常见的动画运动公式</strong>：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 运动方式</span>
<span class="token keyword">var</span> Tween <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 匀速运动公式</span>
  <span class="token function-variable function">Linear</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>t <span class="token operator">/</span> d<span class="token punctuation">)</span> <span class="token operator">*</span> c <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 指数衰减的反弹缓动</span>
  <span class="token literal-property property">Bounce</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">easeIn</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> c <span class="token operator">-</span> Tween<span class="token punctuation">.</span>Bounce<span class="token punctuation">.</span><span class="token function">easeOut</span><span class="token punctuation">(</span>d <span class="token operator">-</span> t<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">easeOut</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/=</span> d<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">2.75</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> c <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">7.5625</span> <span class="token operator">*</span> t <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token number">2.75</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> c <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">7.5625</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">-=</span> <span class="token number">1.5</span> <span class="token operator">/</span> <span class="token number">2.75</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">+</span> <span class="token number">0.75</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">&lt;</span> <span class="token number">2.5</span> <span class="token operator">/</span> <span class="token number">2.75</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> c <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">7.5625</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">-=</span> <span class="token number">2.25</span> <span class="token operator">/</span> <span class="token number">2.75</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">+</span> <span class="token number">0.9375</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> c <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">7.5625</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">-=</span> <span class="token number">2.625</span> <span class="token operator">/</span> <span class="token number">2.75</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">+</span> <span class="token number">0.984375</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">easeInOut</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">&lt;</span> d <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Tween<span class="token punctuation">.</span>Bounce<span class="token punctuation">.</span><span class="token function">easeIn</span><span class="token punctuation">(</span>t <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> Tween<span class="token punctuation">.</span>Bounce<span class="token punctuation">.</span><span class="token function">easeOut</span><span class="token punctuation">(</span>t <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">-</span> d<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> c <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 二次方的缓动</span>
  <span class="token literal-property property">Quad</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">easeIn</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> c <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">/=</span> d<span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">easeOut</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">-</span>c <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">/=</span> d<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">easeInOut</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/=</span> d <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>c <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">+</span> b<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">-</span>c <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">--</span>t <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 三次方的缓动</span>
  <span class="token literal-property property">Cubic</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">easeIn</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> c <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">/=</span> d<span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">easeOut</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> c <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">=</span> t <span class="token operator">/</span> d <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">easeInOut</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/=</span> d <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>c <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">+</span> b<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>c <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 四次方的缓动</span>
  <span class="token literal-property property">Quart</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">easeIn</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> c <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">/=</span> d<span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">easeOut</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">-</span>c <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">=</span> t <span class="token operator">/</span> d <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">easeInOut</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/=</span> d <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>c <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">+</span> b<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">-</span>c <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 五次方的缓动</span>
  <span class="token literal-property property">Quint</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">easeIn</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> c <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">/=</span> d<span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">easeOut</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> c <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">=</span> t <span class="token operator">/</span> d <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">easeInOut</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/=</span> d <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>c <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">+</span> b<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>c <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">*</span> t <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 正弦曲线的缓动</span>
  <span class="token literal-property property">Sine</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">easeIn</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">-</span>c <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/</span> d<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> c <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">easeOut</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> c <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/</span> d<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">easeInOut</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">-</span>c <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">/</span> d<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 指数曲线的缓动</span>
  <span class="token literal-property property">Expo</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">easeIn</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> t <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> b <span class="token operator">:</span> c <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">/</span> d <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">easeOut</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> t <span class="token operator">==</span> d <span class="token operator">?</span> b <span class="token operator">+</span> c <span class="token operator">:</span> c <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span> <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">/</span> d<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">easeInOut</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> b<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">==</span> d<span class="token punctuation">)</span> <span class="token keyword">return</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/=</span> d <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">(</span>c <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>c <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span> <span class="token operator">*</span> <span class="token operator">--</span>t<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 圆形曲线的缓动</span>
  <span class="token literal-property property">Circ</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">easeIn</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">-</span>c <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token punctuation">(</span>t <span class="token operator">/=</span> d<span class="token punctuation">)</span> <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">easeOut</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> c <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> t <span class="token operator">/</span> d <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">easeInOut</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">/=</span> d <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">-</span>c <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> t <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>c <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token punctuation">(</span>t <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> t<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7、带左右按扭的自动切换轮播效果" tabindex="-1"><a class="header-anchor" href="#_7、带左右按扭的自动切换轮播效果" aria-hidden="true">#</a> 7、带左右按扭的自动切换轮播效果</h3><p><img src="https://www.arryblog.com/assets/img/GIF-2022-10-23-16-49-42.9988a284.gif" alt="GIF 2022-10-23 16-49-42"></p><p><strong>布局代码</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">html,
  body,
  ul,
  li</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">li</span> <span class="token punctuation">{</span>
    <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.container</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 990px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 460px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.container .wrap</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 460px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 10000px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.container .wrap li</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 990px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 460px<span class="token punctuation">;</span>
    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.container .buttons</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.container .buttons span</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0px 5px<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.container .buttons span.active</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.prev,
  .next</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 41px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 69px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./images/icon-slides.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.prev</span> <span class="token punctuation">{</span>
    <span class="token property">background-position</span><span class="token punctuation">:</span> -83px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.next</span> <span class="token punctuation">{</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">background-position</span><span class="token punctuation">:</span> -125px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.prev:hover</span> <span class="token punctuation">{</span>
    <span class="token property">background-position</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.next:hover</span> <span class="token punctuation">{</span>
    <span class="token property">background-position</span><span class="token punctuation">:</span> -42px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 滚动内容区 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/1.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/2.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/3.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/4.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- 分页器 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>buttons<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- 左右按扭 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prev<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>next<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>JS 代码，引用了<code>move.js</code> （前面封装的多属性限时动画）</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./js/move.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// 先获取需要的元素</span>
  <span class="token keyword">var</span> wrap <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.wrap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> list <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;.wrap li&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取li列表</span>
  <span class="token keyword">var</span> spans <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;.buttons span&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.buttons&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> prev <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.prev&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> next <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.next&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 克隆第一个li，作ul了最后一个子元素</span>
  <span class="token keyword">var</span> len <span class="token operator">=</span> spans<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  wrap<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> liWidth <span class="token operator">=</span> list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span> <span class="token comment">// 获取li的宽度</span>
  <span class="token keyword">var</span> currentIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 默认当前切换到的下标是0</span>
  <span class="token keyword">var</span> currentSpan <span class="token operator">=</span> spans<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 用来记录定时器的变量</span>
  <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 表示当前没有元素在切换</span>

  <span class="token comment">// 首先要实现的是自动轮播</span>
  <span class="token function">autoPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">autoPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 开之前，先清</span>
    timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      currentIndex<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
      <span class="token function">toNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 当手指放在按扭上时，要停止自动轮播，离开后，再自动轮播</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    spans<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>index <span class="token operator">=</span> i<span class="token punctuation">;</span>
    spans<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onmouseover</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 暂停自动轮播， 清定时器</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    spans<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onmouseout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">autoPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 自动播放</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 事件代理,所有span按扭点击后，需要处理的事情，全交给他们的父亲 buttons来处理</span>
  button<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span> <span class="token comment">// 整正触发事件的对象</span>
    <span class="token keyword">var</span> tagName <span class="token operator">=</span> target<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>tagName <span class="token operator">!==</span> <span class="token string">&quot;span&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">// 点击对应li的下标</span>
    currentIndex <span class="token operator">=</span> target<span class="token punctuation">.</span>index<span class="token punctuation">;</span>
    currentSpan<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 移除原来</span>
    spans<span class="token punctuation">[</span>currentIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//当前的span新加样式</span>
    currentSpan <span class="token operator">=</span> spans<span class="token punctuation">[</span>currentIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> currentDistance <span class="token operator">=</span> currentIndex <span class="token operator">*</span> liWidth<span class="token punctuation">;</span>
    <span class="token comment">// 切换到对应的那一张图片</span>
    <span class="token function">move</span><span class="token punctuation">(</span>wrap<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token operator">-</span>currentDistance <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 处理向上按扭</span>
  prev<span class="token punctuation">.</span><span class="token function-variable function">onmouseover</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 移到元素上，暂停自动轮播</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  prev<span class="token punctuation">.</span><span class="token function-variable function">onmouseout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 从元素上移开，开始自动轮播</span>
    <span class="token function">autoPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  prev<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// flag=true 表示当前有动画在执行</span>
    flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">// 点击向上按扭处理的事情</span>
    currentIndex<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token function">toPrev</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 处理向下按扭</span>
  next<span class="token punctuation">.</span><span class="token function-variable function">onmouseover</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 移上动，暂停自动轮播</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  next<span class="token punctuation">.</span><span class="token function-variable function">onmouseout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 移开，开始自动轮播</span>
    <span class="token function">autoPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  next<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    currentIndex<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token function">toNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 切换到上一张</span>
  <span class="token keyword">function</span> <span class="token function">toPrev</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentIndex <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 先把当前wrap的left的值，拉回到最后一个li的位置</span>
      wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span>liWidth <span class="token operator">*</span> len <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      currentIndex <span class="token operator">=</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
    <span class="token punctuation">}</span>
    currentSpan<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    currentSpan <span class="token operator">=</span> spans<span class="token punctuation">[</span>currentIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
    currentSpan<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> currentDistance <span class="token operator">=</span> <span class="token operator">-</span>liWidth <span class="token operator">*</span> currentIndex<span class="token punctuation">;</span> <span class="token comment">// 3 * -990</span>
    <span class="token function">move</span><span class="token punctuation">(</span>wrap<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">left</span><span class="token operator">:</span> currentDistance <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 当前动画执行完，flag=false表示没有动画在执行</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 切换到下一张</span>
  <span class="token keyword">function</span> <span class="token function">toNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentIndex <span class="token operator">&gt;=</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      currentSpan<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      spans<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      currentSpan <span class="token operator">=</span> spans<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 要更新当前被选中的span</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 改变span的样式</span>
      currentSpan<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      spans<span class="token punctuation">[</span>currentIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      currentSpan <span class="token operator">=</span> spans<span class="token punctuation">[</span>currentIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> targetDistance <span class="token operator">=</span> <span class="token operator">-</span>currentIndex <span class="token operator">*</span> <span class="token number">990</span><span class="token punctuation">;</span> <span class="token comment">// 需要移动到的目标位置</span>
    <span class="token function">move</span><span class="token punctuation">(</span>wrap<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">left</span><span class="token operator">:</span> targetDistance <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>currentIndex <span class="token operator">&gt;=</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        wrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token string">&quot;0px&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 最后一个动画执行完成之后，拉回 0</span>
        currentIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 当前的currentIndex改成0</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="二、定时器延迟执行与丢帧问题" tabindex="-1"><a class="header-anchor" href="#二、定时器延迟执行与丢帧问题" aria-hidden="true">#</a> 二、定时器延迟执行与丢帧问题</h2><p>要了解定时器为什么会延迟执行和存在丢帧问题，就需要先了解下面 3 个问题</p><ul><li>屏幕刷新频率</li><li>动画实现原理</li><li>setInterval 实现动画原理</li><li>setTimeout 实现动画原理</li><li>动画动画卡顿、抖动现象</li><li>总结：定时器执行动画卡顿、抖动原理</li></ul><h3 id="_1、屏幕刷新频率" tabindex="-1"><a class="header-anchor" href="#_1、屏幕刷新频率" aria-hidden="true">#</a> 1、屏幕刷新频率</h3><p>屏幕刷新频率即图像在屏幕上更新的速度，也即屏幕上的图像每秒钟出现的次数，它的单位是赫兹（Hz）。</p><p>对于一般笔记本电脑，这个频率大概是 60Hz， 可以在桌面上 <strong><code>右键 —显示设置 — 高级显示设置 — 刷新频率</code></strong> 中查看和设置</p><blockquote><p>这个值的设定受屏幕分辨率、屏幕尺寸和显卡的影响，原则上设置成让眼睛看着舒适的值都行。</p></blockquote><p><img src="data:image/png;base64,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" alt="image-20221027225313544"></p><p>常见的显示器有两种</p><p>即 CRT 和 LCD， CRT 就是传统显示器，LCD 就是我们常说的液晶显示器。</p><p>CRT 是一种使用阴极射线管的显示器，屏幕上的图形图像是由一个个因电子束击打而发光的荧光点组成，由于显像管内荧光粉受到电子束击打后发光的时间很短，所以电子束必须不断击打荧光粉使其持续发光，电子束每秒击打荧光粉的次数就是屏幕刷新频率。</p><p>而对于 LCD 来说，则不存在刷新频率的问题，它根本就不需要刷新，因为 LCD 中每个像素都在持续不断地发光，直到不发光的电压改变并被送到控制器中，所以 LCD 不会有电子束击打荧光粉而引起的闪烁现象。</p><blockquote><p>因此，当你对着电脑屏幕什么也不做的情况下，显示器也会以每秒 60 次的频率正在不断的更新屏幕上的图像。为什么你感觉不到这个变化？</p></blockquote><p>那是因为人的眼睛有视觉停留效应，即前一副画面留在大脑的印象还没消失，紧接着后一副画面就跟上来了，这中间只间隔了 <code>16.7ms(1000/60 ≈ 16.7)</code>。</p><p>所以会让你误以为屏幕上的图像是静止不动的，而屏幕给你的这种感觉是对的，试想一下，如果刷新频率变成 1 次/秒，屏幕上的图像就会出现严重的闪烁，这样就很容易引起眼睛疲劳、酸痛和头晕目眩等症状。</p><h3 id="_2、动画实现原理" tabindex="-1"><a class="header-anchor" href="#_2、动画实现原理" aria-hidden="true">#</a> 2、动画实现原理</h3><p>根据上面的原理我们知道，你眼前所看到图像正在以每秒 60 次的频率刷新，由于刷新频率很高，因此你感觉不到它在刷新，而<strong>动画本质就是要让人眼看到图像被刷新而引起变化的视觉效果</strong>，这个变化要以连贯的、平滑的方式进行过渡。</p><blockquote><p>那怎么样才能做到这种效果呢 ?</p></blockquote><p>刷新频率为 60Hz 的屏幕每 16.7ms 刷新一次，我们在屏幕每次刷新前，将图像的位置向左移动一个像素，即 1px，这样一来，屏幕每次刷出来的图像位置都比前一个要差 1px，因此你会看到图像在移动，由于我们人眼的视觉停留效应，当前位置的图像停留在大脑的印象还没消失，紧接着图像又被移到了下一个位置。</p><blockquote><p>因此你才会看到图像在流畅的移动，这就是视觉效果上形成的动画。</p></blockquote><h3 id="_3、setinterval-实现动画原理" tabindex="-1"><a class="header-anchor" href="#_3、setinterval-实现动画原理" aria-hidden="true">#</a> 3、setInterval 实现动画原理</h3><p>setInterval 其实就是通过设置一个间隔时间来不断的改变图像的位置等属性，从而达到动画效果的。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">setInterval</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 每隔10ms 执行下回调函数 f</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>setInterval 执行会出现延迟问题</strong></p><ul><li>setInterval 的执行时间并不是确定的。在 Javascript 中， setInterval 任务被放进了异步队列中，只有当主线程上的任务执行完以后，才会去检查该队列里的任务是否需要开始执行，因此， <strong>setInterval 的实际执行时间一般要比其设定的时间晚一些</strong>。</li><li>setInterval 的第二个参数的延时只能保证何时会把回调函数添加到任务队列，不能保证添加到任务队就会立即执行。能不能执行要看主线程是否空闲，同时前面是否还有任务在等待</li></ul><h3 id="_4、settimeout-实现动画原理" tabindex="-1"><a class="header-anchor" href="#_4、settimeout-实现动画原理" aria-hidden="true">#</a> 4、setTimeout 实现动画原理</h3><p>setTimeout 是通间隔一定时间执行动画回调函数，在回调函数执行完成后，再重新开一个 setTimeout 定时器执行下一次回调，重复上面过程。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* 要执行的动画代码 */</span>
  <span class="token comment">// ....</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注：</p><ul><li>setTimeout 每次是在上一个动画执行完成后，再间隔相同时间，把定时器加入到任务队列等待执行。和 setInterval 一样都会存在延时问题。</li><li>浏览器的计时也会存在不精准的问题，具体内容可参考<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/setTimeout" target="_blank" rel="noopener noreferrer">官方教程(opens new window)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="_5、动画动画卡顿、抖动现象" tabindex="-1"><a class="header-anchor" href="#_5、动画动画卡顿、抖动现象" aria-hidden="true">#</a> 5、动画动画卡顿、抖动现象</h3><ul><li>因为 setInterval 和 setTimeout 会出现执行时间延时问题，再加上刷新频率受屏幕分辨率和屏幕尺寸的影响</li><li>因此不同设备的屏幕刷新频率可能会不同，而 setInterval 只能设置一个固定的时间间隔，这个时间不一定和屏幕的刷新时间相同。</li></ul><blockquote><p>以上两种情况都会导致<strong>动画的执行步调和屏幕的刷新步调不一致</strong>，从而引起<strong>丢帧</strong>现象，造成动画<strong>卡顿、抖动</strong>。</p></blockquote><p><strong>那为什么步调不一致就会引起丢帧呢</strong>？</p><ul><li>首先要明白，setInterval 和 setTimeout 的执行只是在内存中对图像属性进行改变，这个变化必须要等到屏幕下次刷新时才会被更新到屏幕上。</li><li>如果两者的步调不一致，就可能会导致中间某一帧的操作被跨越过去，而直接更新下一帧的图像</li></ul><p><strong>案例分析</strong></p><p>假设屏幕每隔 16.7ms 刷新一次，而 setInterval 每隔 10ms 设置图像向左移动 1px， 就会出现如下</p><p><strong>绘制过程</strong></p><ul><li>1、第<code>0ms</code>屏幕未刷新，等待中，setInterval 也未执行，等待中；</li><li>2、第<code>10ms</code>屏幕未刷新，等待中，setInterval 开始执行并设置图像属性 <code>left = 1px;</code></li><li>3、<strong>第<code>16.7ms</code>屏幕开始刷新，屏幕上的图像向左移动了 1px， setInterval 未执行，继续等待中；</strong></li><li>4、第<code>20ms</code> 屏幕未刷新，等待中，setInterval 开始执行并设置图像属性 <code>left = 2px;</code></li><li>5、 第<code>30ms</code>屏幕未刷新，等待中，setInterval 开始执行并设置图像属性 <code>left = 3px;</code></li><li>6、<strong>第<code>33.4ms</code>屏幕开始刷新，屏幕上的图像向左移动了 3px， setInterval 未执行，继续等待中；</strong></li></ul><p>注：</p><ul><li>从上面的绘制过程中可以看出，屏幕没有更新<code>left = 2px</code>的那一帧画面</li><li>图像直接从<code>1px</code>的位置跳到了<code>3px</code>的的位置</li><li>这就是丢帧现象，这种现象就会引起动画卡顿</li></ul><h3 id="_6、总结-定时器执行动画卡顿、抖动原理" tabindex="-1"><a class="header-anchor" href="#_6、总结-定时器执行动画卡顿、抖动原理" aria-hidden="true">#</a> 6、总结：定时器执行动画卡顿、抖动原理</h3><ul><li>定时器的执行时间并不是一定会按预期时间执行，所以会造成动画延迟执行。</li><li>定时器的执行频率和屏幕的刷新频率不一样，会造成丢帧现象，引起动画卡顿。</li><li>当然还有各个浏览器的计时器精度也程很大差异，不能精确到 1 毫秒内</li></ul><blockquote><p>比如：</p></blockquote><ul><li>Chrome 的计时器精度为 4 毫秒</li><li>Firefox 和 Safari 计时器精度约为 10 毫秒</li><li>.....</li></ul><blockquote><p>为了解决上面定时器存在的问题，出现了一个新的方法 requestAnimationFrame。接下来我们就来学习下这个方法 ！</p></blockquote><h2 id="三、requestanimationframe" tabindex="-1"><a class="header-anchor" href="#三、requestanimationframe" aria-hidden="true">#</a> 三、requestAnimationFrame</h2><p>我们都知道浏览器是知道 CSS3 的 transition 和 animation 动画什么时候开始，并据此计算出正确的时间间隔，到时间就去刷新用户界面。</p><p>但是对于 JS 动画，浏览器并不知道动画什么时候开始，如果我们能让浏览器知道动画什么时候开始，然后开始刷新屏幕。</p><blockquote><p>这样不就出现丢帧问题了吗？</p></blockquote><p><strong>requestAnimationFrame 方法就可以解决这个问题</strong></p><ul><li>requestAnimationFrame 最大的优势是由系统来决定回调函数的执行时机</li><li>具体一点讲，如果屏幕刷新率是<code>60Hz</code>，那么回调函数就每<code>16.7ms</code>被执行一次</li><li>如果刷新率是<code>75Hz</code>，那么这个时间间隔就变成了<code>1000/75 = 13.3ms</code></li><li>换句话说就是，requestAnimationFrame 的步伐跟着系统的刷新步伐走</li><li>它能保证回调函数在屏幕每一次的刷新间隔中只被执行一次，这样就不会引起丢帧现象，也不会导致动画出现卡顿的问题。</li></ul><h3 id="_1、requestanimationframe-用法" tabindex="-1"><a class="header-anchor" href="#_1、requestanimationframe-用法" aria-hidden="true">#</a> 1、requestAnimationFrame 用法</h3><ul><li><code>window.requestAnimationFrame()</code> 告诉浏览器——你希望执行一个动画，并且要求浏览器在下次<strong>重绘</strong>之前调用指定的回调函数更新动画。</li><li>该方法需要传入一个回调函数作为参数，该回调函数会在浏览器下一次<strong>重绘</strong>之前执行</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> timer <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// callback 下一次重绘之前更新动画帧所调用的函数</span>
<span class="token comment">// timer 一个整数，表示请求ID 是回调列表中唯一的标识</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>requestAnimationFrame 方法只会执行一次</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;只执行一次&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、requestanimationframe-实现动画原理" tabindex="-1"><a class="header-anchor" href="#_2、requestanimationframe-实现动画原理" aria-hidden="true">#</a> 2、requestAnimationFrame 实现动画原理</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* 动画执行代码 */</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>条件为真<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、cancelanimationframe" tabindex="-1"><a class="header-anchor" href="#_3、cancelanimationframe" aria-hidden="true">#</a> 3、cancelAnimationFrame</h3><p><code>cancelAnimationFrame</code>方法用来取消<code>requestAnimationFrame</code>方法添加的的任务。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>requestId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// requestId 为 requestAnimationFrame 方法的返回值</span>
<span class="token keyword">var</span> requestId <span class="token operator">=</span> <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第一次执行</span>
<span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>requestId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我不会出来&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4、requestanimationframe-注意事项" tabindex="-1"><a class="header-anchor" href="#_4、requestanimationframe-注意事项" aria-hidden="true">#</a> 4、requestAnimationFrame 注意事项</h3><p>为了提高性能和电池寿命，因此在大多数浏览器里，当<code>requestAnimationFrame()</code> 运行在<strong>后台标签页</strong>或者隐藏的<code>&lt;iframe&gt;</code>里时，<code>requestAnimationFrame()</code> 会被暂停调用以提升性能和电池寿命。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 当前时间</span>
<span class="token keyword">var</span> timer <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  i<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> d2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 记录调用函数时间</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>d2 <span class="token operator">-</span> d <span class="token operator">&lt;=</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果两者是间差小于1s,一直执行，否则打印i</span>
    window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 记录fn调用的次数</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、requestanimationframe-方法实现动画" tabindex="-1"><a class="header-anchor" href="#_5、requestanimationframe-方法实现动画" aria-hidden="true">#</a> 5、requestAnimationFrame 方法实现动画</h3><p><img src="https://www.arryblog.com/assets/img/GIF-2022-10-27-23-51-22.85b99d9f.gif" alt="GIF 2022-10-27 23-51-22"></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.box</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第一次执行</span>
  <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> left <span class="token operator">=</span> box<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">&gt;</span> <span class="token number">600</span><span class="token punctuation">)</span> left <span class="token operator">=</span> <span class="token number">600</span><span class="token punctuation">;</span>
    box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> <span class="token number">600</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 没有有达到目标，再次执行</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6、优雅降级-处理兼容问题" tabindex="-1"><a class="header-anchor" href="#_6、优雅降级-处理兼容问题" aria-hidden="true">#</a> 6、优雅降级 - 处理兼容问题</h3><p>目前所有浏览器都支持<code>requestAnimationFrame</code>这个不带前缀的方法，但考虑有些浏览器的旧版本，还需要添加前缀，所以需要处理下兼容问题。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>requestAnimFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    window<span class="token punctuation">.</span>requestAnimationFrame <span class="token operator">||</span>
    window<span class="token punctuation">.</span>webkitRequestAnimationFrame <span class="token operator">||</span>
    window<span class="token punctuation">.</span>mozRequestAnimationFrame <span class="token operator">||</span>
    window<span class="token punctuation">.</span>oRequestAnimationFrame <span class="token operator">||</span>
    window<span class="token punctuation">.</span>msRequestAnimationFrame <span class="token operator">||</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="四、函数节流-经典面试题" tabindex="-1"><a class="header-anchor" href="#四、函数节流-经典面试题" aria-hidden="true">#</a> 四、函数节流（经典面试题）</h2><p>接下来我们学习一个重要的知识，关于函数的节流问题。如何封装节流函数是我们必需要掌握的技能，也是面试必问的。</p><p><strong>什么是函数节流：</strong></p><p>不管事件触发有多频繁，都会保证在规定时间内执行一次真正的事件处理函数</p><p><strong>函数节流原理：</strong></p><p>通过判断是否到达一定时间，如果 <code>时间 &gt;= 规定时间周期</code>，才会触发函数</p><p><strong>函数节流优点：</strong></p><p>降低函数执行的频率，从而达到节省计算资源，减少性能消耗</p><p>节流函数的应用场景：</p><ul><li>当一个事件触发的时间特别短频繁时，就会频繁的触发事件处理函数，我们需要通过节流函数来限止执行的频率。</li><li>比如：<code>mousemove</code>、<code>mousedown</code>、<code>keydown</code>、<code>scroll</code>等事件，他们的触发时间特别短。我们可以通过节流函数来限止，在一定时间内只能执行一次。</li></ul><blockquote><p>接下来我们以 mousemove 事件来作为切入点，学习下如何对函数节流，以及如何封装节流函数</p></blockquote><h3 id="_1、未节流前-mousemove-事件处理函数的执行次数" tabindex="-1"><a class="header-anchor" href="#_1、未节流前-mousemove-事件处理函数的执行次数" aria-hidden="true">#</a> 1、未节流前，mousemove 事件处理函数的执行次数</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> fn<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.arryblog.com/assets/img/image-20221119153952786.aeb404e0.png" alt="image-20221119153952786"></p><h3 id="_2、对-mousemove-事件处理函数执行节流操作后-其执行次数" tabindex="-1"><a class="header-anchor" href="#_2、对-mousemove-事件处理函数执行节流操作后-其执行次数" aria-hidden="true">#</a> 2、对 mousemove 事件处理函数执行节流操作后，其执行次数</h3><ul><li>接下来我们对 mousemove 事件处理函数执行节流操作，限止其在<code>50ms</code>内只能执行一次</li><li>即 mousemove 事件频敏触发，那事件处理函数也只会每间隔<code>50ms</code>才会执行一次</li></ul><p><strong>节流实现原理</strong></p><ul><li>我们也可以定义一个变量 lock 与定时器配合，变量 lock 相当于一把锁，定时器用来计录时间。</li><li>刚开始变量<code>lock = false</code>，表示锁是打开的，可以执行事件处理函数中代码，在执行时立即设置<code>lock = true</code></li><li><code>lock = true</code>，相当于当前锁是关上的，不管 mousemove 事件触发多少次，都不会做任何操作</li><li>等到定时器时间一到，在定时器中设置<code>lock = false</code>，相当把锁打开，下一次 mousemove 事件触发，则又恢复正常。</li><li>重复上面过程，就可以达到节流效果，相当于事件处理函数在<code>50ms</code>内只会执行一次</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// false表示当前锁是打开的，没有锁，可以执行事件处理函数中的代码</span>
document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> fn<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  lock <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token comment">// 那什么时候开锁内，规定在50ms后，再开锁</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">//开锁</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.arryblog.com/assets/img/image-20221119155731602.1631a8b6.png" alt="image-20221119155731602"></p><p>对以上代码做相关优化</p><ul><li>我们把上面的 lock 变量消除掉，直接用 timer 变量来代替。</li><li>代码中，两处<code>lock = false</code>的地方，用<code>timer = null</code> ; 替换, 表示当前锁是开的, 可以执行事件处理函数</li><li>把<code>if(lock)</code>换成 <code>if(timer)</code> ，如果 timer 有值，表示当前锁是关着的，不能再次执行事件处理函数</li><li>去掉用来保存定时器返回值 timer 变量前面的 var，因为 timer 在上面改成全局中声明</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">//   var lock = false;</span>
<span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// null表示当前锁是打开的，没有锁，可以执行事件处理函数中的代码</span>
document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> fn<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token comment">// lock = true;</span>
  <span class="token comment">// 那什么时候开锁内，规定在50ms后，再开锁</span>
  timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// lock = false;</span>
    timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 开锁</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、抽离节流相关代码-封装成节流函数" tabindex="-1"><a class="header-anchor" href="#_3、抽离节流相关代码-封装成节流函数" aria-hidden="true">#</a> 3、抽离节流相关代码，封装成节流函数</h3><ul><li>上一步中的 <code>console.log(i++)</code> 代码，是事件触发时真正要执行的代码，我们把抽离出来封装在函数<code>eventFn</code>中，在没有节流函数前，<strong>eventFn 为真正的事件处理函数</strong>。</li><li>以上代码的 fn 函数是用来处理节流的函数，也就是我们真正需要封装的节流函数，我们把 fn 改名为<code>throttle</code>，throttle 为节流的意思</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// null表示当前锁是打开的，没有锁，可以执行事件处理函数中的代码</span>
document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> throttle<span class="token punctuation">;</span>

<span class="token comment">// 节流函数</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token comment">// 那什么时候开锁内，规定在50ms后，再开锁</span>
  timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 开锁</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">eventFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 事件处理函数</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">eventFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>以上 throttle 节流函数显然还有很多不足，需要我们来进一步优化</p></blockquote><p>下一步优化点</p><ul><li>timer 这个变量不能放在全局作用域下,要改写到<code>throttle</code>函数内部才算是完美的。</li><li>定时器的时间不能固定，可以改写成参数，让用户自己来决定</li><li>事件处理函数也不能固定死，可以改写成参数，让用户自己来决定</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span>eventFn<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 节流函数</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">20</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// null表示当前锁是打开的，没有锁，可以执行事件处理函数中的代码</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token comment">// 那什么时候开锁内，规定在50ms后，再开锁</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 开锁</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 事件处理函数</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">eventFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再进一步优化，事件处理函数中的 this 和事件对象 e</p><ul><li>以上事件处理函数 fn 中的 this 和 事件对象 e 是有问题的</li><li><code>fn()</code>直接调用，内部 this 肯定指向的是 window，同时事件对象 e 被丢失了</li></ul><p>还有一个问题，就是<code>fn()</code>事件处理函数的位置问题，他是写在定时器前面，还是后面，还是定时器里面呢？</p><ul><li>如果 <code>fn()</code> 写在定时器后面，相对来说没有什么问题，只是定时器会先计时，再执行<code>fn()</code></li><li>如果<code>fn()</code>写在定时器前面，那会先执行事件处理函数，再定时器计时，那最终每次间隔时间比预期的长些，如果<code>fn()</code>执行时间较长，会达不到节流效果。</li><li>如果<code>fn()</code>写在定时器里面，那要等到计时器到达时间后才开始执行<code>fn()</code>，这样就会造成第一次<code>fn()</code>函数要在计时器到达到才执行。（针对高频事件，delay 的时间特别小，这个影响可以忽略不计，但如果 delay 的时间特别长，那这个影响就很明显了，后面用案例演示）</li><li>而我们所说的节流操作主要针对的就是高频时间，即 delay 的时间特别小，所以面试中，各大网站上流行的面试题答案都是基于这个版本的。</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span>eventFn<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 节流函数</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">20</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// null表示当前锁是打开的，没有锁，可以执行事件处理函数中的代码</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// 保存this 绑定事件的对象</span>
    <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span> <span class="token comment">// 保存arguments 主要用来获取事件对象 e</span>
    <span class="token comment">// 定时器计时，用来开锁</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 事件处理函数</span>
      timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 开锁</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">eventFn</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4、es5-版本-节流函数" tabindex="-1"><a class="header-anchor" href="#_4、es5-版本-节流函数" aria-hidden="true">#</a> 4、ES5 版本 - 节流函数</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * throttle 节流函数
 * fn 事件处理函数
 * delay 执行事件处理函数的间隔时间
 */</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">20</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// null表示当前锁是打开的，没有锁，可以执行事件处理函数中的代码</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// 保存this 绑定事件的对象</span>
    <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span> <span class="token comment">// 保存arguments 主要用来获取事件对象 e</span>
    <span class="token comment">// 定时器计时，用来开锁</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 事件处理函数</span>
      timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 开锁</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、es6-版本-节流函数" tabindex="-1"><a class="header-anchor" href="#_5、es6-版本-节流函数" aria-hidden="true">#</a> 5、ES6 版本 - 节流函数</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * throttle 节流函数
 * fn 事件处理函数
 * delay 执行事件处理函数的间隔时间
 */</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">20</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// null表示当前锁是打开的，没有锁，可以执行事件处理函数中的代码</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token comment">// 定时器计时，用来开锁</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 箭头函数没有自己的this和arguments</span>
      timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 开锁</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6、案例-规定时间内只能操作一次" tabindex="-1"><a class="header-anchor" href="#_6、案例-规定时间内只能操作一次" aria-hidden="true">#</a> 6、案例：规定时间内只能操作一次</h3><ul><li>这个案例主要是用来演示上面提到 事件处理函数放在定里器里面与外面的区别</li><li>我们希望点击发送按扭，就执行一次回调函数，然后间隔 1s 后，再次点击发送按扭才会再次执行回调函数。如果<code>下一次点击时间离上一次点击时间 &lt; 1s</code>，就啥也不做。</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>send<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>发送<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> send <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;send&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  send<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 事件处理函数</span>
  <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">20</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// null表示当前锁是打开的，没有锁，可以执行事件处理函数中的代码</span>

    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;请1s后再点击&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 定时器计时，用来开锁</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 开锁</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="五、css3-动画效果开发" tabindex="-1"><a class="header-anchor" href="#五、css3-动画效果开发" aria-hidden="true">#</a> 五、CSS3 动画效果开发</h2><ul><li>在前面我们已经学习了如何利用纯 JS 来实现动画效果，如果实现相对较简单的动画 JS 肯定是没什么问题，但如何遇到相对复杂的动画，用 JS 实现起来还是很麻烦的。</li><li>我们知道，CSS3 的 transition 可以实现过渡动画，animation 可以实现相对复杂的动画。而且 CSS3 动画是浏览器原生支持的，相对而言性能比 JS 实现会更好。</li></ul><blockquote><p>我们可以利用 JS 和 CSS3 来结合，轻松实现各种动画。 接下来就让我们一起来学习吧 ！</p></blockquote><h3 id="_1、js-结合-css3-的-transition-实现动画" tabindex="-1"><a class="header-anchor" href="#_1、js-结合-css3-的-transition-实现动画" aria-hidden="true">#</a> 1、JS 结合 CSS3 的 transition 实现动画</h3><p>我们希望利用 JS 与 CSS3 来实现以下动画效果，我们来看下</p><p><strong>实现的思路</strong></p><ul><li>整个运动过程中，方块的位置、宽、高、透度明都发生了变化</li><li>我们可以给方块添加 transition 过渡属性，让其支持过渡动画</li><li>然后在点击开始动画按扭时，动态添加相应的样式，那方块就会按下面效果动起来。</li></ul><p><img src="https://www.arryblog.com/assets/img/GIF-2022-10-23-23-51-37.60bb753b.gif" alt="GIF 2022-10-23 23-51-37"></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.box</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all 1s ease<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.move</span> <span class="token punctuation">{</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>开始动画<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 用来标识当前元素的位置，true表示左边，false表示右边</span>
    button<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果在左边，是添加move类样式</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        box<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;move&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果在右边，就移除 move类样式</span>
        box<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;move&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、动画的优化" tabindex="-1"><a class="header-anchor" href="#_2、动画的优化" aria-hidden="true">#</a> 2、动画的优化</h3><ul><li>如果用户频繁的点击开始动画按扭，那方块就会在未达到终点状态之间来回切换</li><li>如果我们希望在动画没有到达终点状态之前，不管用户点击多少次，都不会执行再执行新的动画。</li><li>只有动画到达终点状态后，用户再次点击，再会再执行新的动画</li></ul><p>解决方案</p><ul><li>可以用我们之前讲到的节流函数来处理</li><li>也可以用我们接下来讲到的过渡事件来处理</li></ul><p><img src="https://www.arryblog.com/assets/img/GIF-2022-10-24-0-09-43.2c754560.gif" alt="GIF 2022-10-24 0-09-43"></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 用来标识当前元素的位置，true表示左边，false表示右边</span>
  button<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果在左边，是添加move类样式</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      box<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;move&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果在右边，就移除 move类样式</span>
      box<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;move&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 节流函数</span>
  <span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">20</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// null表示当前锁是打开的，没有锁，可以执行事件处理函数中的代码</span>

    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token comment">// 定时器计时，用来开锁</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 开锁</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 箭头函数没有自己的this和arguments</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、过渡事件" tabindex="-1"><a class="header-anchor" href="#_3、过渡事件" aria-hidden="true">#</a> 3、过渡事件</h3><table><thead><tr><th style="text-align:left;">事件</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">transitionstart</td><td style="text-align:left;">该事件在 CSS 过渡实际开始时触发</td></tr><tr><td style="text-align:left;">transitionend</td><td style="text-align:left;">该事件在 CSS 完成过渡后触发。</td></tr><tr><td style="text-align:left;">transitioncancel</td><td style="text-align:left;">该事件在 CSS 过渡动画取消时触发</td></tr><tr><td style="text-align:left;">transitionrun</td><td style="text-align:left;">该事件会在创建过渡动画前触发，即在 transitionstart 前触发</td></tr></tbody></table><blockquote><p>利用 transitionend 事件，实现当过渡动画执行完后，保持其动画执行完后的最终效果，如下：</p></blockquote><p><img src="data:image/gif;base64,R0lGODlhkgGDAAAAACH5BAAyAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAkgGDAKD/////AAAC/4SPqcvtD6OctNqLs968+w+G4kiW5omm6goG7gvH8kzX9o3nNcv3/g8MAnTEovGIDAiXzKbzmUhKp1Qd9IrNaj/Vrre7DYvHZMP3jC6W1+z2Lw2Pz9z0ur0lz8fv/L4foheI9kdY6CeICGa4yLiW+CjVKDmZBWlpRJmpKXTZmbMJGqriSbojeoqKV7r6kur6isEqqwRba+swy3q7y2uWW9obXPsLLGyMSkx6vBya7MkMnencGV3dOH1prV2Ibbn93dcNCU5eJ/5Yns52nqjuPsaO+D6vFS9Ijw9lH5jfz7Svx59AIADzDDzIo6AchAxTKNzTMCKJh3AkWgxBMc3Fjf8dMg7iCDKWxy8hS1YYSdKkSkAoFa18uaClS5g0fcmcUjPnkJs4ddLk2dPnS6CRhA4lisToUaSYlKpkesTpU6hqpJakWtUqSKxEtIbkasUrR7CfxG4ki8PsWbQ21F5k29atRLim5DakS8NuRLxz9DLkK8PvX8AwBCMkXNjwQMStFAtk7MLxY8iS/UGmVRnf5cz5NnOm5/nzu9Ci1ZEuXe40anCqV29r7doa7NjRZtNmZvv2sdy6hfHu3es38F3Ch9sqbhwW8uSuljNHRvn5MufSm0Wv7vs69uDatxPv7v04+PDKx5Nvbv48dMbqb1Fvv+g9fG7p52+Sb/9Q/fyU8PNEv+PffwIOSGCBBh6IYIIKLshggw4+CGGEEk5IYYUWXohhhhpuyGGHHn4IYogijkhiiSaeiGKKKq7IYosuvghjjDLmVwAAIfkEAAoAqwAsaAACAAIAZACg/wAAAAAAAgyEj6nL7Q+jnLTa6woAIfkEAAoAqwAsagACAB0AZACg/wAAAAAAAjiEj6nL7Q+jnLTai7PevPsPhuJIluaJpurKtu4Lx/JM1/aN5/rO9/4PDAqHxKLxiEwql8ym82krAAAh+QQACgCrACyHAAIAJABkAKD/AAAAAAACQISPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s73/g8MCofEovGITCqXzKbzCY1Kp9Sq9YoVFQAAIfkEAAoAqwAsqwACADAAZACg/wAAAAAAAkuEj6nL7Q+jnLTai7PevPsPhuJIluaJpurKtu4Lx/JM1/aN5/rO9/4PDAqHxKLxiEwql8ym8wmNSqfUqvWKzWq33K73Cw6Lx+TyrAAAIfkEAAoAqwAs2wACAB8AZACg/wAAAAAAAjqEj6nL7Q+jnLTai7PevPsPhuJIluaJpurKtu4Lx/JM1/aN5/rO9/4PDAqHxKLxiEwql8ym8wmNSi8FACH5BAAKAKsALPoAAgAVAGQAoP8AAAAAAAIuhI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh0RMAQAh+QQACgCrACwPAQIAEABkAKD/AAAAAAACJ4SPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s4jBQAh+QQACgCrACwfAQIACQBkAKD/AAAAAAACHISPqcvtD6OctNqLs968+w+G4kiW5omm6sq2awEAIfkEAAoAqwAsKAECAAYAZACg/wAAAAAAAheEj6nL7Q+jnLTai7PevPsPhuJIlmZSAAAh+QQAjACrACwuAQIAAgBkAKD/AAAAAAACDISPqcvtD6OctNrrCgA7" alt="GIF 2022-10-27 21-25-38"></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.box</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> width 1s ease<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.box:hover</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;transitionend&quot;</span><span class="token punctuation">,</span> fn<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// alert(&quot;动画结束&quot;);</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">&quot;300px&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 动画结束后，停在目标点</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4、利用-transitionend-事件-优化最开始的双向切换动画" tabindex="-1"><a class="header-anchor" href="#_4、利用-transitionend-事件-优化最开始的双向切换动画" aria-hidden="true">#</a> 4、利用 transitionend 事件，优化最开始的双向切换动画</h3><ul><li>定义一个变量<code>lock = false</code>，表示当前没有动画执行，锁是开的</li><li>当<code>lock = false</code>时，可以执行动画，同时设置 <code>lock = true</code></li><li>然后在 transitionend 事件中，设置<code>lock = false</code>，表示动画结束，开锁</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 用来标识当前元素的位置，true表示左边，false表示右边</span>
  <span class="token keyword">var</span> lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  button<span class="token punctuation">.</span>onclick <span class="token operator">=</span> fn<span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    lock <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">// 如果在左边，是添加move类样式</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      box<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;move&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果在右边，就移除 move类样式</span>
      box<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;move&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//  过流动画结束后，会触发 transitionend 事件</span>
  box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
    <span class="token string">&quot;transitionend&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 开锁</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token boolean">false</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、二级伸缩菜单" tabindex="-1"><a class="header-anchor" href="#_5、二级伸缩菜单" aria-hidden="true">#</a> 5、二级伸缩菜单</h3><p>涉及知识点</p><ul><li>节点操作 nextElementSibling、children</li><li>click 事件，事件委托</li><li>自定义属性</li><li>css3 过渡动画</li><li>节流函数</li></ul><p><img src="https://www.arryblog.com/assets/img/GIF-2022-10-25-22-54-03.dfdde2fa.gif" alt="GIF 2022-10-25 22-54-03"></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">ul,
  li</span> <span class="token punctuation">{</span>
    <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.menu</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.menu .title</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 35px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">text-indent</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 35px<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.menu ul</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token comment">/* display: none; */</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> height 1s ease<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.menu ul li</span> <span class="token punctuation">{</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px dotted #ddd<span class="token punctuation">;</span>
    <span class="token property">text-indent</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.menu ul li a</span> <span class="token punctuation">{</span>
    <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./throttle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>菜单一<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>免费公开课<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>web前端<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>java架构师<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>大数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>菜单二<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>免费公开课<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>web前端<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>菜单三<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>免费公开课<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// 事件委托来处理</span>
  <span class="token comment">// 本来应该由 div.title这些子元素处理的事情，现在全部交给他们的父亲 div.menu来处理</span>
  <span class="token keyword">var</span> menu <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.menu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> title <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;.menu .title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 委托给父元素 menu来处理click事件</span>
  menu<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 事件处理函数</span>
  <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
    <span class="token keyword">var</span> className <span class="token operator">=</span> target<span class="token punctuation">.</span>className<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>className <span class="token operator">!==</span> <span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token comment">// 当前被点击元素的下一个HTML标签类型的兄弟元素</span>
    <span class="token keyword">var</span> nextSibling <span class="token operator">=</span> target<span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">;</span>
    <span class="token comment">// 获取nextSibling里面子元素的高度，然后将所有子元素高度加起来</span>
    <span class="token keyword">var</span> children <span class="token operator">=</span> nextSibling<span class="token punctuation">.</span>children<span class="token punctuation">;</span>
    <span class="token keyword">var</span> height <span class="token operator">=</span> children<span class="token punctuation">.</span>length <span class="token operator">*</span> children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span> <span class="token comment">// 计算ul高度</span>
    <span class="token comment">// 让他显示</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果当前是开，那我就关</span>
      nextSibling<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">&quot;0px&quot;</span><span class="token punctuation">;</span>
      target<span class="token punctuation">.</span>flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 更新为关的状态</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      nextSibling<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> height <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      target<span class="token punctuation">.</span>flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>利用 transitionend 事件来处理</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 事件委托来处理</span>
<span class="token comment">// 本来应该由 div.title这些子元素处理的事情，现在全部交给他们的父亲 div.menu来处理</span>
<span class="token keyword">var</span> menu <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.menu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> title <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;.menu .title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> oUl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;.menu ul&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token comment">// 委托给父元素 menu来处理click事件</span>
menu<span class="token punctuation">.</span>onclick <span class="token operator">=</span> fn<span class="token punctuation">;</span>

<span class="token comment">// 事件处理函数</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  lock <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
  <span class="token keyword">var</span> className <span class="token operator">=</span> target<span class="token punctuation">.</span>className<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>className <span class="token operator">!==</span> <span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token comment">// 当前被点击元素的下一个HTML标签类型的兄弟元素</span>
  <span class="token keyword">var</span> nextSibling <span class="token operator">=</span> target<span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">;</span>
  <span class="token comment">// 获取nextSibling里面子元素的高度，然后将所有子元素高度加起来</span>
  <span class="token keyword">var</span> children <span class="token operator">=</span> nextSibling<span class="token punctuation">.</span>children<span class="token punctuation">;</span>
  <span class="token keyword">var</span> height <span class="token operator">=</span> children<span class="token punctuation">.</span>length <span class="token operator">*</span> children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span> <span class="token comment">// 计算ul高度</span>
  <span class="token comment">// 让他显示</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果当前是开，那我就关</span>
    nextSibling<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">&quot;0px&quot;</span><span class="token punctuation">;</span>
    target<span class="token punctuation">.</span>flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 更新为关的状态</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    nextSibling<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> height <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    target<span class="token punctuation">.</span>flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 每个li身上添加transitionend事件，当动画结束触发了transitionend事件时，开锁</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> oUl<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oUl<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  oUl<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
    <span class="token string">&quot;transitionend&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token boolean">false</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6、动画事件" tabindex="-1"><a class="header-anchor" href="#_6、动画事件" aria-hidden="true">#</a> 6、动画事件</h3><blockquote><p>以下是常见的 CSS3 动画事件</p></blockquote><table><thead><tr><th style="text-align:left;">事件</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">animationend</td><td style="text-align:left;">该事件在 CSS 动画结束播放时触发</td></tr><tr><td style="text-align:left;">animationiteration</td><td style="text-align:left;">该事件在 CSS 动画重复播放时触发</td></tr><tr><td style="text-align:left;">animationstart</td><td style="text-align:left;">该事件在 CSS 动画开始播放时触发</td></tr><tr><td style="text-align:left;">animationcancel</td><td style="text-align:left;">该事件在 CSS 动画意外中止时触发</td></tr></tbody></table><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.box</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>
    <span class="token comment">/* 动画名  动画时间  速度  延时  执行次数 */</span>
    <span class="token property">animation</span><span class="token punctuation">:</span> move 2s ease 2s 3<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token atrule"><span class="token rule">@keyframes</span> move</span> <span class="token punctuation">{</span>
    <span class="token selector">0%</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">50%</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">100%</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;animationstart&quot;</span><span class="token punctuation">,</span> fn1<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;animationend&quot;</span><span class="token punctuation">,</span> fn2<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;animationiteration&quot;</span><span class="token punctuation">,</span> fn3<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;动画开始前执行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;动画开始结束时执行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">fn3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;动画重复执行时执行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.arryblog.com/assets/img/GIF-2022-10-27-22-36-33.53a414b3.gif" alt="GIF 2022-10-27 22-36-33"></p><h3 id="_7、案例-1-js-结合-css3-实现转盘抽奖" tabindex="-1"><a class="header-anchor" href="#_7、案例-1-js-结合-css3-实现转盘抽奖" aria-hidden="true">#</a> 7、案例 1：JS 结合 CSS3 实现转盘抽奖</h3><p>涉及知识点</p><ul><li>抽奖盘布局</li><li>抽奖概率计算原理</li><li>transitionend 事件</li><li>css3 实现缓动动画</li><li>节流锁应用</li><li>其它：权重数组、数组 sort 方法排序、switch 用法、数组的 splice 方法</li></ul><p><img src="https://www.arryblog.com/assets/img/GIF2022-11-1923-53-44.d33b2d06.gif" alt="GIF2022-11-1923-53-44"></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">html,
  body</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">body</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.luck-draw</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 320px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 320px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> tomato<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.luck-draw .luck-panel</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>22.5deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all 3s <span class="token function">cubic-bezier</span><span class="token punctuation">(</span>0.14<span class="token punctuation">,</span> 0.66<span class="token punctuation">,</span> 0.77<span class="token punctuation">,</span> 0.98<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/* .luck-draw .luck-panel:hover {
    transform: rotate(1800deg);
    } */</span>
  <span class="token selector">.luck-panel .panel-left</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #ddd<span class="token punctuation">;</span>
    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.luck-panel .panel-right</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #ddd<span class="token punctuation">;</span>
    <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/* 每一个抽奖格子的实现 */</span>
  <span class="token selector">.panel-left .prize-item,
  .panel-right .prize-item</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.panel-left .prize-item</span> <span class="token punctuation">{</span>
    <span class="token property">transform-origin</span><span class="token punctuation">:</span> right center<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.panel-left .prize-item:nth-child(1)</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>243<span class="token punctuation">,</span> 136<span class="token punctuation">,</span> 154<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.panel-left .prize-item:nth-child(2)</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 229<span class="token punctuation">,</span> 136<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.panel-left .prize-item:nth-child(3)</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>168<span class="token punctuation">,</span> 231<span class="token punctuation">,</span> 250<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-90deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.panel-left .prize-item:nth-child(4)</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>191<span class="token punctuation">,</span> 245<span class="token punctuation">,</span> 209<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-135deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/* 把span 中的文字移出来*/</span>
  <span class="token selector">.panel-left .prize-item span</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-22.5deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.panel-right .prize-item</span> <span class="token punctuation">{</span>
    <span class="token property">transform-origin</span><span class="token punctuation">:</span> left center<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.panel-right .prize-item:nth-child(1)</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>245<span class="token punctuation">,</span> 196<span class="token punctuation">,</span> 90<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.panel-right .prize-item:nth-child(2)</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 229<span class="token punctuation">,</span> 136<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.panel-right .prize-item:nth-child(3)</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>168<span class="token punctuation">,</span> 231<span class="token punctuation">,</span> 250<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-90deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.panel-right .prize-item:nth-child(4)</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-135deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.panel-right .prize-item span</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>160deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.luck-draw .draw-button</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> tomato<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
    <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.draw-button::after</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 20px solid transparent<span class="token punctuation">;</span>
    <span class="token property">border-left</span><span class="token punctuation">:</span> 10px solid transparent<span class="token punctuation">;</span>
    <span class="token property">border-right</span><span class="token punctuation">:</span> 10px solid transparent<span class="token punctuation">;</span>
    <span class="token property">border-bottom-color</span><span class="token punctuation">:</span> tomato<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> -35px<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 转盘布局开始 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>luck-draw<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>luck-panel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>panel-left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prize-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>10个积分<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prize-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>10元红包<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prize-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>免单50元<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prize-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>免单100元<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>panel-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prize-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>保温杯一个<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prize-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>电饭煲一台<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prize-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>手机一部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prize-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>未中奖喽!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 抽奖按扭 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>draw-button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>抽奖<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 转盘布局结束--&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>JavaScript 实现思路</strong></p><ul><li>第一步</li></ul><p>动态添加抽奖礼品数据到页面，抽奖礼品保存在以下数组中</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> prizes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;手机一部&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;电饭煲一台&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;保温杯一个&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;免单50元&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;免单100元&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;10元红包&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;10个积分&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;未中奖喽!&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>第二步</li></ul><p>随机抽奖，需要通过随机函数，生成 0-数组长度-1 之间的整数，通过这个随机数来确定对应的中奖奖品</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> prizesLength <span class="token operator">=</span> prizes<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token keyword">var</span> _index <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> prizesLength<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>第三步</li></ul><p>根据抽中的奖项，来确定转盘旋转的角度，计算公式如下</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> deg <span class="token operator">=</span> _index <span class="token operator">*</span> <span class="token number">45</span> <span class="token operator">+</span> <span class="token number">22.5</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>第四步</li></ul><p>我们希望每次抽奖，转盘能在现有角度上再旋转 5 圈，然后到达指定角度</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 相当于累加器</span>
sum <span class="token operator">+=</span> <span class="token number">1800</span><span class="token punctuation">;</span>
deg <span class="token operator">=</span> sum <span class="token operator">+</span> deg<span class="token punctuation">;</span>
luckpanel<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">&quot;rotate(&quot;</span> <span class="token operator">+</span> deg <span class="token operator">+</span> <span class="token string">&quot;deg)&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>第五步</li></ul><p>控制抽奖概率</p><ul><li>设置权重数组，然后随机生成 0-99 之间的整数，把生成的数插入到权重数组中，然后升序排序。</li><li>查询随机数在权重数组中的下标，根据对应的下标来决定中的是那个奖项。</li><li>最后把随机从权重数组中删除，不能破坏了权重数组</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 权重数组</span>
<span class="token keyword">var</span> weight <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 随机生成 0-99 之间的整数。</span>
<span class="token keyword">var</span> random <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">// 把生成的随机数添加到数组中</span>
weight<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>random<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 对数组进行升序排序</span>
weight<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 找到随机生成的数，在数组中的下标</span>
<span class="token keyword">var</span> _index <span class="token operator">=</span> weight<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>random<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 删除随机生成的数，不能影到我的权重数组</span>
weight<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>_index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>第六步</li></ul><p>防止用户频繁点击按扭。在上一次抽奖没有结束前，不能再次抽奖</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 开锁 目前没有抽奖</span>
<span class="token comment">// 点击抽奖</span>
drawButton<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  lock <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 关锁 正在抽奖</span>

  <span class="token comment">// ....</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 动画结束后 开锁</span>
luckpanel<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">&quot;transitionend&quot;</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token comment">//   alert(&quot;恭喜你中了&quot; + drawText);</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>完整版</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// 动态添加抽奖礼品数据到页面中</span>
  <span class="token keyword">var</span> prizes <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;手机一部&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;电饭煲一台&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;保温杯一个&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;免单50元&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;免单100元&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;10元红包&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;10个积分&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;未中奖喽!&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">// 权重数组</span>
  <span class="token keyword">var</span> weight <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">// 获取页面中的span</span>
  <span class="token keyword">var</span> spans <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;.luck-panel .prize-item span&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> spansLength <span class="token operator">=</span> spans<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token comment">// 动态填充内容</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> spansLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    spans<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> prizes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 第二步，点击抽奖按扭，开始抽奖</span>
  <span class="token keyword">var</span> drawButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.draw-button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> luckpanel <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.luck-panel&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> prizesLenght <span class="token operator">=</span> prizes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// 数组长度</span>
  <span class="token keyword">var</span> drawText <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 当前没有抽奖 转盘没有转动</span>

  <span class="token comment">// 点击抽奖</span>
  drawButton<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    lock <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 正在抽奖</span>
    <span class="token comment">// var _index = (Math.random() * prizesLenght) &gt;&gt; 0;</span>
    <span class="token comment">// 控制抽奖概率</span>
    <span class="token keyword">var</span> random <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// 把生成的随机数添加到数组中</span>
    weight<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>random<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 对数组进行升序排序</span>
    weight<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 找到随机生成的数，在数组中的下标</span>
    <span class="token keyword">var</span> _index <span class="token operator">=</span> weight<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>random<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 删除随机生成的数，不能影到我的权重数组</span>
    weight<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>_index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    drawText <span class="token operator">=</span> prizes<span class="token punctuation">[</span>_index<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 抽中了对应的奖项后，转盘要转动到对应位置</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>_index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>
        <span class="token function">draw</span><span class="token punctuation">(</span><span class="token number">22.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
        <span class="token function">draw</span><span class="token punctuation">(</span><span class="token number">67.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
        <span class="token function">draw</span><span class="token punctuation">(</span><span class="token number">112.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
        <span class="token function">draw</span><span class="token punctuation">(</span><span class="token number">175.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>
        <span class="token function">draw</span><span class="token punctuation">(</span><span class="token number">202.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">:</span>
        <span class="token function">draw</span><span class="token punctuation">(</span><span class="token number">247.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token number">6</span><span class="token operator">:</span>
        <span class="token function">draw</span><span class="token punctuation">(</span><span class="token number">292.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token number">7</span><span class="token operator">:</span>
        <span class="token function">draw</span><span class="token punctuation">(</span><span class="token number">337.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 转盘转动</span>
  <span class="token keyword">var</span> draw <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 累加器</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">deg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      sum <span class="token operator">+=</span> <span class="token number">1800</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> deg <span class="token operator">=</span> deg <span class="token operator">+</span> sum<span class="token punctuation">;</span>
      luckpanel<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">&quot;rotate(&quot;</span> <span class="token operator">+</span> deg <span class="token operator">+</span> <span class="token string">&quot;deg)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 动画结束后 开锁</span>
  luckpanel<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
    <span class="token string">&quot;transitionend&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token comment">//   alert(&quot;恭喜你中了&quot; + drawText);</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token boolean">false</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8、案例-2-js-结合-css3-实现红包雨" tabindex="-1"><a class="header-anchor" href="#_8、案例-2-js-结合-css3-实现红包雨" aria-hidden="true">#</a> 8、案例 2：JS 结合 CSS3 实现红包雨</h3><p>涉及知识点</p><ul><li>animation 动画</li><li>animationend 事件</li><li>事件委托</li><li>JavaScript 面向对象</li><li>构造函数与实例</li></ul><p><img src="https://www.arryblog.com/assets/img/GIF-2022-10-30-2-32-35.6407feee.gif" alt="GIF 2022-10-30 2-32-35"></p><h3 id="_8-1、布局实现思路" tabindex="-1"><a class="header-anchor" href="#_8-1、布局实现思路" aria-hidden="true">#</a> 8.1、布局实现思路</h3><ul><li>页面背景设置黑色，同时设置超出部分显示隐藏</li></ul><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span> <span class="token comment">/* 超出部分显示隐藏 */</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>创建一个小红包（因为每个红包旋转角度不一样，则红包旋转的角度用 JS 来设置）</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token comment">&lt;!-- 红包 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>red-packet animation-drop<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
.red-packet {
  width: 120px;
  height: 168px;
  background: url(&quot;./images/redPacket.png&quot;) no-repeat;
  background-size: cover;
  cursor: pointer;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>利用 animation 动画实现小红包从上往下掉落效果 （每个红包掉落的时间不一样，用 JS 来实现）</li></ul><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token comment">/* 匀速下落动画 */</span>
<span class="token selector">.animation-drop</span> <span class="token punctuation">{</span>
  <span class="token comment">/* 动画运动时间，不同的红包是不一样的 */</span>
  <span class="token comment">/* animation: drop 5s ease forwards; */</span>
  <span class="token property">animation-name</span><span class="token punctuation">:</span> drop<span class="token punctuation">;</span> <span class="token comment">/* 动画名字 */</span>
  <span class="token comment">/* animation-duration: 5s; 动画运动时间 */</span>
  <span class="token property">animation-timing-function</span><span class="token punctuation">:</span> ease<span class="token punctuation">;</span> <span class="token comment">/* 运动的速度 */</span>
  <span class="token property">animation-fill-mode</span><span class="token punctuation">:</span> forwards<span class="token punctuation">;</span> <span class="token comment">/* 运动结束后的状态 */</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@keyframes</span> drop</span> <span class="token punctuation">{</span>
  <span class="token selector">0%</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">20%</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">100%</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 1200px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>布局红包中奖后的显示效果，包括关闭按扭，红包金额</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token comment">&lt;!-- 中奖效果 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show-red-packet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>X<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>money<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>1.67元<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
/* 中奖显示效果 */
.show-red-packet {
  width: 400px;
  height: 579px;
  background-image: url(&quot;./images/redPacket2.png&quot;);
  background-size: cover;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 3;
}

/* 关闭按扭 */
.show-red-packet .close {
  display: block;
  content: &quot;&quot;;
  width: 50px;
  height: 50px;
  position: absolute;
  top: 0;
  right: -50px;
  background-color: #fff;
  border-radius: 50%;
  cursor: pointer;
  color: #333;
  text-align: center;
  line-height: 50px;
  font-size: 30px;
}

/* 中奖后，显示金额样式 */
.show-red-packet .money {
  width: 100%;
  height: 50px;
  font-size: 50px;
  color: #fff;
  text-align: center;
  position: absolute;
  bottom: 150px;
  display: block;
  user-select: none;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>黑色半透明遮罩层 (刚开始是隐藏的)</li></ul><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token comment">/* 黑色半透明遮罩层 */</span>
<span class="token selector">.mask</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.7<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span> <span class="token comment">/* 要比show-red-packet的z-index小 */</span>
  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>完整的 html 布局结构和样式</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">body,
  html</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">body</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.red-packet</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 168px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&quot;./images/redPacket.png&quot;</span><span class="token punctuation">)</span></span> no-repeat<span class="token punctuation">;</span>
    <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.animation-drop</span> <span class="token punctuation">{</span>
    <span class="token comment">/* animation-duration: 5s; */</span>
    <span class="token property">animation-name</span><span class="token punctuation">:</span> drop<span class="token punctuation">;</span> <span class="token comment">/* 动画名 */</span>
    <span class="token property">animation-timing-function</span><span class="token punctuation">:</span> ease<span class="token punctuation">;</span> <span class="token comment">/* 运动速度 */</span>
    <span class="token property">animation-fill-mode</span><span class="token punctuation">:</span> forwards<span class="token punctuation">;</span> <span class="token comment">/* 运动结束后状态 */</span>
  <span class="token punctuation">}</span>
  <span class="token atrule"><span class="token rule">@keyframes</span> drop</span> <span class="token punctuation">{</span>
    <span class="token selector">0%</span> <span class="token punctuation">{</span>
      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">20%</span> <span class="token punctuation">{</span>
      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">100%</span> <span class="token punctuation">{</span>
      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token property">top</span><span class="token punctuation">:</span> 1200px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/* 中奖显示效果 */</span>
  <span class="token selector">.show-red-packet</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 579px<span class="token punctuation">;</span>
    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&quot;./images/redPacket2.png&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>
    <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">z-index</span><span class="token punctuation">:</span> 3<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/* 关闭按扭 */</span>
  <span class="token selector">.show-red-packet .close</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> -50px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/* 中奖后，显示金额样式 */</span>
  <span class="token selector">.show-red-packet .money</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/* 黑色半透明遮罩层 */</span>
  <span class="token selector">.mask</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.7<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">z-index</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.container</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>J_redpacket<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 红包 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>red-packet animation-drop<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 中奖显示效果 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show-red-packet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>money<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>2.85元<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>X<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 黑色半透明的遮罩层 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mask<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-2、js-实现思路" tabindex="-1"><a class="header-anchor" href="#_8-2、js-实现思路" aria-hidden="true">#</a> 8.2、JS 实现思路</h3><ul><li>创建一个红包类，这个红包类有以下属性和方法</li></ul><table><thead><tr><th style="text-align:left;">属性</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">width</td><td style="text-align:left;">红包宽 ，如果不传，用默认值 120</td></tr><tr><td style="text-align:left;">height</td><td style="text-align:left;">红包高，如果不传，用默认值 168</td></tr><tr><td style="text-align:left;">x</td><td style="text-align:left;">水平方向坐标 （随机生成） （最大值不能大于浏览器宽 - 元素宽）</td></tr><tr><td style="text-align:left;">y</td><td style="text-align:left;">垂直方向坐标 (随机生成) （最开始元素在浏览器外面，即 top=- 元素自身高）</td></tr><tr><td style="text-align:left;">money</td><td style="text-align:left;">红包金额大小（钱）</td></tr><tr><td style="text-align:left;">rotate</td><td style="text-align:left;">旋转的角度 （-45deg 到 45deg ）之间</td></tr><tr><td style="text-align:left;">duration</td><td style="text-align:left;">运动时间 3-7s 秒之间</td></tr><tr><td style="text-align:left;">dom</td><td style="text-align:left;">红包的 dom 结构</td></tr></tbody></table><table><thead><tr><th style="text-align:left;">实例方法</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">init</td><td style="text-align:left;">用于在页面初始化一个红包</td></tr><tr><td style="text-align:left;">drop</td><td style="text-align:left;">让红包运动起来,从上往下掉落</td></tr></tbody></table><table><thead><tr><th style="text-align:left;">静态方法</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">showRedPacket</td><td style="text-align:left;">显示红包中奖状态</td></tr><tr><td style="text-align:left;">hideRedPacket</td><td style="text-align:left;">隐藏红包中奖状态</td></tr><tr><td style="text-align:left;">sendRedPacket</td><td style="text-align:left;">用来发放红包</td></tr></tbody></table><ul><li>随机生在<code>[a ,b]</code>之间的整数</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>b <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> a<span class="token punctuation">)</span> <span class="token operator">+</span> a<span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * RedPacket 红包类
 * width 红包宽
 * height 红包高
 * <span class="token keyword">@param</span> <span class="token parameter">x</span> 红包x坐标
 * <span class="token keyword">@param</span> <span class="token parameter">y</span> 红包 y 坐标
 * <span class="token keyword">@param</span> <span class="token parameter">money</span> 红包金额
 */</span>
<span class="token keyword">function</span> <span class="token function">RedPacket</span><span class="token punctuation">(</span><span class="token parameter">money <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> rotate<span class="token punctuation">,</span> width <span class="token operator">=</span> <span class="token number">120</span><span class="token punctuation">,</span> height <span class="token operator">=</span> <span class="token number">168</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 钱、宽、高都不能小于0的</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>money <span class="token operator">=</span> money <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> money<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> width<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> height<span class="token punctuation">;</span>

  <span class="token comment">// x 如果用户传了，就用用户传的，没有传，就自动随机生成</span>
  <span class="token comment">// [30, 浏览器的宽度 - 红包的宽度];</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">that</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span>
    <span class="token keyword">var</span> maxLeft <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth <span class="token operator">-</span> that<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>maxLeft <span class="token operator">-</span> <span class="token number">30</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 用户传了就用传的，没传就赋默认值为 -元素高度</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">that</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token keyword">return</span> y<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">-</span>that<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 处理旋转的角度,如果传了就用传的， 如果没传，就随机生成 [-45 ,45] 之间整数</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>rotate <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>rotate <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>rotate<span class="token punctuation">)</span> <span class="token keyword">return</span> rotate<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">91</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">45</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 运动时间，随机生成 [3，7]之间随机整数</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>duration <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">5</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调一下初始化方法</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>init 方法，实现创建红包，同时添加到页面，红包创建完就会添加到页面</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 初始化红包</span>
<span class="token class-name">RedPacket</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&quot;red-packet&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// 旋转角度</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">&quot;rotate(&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rotate <span class="token operator">+</span> <span class="token string">&quot;deg)&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// 把this保存他对应dom的that属性上，供后面使用</span>
  <span class="token comment">// 上树，添加到我们的页面当中去</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>parent <span class="token operator">=</span> redPacketParent<span class="token punctuation">;</span> <span class="token comment">// 可保存，可不保存，看后续需求</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>move 方法，调用 move 方法，红包就可以运动，同时运动结束后，会将自己的 dom 元素从页面删除</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// drop 让红包运动起来</span>
<span class="token class-name">RedPacket</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">drop</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// this 红包实例</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;animation-drop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 给他添加运动时间</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>animationDuration <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>duration <span class="token operator">+</span> <span class="token string">&quot;s&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// 性能优化，如果动画结束，就从dom中移出自身</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
    <span class="token string">&quot;animationend&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//把自身从dom树中移除</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token boolean">false</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>在页面中创建 100 个 0-5 之间的随机数，作为红包的金额</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> moneyArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建一个0-5块钱之内的随机数，用来作为红包的金额</span>
  <span class="token keyword">var</span> random <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  moneyArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>random<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>定义一个静态方法，用来实现发红包效果</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>RedPacket<span class="token punctuation">.</span><span class="token function-variable function">sendRedPacket</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;data不是一个数组，请传一个数组&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 随机发红包了,过100ms发一个红包出来</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> redPacket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedPacket</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    redPacket<span class="token punctuation">.</span><span class="token function">drop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 如果数组的长度为0,说明红包发完了</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>添加事件委托，把红包的点击事件委托给他的父元素来操作</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> domShowRedPacket <span class="token operator">=</span> redPacketParent<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.show-red-packet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> domMoney <span class="token operator">=</span> redPacketParent<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.money&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> domClose <span class="token operator">=</span> redPacketParent<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.close&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> domMask <span class="token operator">=</span> redPacketParent<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.mask&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
RedPacket<span class="token punctuation">.</span>flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 表示已添加事件委托</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>RedPacket<span class="token punctuation">.</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  RedPacket<span class="token punctuation">.</span>flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token comment">// 事件委托 来处理红包被点击后中奖效果</span>
  redPacketParent<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
    <span class="token keyword">var</span> bool <span class="token operator">=</span> target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;red-packet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>bool<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    RedPacket<span class="token punctuation">.</span><span class="token function">showRedPacket</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>that<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 关闭中奖</span>
  domClose<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    RedPacket<span class="token punctuation">.</span><span class="token function">hideRedPacket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-3、完整源代码" tabindex="-1"><a class="header-anchor" href="#_8-3、完整源代码" aria-hidden="true">#</a> 8.3、完整源代码</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">html,
  body</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">body</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.red-packet</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 168px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&quot;./images/redPacket.png&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>
    <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
    <span class="token comment">/* 红包旋转角度，后期通过js实现 */</span>
    <span class="token comment">/* transform: rotate(20deg); */</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> -168px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.animation-drop</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 动画运动时间，不同的红包是不一样的 */</span>
    <span class="token comment">/* animation: drop 5s ease forwards; */</span>
    <span class="token property">animation-name</span><span class="token punctuation">:</span> drop<span class="token punctuation">;</span> <span class="token comment">/* 动画名字 */</span>
    <span class="token comment">/* animation-duration: 5s; 动画运动时间 */</span>
    <span class="token property">animation-timing-function</span><span class="token punctuation">:</span> ease<span class="token punctuation">;</span> <span class="token comment">/* 运动的速度 */</span>
    <span class="token property">animation-fill-mode</span><span class="token punctuation">:</span> forwards<span class="token punctuation">;</span> <span class="token comment">/* 运动结束后的状态 */</span>
  <span class="token punctuation">}</span>
  <span class="token atrule"><span class="token rule">@keyframes</span> drop</span> <span class="token punctuation">{</span>
    <span class="token selector">0%</span> <span class="token punctuation">{</span>
      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">20%</span> <span class="token punctuation">{</span>
      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">100%</span> <span class="token punctuation">{</span>
      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token property">top</span><span class="token punctuation">:</span> 1200px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/* 中奖显示效果 */</span>
  <span class="token selector">.show-red-packet</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 579px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./images/redPacket2.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
    <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">z-index</span><span class="token punctuation">:</span> 3<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.show-red-packet .money</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 140px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.show-red-packet .close</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> -10px<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> -60px<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.mask</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.7<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">z-index</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>J_redpacket<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 红包 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>red-packet animation-drop<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 中奖显示效果 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show-red-packet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>money<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>2.85元<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>X<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 黑色半透明的遮罩层 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mask<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> RedPacket <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * RedPacket 构造函数，相当于类
     * money 金额大小
     * x 水平坐标
     * y 垂直坐标
     * rotate 旋转角度
     * width 红包的宽
     * height 红包的高
     */</span>
    <span class="token keyword">var</span> redPacketParent <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_redpacket&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> domShowRedPacket <span class="token operator">=</span> redPacketParent<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.show-red-packet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> domMoney <span class="token operator">=</span> redPacketParent<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.money&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> domClose <span class="token operator">=</span> redPacketParent<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.close&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> domMask <span class="token operator">=</span> redPacketParent<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.mask&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">RedPacket</span><span class="token punctuation">(</span><span class="token parameter">money <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> rotate<span class="token punctuation">,</span> width <span class="token operator">=</span> <span class="token number">120</span><span class="token punctuation">,</span> height <span class="token operator">=</span> <span class="token number">168</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>money <span class="token operator">=</span> money <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> money<span class="token punctuation">;</span> <span class="token comment">// 钱的金额是不能小于0的</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> width<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> height<span class="token punctuation">;</span>
      <span class="token comment">// x 如果用户传了，就用用户传的，没有传，就自动随机生成</span>
      <span class="token comment">// [30, 浏览器的宽度 - 红包的宽度];</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">that</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span>
        <span class="token keyword">var</span> maxLeft <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth <span class="token operator">-</span> that<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>maxLeft <span class="token operator">-</span> <span class="token number">30</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 用户传了就用传的，没传就赋默认值为 -元素高度</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">that</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token keyword">return</span> y<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">-</span>that<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 处理旋转的角度  如果没传，就随机生成，如果传了就用传的  -45deg  45deg [-45 ,45]</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>rotate <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>rotate <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>rotate<span class="token punctuation">)</span> <span class="token keyword">return</span> rotate<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">91</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">45</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 运动时间 [3，7]</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>duration <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">5</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 调一下初始化方法</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>RedPacket<span class="token punctuation">.</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        RedPacket<span class="token punctuation">.</span>flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment">// 事件委托</span>
        redPacketParent<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
          <span class="token keyword">var</span> bool <span class="token operator">=</span> target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;red-packet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>bool<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
          RedPacket<span class="token punctuation">.</span><span class="token function">showRedPacket</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>that<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token comment">// 关闭中奖</span>
        domClose<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          RedPacket<span class="token punctuation">.</span><span class="token function">hideRedPacket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    RedPacket<span class="token punctuation">.</span>flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 表示添加事件委托</span>
    <span class="token comment">// 静态方法</span>
    RedPacket<span class="token punctuation">.</span><span class="token function-variable function">showRedPacket</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">that</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      domShowRedPacket<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;block&quot;</span><span class="token punctuation">;</span>
      domMask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;block&quot;</span><span class="token punctuation">;</span>
      domMoney<span class="token punctuation">.</span>innerText <span class="token operator">=</span> that<span class="token punctuation">.</span>money<span class="token punctuation">;</span> <span class="token comment">// that表示当前点击的那个红包的实例对象</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 用来隐藏红包</span>
    RedPacket<span class="token punctuation">.</span><span class="token function-variable function">hideRedPacket</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      domShowRedPacket<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>
      domMask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    RedPacket<span class="token punctuation">.</span><span class="token function-variable function">sendRedPacket</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;data不是一个数组，请传一个数组&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 随机发红包了,过100ms发一个红包出来</span>
      <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> redPacket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedPacket</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redPacket<span class="token punctuation">.</span><span class="token function">drop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 如果数组的长度为0,说明红包发完了</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 初始化红包</span>
    <span class="token class-name">RedPacket</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&quot;red-packet&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      <span class="token comment">// 旋转角度</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">&quot;rotate(&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rotate <span class="token operator">+</span> <span class="token string">&quot;deg)&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// 把this保存他对应dom的that属性上，供后面使用</span>
      <span class="token comment">// 上树，添加到我们的页面当中去</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>parent <span class="token operator">=</span> redPacketParent<span class="token punctuation">;</span> <span class="token comment">// 可保存，可不保存，看后续需求</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// drop 让红包运动起来</span>
    <span class="token class-name">RedPacket</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">drop</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// this 红包实例</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;animation-drop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 给他添加运动时间</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>animationDuration <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>duration <span class="token operator">+</span> <span class="token string">&quot;s&quot;</span><span class="token punctuation">;</span>
      <span class="token comment">// 性能优化，如果动画结束，就从dom中移出自身</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
        <span class="token string">&quot;animationend&quot;</span><span class="token punctuation">,</span>
        <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">//把自身从dom树中移除</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token boolean">false</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> RedPacket<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 页面中创建100个 0-5之间的随机数，作为红包的金额</span>
  <span class="token keyword">var</span> moneyArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建一个0-5块钱之内的随机数，用来作为红包的金额</span>
    <span class="token keyword">var</span> random <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    moneyArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>random<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  RedPacket<span class="token punctuation">.</span><span class="token function">sendRedPacket</span><span class="token punctuation">(</span>moneyArr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 发放红包</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="六、js-实现拖拽动画" tabindex="-1"><a class="header-anchor" href="#六、js-实现拖拽动画" aria-hidden="true">#</a> 六、JS 实现拖拽动画</h2><p>结合本章节所学内容实现拖拽动画综合实践应用。</p><h3 id="_1、案例-1-拖拽动画" tabindex="-1"><a class="header-anchor" href="#_1、案例-1-拖拽动画" aria-hidden="true">#</a> 1、案例 1：拖拽动画</h3><p>要求拖拽的小方块只能在父元素的区域内移动</p><p><strong>涉及知识点</strong></p><ul><li>事件对象（鼠标位置、阻止默认行为）</li><li>onmousedown、onmousemove、onmouseup 事件</li><li>offsetWidth、offsetHeight、 clientWidth、clientHeight</li><li>拖拽动画实现原理</li></ul><p><img src="https://www.arryblog.com/assets/img/GIF-2022-10-13-20-36-30.d31ee09e.gif" alt="GIF 2022-10-13 20-36-30"></p><ul><li>拖拽动画的实现原理，我们通过下面这个图来分析</li><li>container 为拖拽小方块的定位父元素，小方块在被拖拽时，不能超出 container 区域。</li></ul><p><img src="https://www.arryblog.com/assets/img/image-20221013202829968.e89506a5.png" alt="image-20221013202829968"></p><p>实现步骤：</p><p>在鼠标按下时,即 onmousedown 事件</p><ul><li>记录鼠标按下时与浏览器可视区左边和上边距离，即 <code>e.clientX</code> 和 <code>e.clientY</code></li><li>同时记录被拖拽元素与定义父元素左边的距离，即 <code>drag.offsetLeft</code> 和 <code>drag.offsetTop</code></li></ul><p>在鼠标标移动时，即 onmousemove 事件</p><ul><li>记录鼠标此时与浏览器可视区左边和上边距离，即 <code>e.clientX</code> 和 <code>e.clientY</code></li><li>用 <strong><code>当前的 e.clientX - 鼠标按下时e.clientX</code></strong> ，得到鼠标在水平移动的距离，然后用这个距离加上移动前元素的 offsetLeft，就得到了此时被拖拽元素的 left 值。同得理得 top 值</li></ul><p>还要添加 onmouseup 事件，在鼠标抬起时，要解绑 onmousemove 和 onmouseup 事件</p><blockquote><p>以上步骤实现了元素可以自由的被拖拽，但是并不能控制元素只能在定位父元素容器中移动</p></blockquote><p>控制被拖拽元素移动时不能超出父容器，我们只需要控制被拖拽元素的 left 和 top 值的大小</p><ul><li>如果 <code>left &lt; 0</code>，表示超出了父容器左边界，此时设置 left=0，强行拉回</li><li>如果 <code>left &gt; 父容器宽 - 元素宽</code> ，表示超出了父容器右边界，此时设置 <code>left = 父容器宽 - 元素宽</code> ,强行拉回</li><li>如果 <code>top &lt; 0</code>，表示超出了父容器上边界，此时设置 <code>top = 0</code>，强行拉回</li><li>如果 <code>top &gt; 父容器高 - 元素高</code> ，表示超出了父容器下边界，此时设置 <code>top = 父容器宽 - 元素宽</code> ,强行拉回</li></ul><blockquote><p>以上步骤，实现了控制元素只能在父容器中移动</p></blockquote><ul><li>兼容性处理：如果被拖拽的元素是一个图片，或元素中有文字，被拖拽时就会出现卡顿</li><li>处理办法，就是禁止掉鼠标按下时,图片和被选中的文字<strong>默认的拖拽行为</strong>。</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>完整版代码实现</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">html,
  body</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.container</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 800px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 10px solid khaki<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.drag</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> tomato<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> move<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>drag<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我是一堆没有用的干扰文字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.container&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> drag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.drag&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 当鼠标在元素身上按下去时</span>
    drag<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> e <span class="token operator">=</span> e <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>

      <span class="token comment">// 取消事件的默认行为</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 鼠标按下时，与浏览器左边的距离和上面的距离</span>
      <span class="token keyword">var</span> _clientX <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
      <span class="token keyword">var</span> _clientY <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>

      <span class="token comment">// 获鼠标按下时，元素与定位父元素左边和上边的距离</span>
      <span class="token keyword">var</span> _offsetTop <span class="token operator">=</span> drag<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
      <span class="token keyword">var</span> _offsetLeft <span class="token operator">=</span> drag<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>

      <span class="token comment">// 获取父容器的宽,用来计算元素最大left</span>
      <span class="token keyword">var</span> dragWidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span>
      <span class="token keyword">var</span> dragHeight <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>

      <span class="token comment">// 获取元素的定位父容器的宽</span>
      <span class="token keyword">var</span> parentWidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetParent<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
      <span class="token keyword">var</span> parentHeight <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetParent<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>

      <span class="token comment">// 计算元素能移动的最大left值和最大top值</span>
      <span class="token keyword">var</span> maxLeft <span class="token operator">=</span> parentWidth <span class="token operator">-</span> dragWidth<span class="token punctuation">;</span>
      <span class="token keyword">var</span> maxTop <span class="token operator">=</span> parentHeight <span class="token operator">-</span> dragHeight<span class="token punctuation">;</span>

      <span class="token comment">// 当鼠标移动时</span>
      document<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 鼠标移动时，与浏览器可视区左边的距离</span>
        <span class="token keyword">var</span> _moveClientX <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
        <span class="token keyword">var</span> _moveClientY <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>

        <span class="token comment">// 计算鼠标移动的距离</span>
        <span class="token keyword">var</span> _x <span class="token operator">=</span> _moveClientX <span class="token operator">-</span> _clientX<span class="token punctuation">;</span>
        <span class="token keyword">var</span> _y <span class="token operator">=</span> _moveClientY <span class="token operator">-</span> _clientY<span class="token punctuation">;</span>

        <span class="token comment">// 元素的left和top值</span>
        <span class="token keyword">var</span> left <span class="token operator">=</span> _x <span class="token operator">+</span> _offsetLeft<span class="token punctuation">;</span>
        <span class="token keyword">var</span> top <span class="token operator">=</span> _y <span class="token operator">+</span> _offsetTop<span class="token punctuation">;</span>

        <span class="token comment">// 限定left只能在 0-maxLeft之间</span>
        left <span class="token operator">=</span> left <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> left<span class="token punctuation">;</span>
        left <span class="token operator">=</span> left <span class="token operator">&gt;</span> maxLeft <span class="token operator">?</span> maxLeft <span class="token operator">:</span> left<span class="token punctuation">;</span>

        top <span class="token operator">=</span> top <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> top<span class="token punctuation">;</span>
        top <span class="token operator">=</span> top <span class="token operator">&gt;</span> maxTop <span class="token operator">?</span> maxTop <span class="token operator">:</span> top<span class="token punctuation">;</span>

        <span class="token comment">// 计算元素当前的位置</span>
        drag<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
        drag<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> top <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token comment">// 当鼠标弹起来时，要对事件解绑</span>
      document<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        document<span class="token punctuation">.</span>onmouseup <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-1、封装-drag-方法-一" tabindex="-1"><a class="header-anchor" href="#_1-1、封装-drag-方法-一" aria-hidden="true">#</a> 1.1、封装 drag 方法 一</h3><ul><li>功能：需要拖拽那个元素，那个元素就调用 drag 方法</li><li>drag 方法中有两个参数 dragmove 和 dragend，分别为两个回调函数</li><li>dragmove：拖拽过程中需要处理的事情写在 dragmove 函数</li><li>dragend：拖拽结束后，需要处理的事情写在 dragend 函数中</li></ul><blockquote><p><strong>注意</strong>： mousemove 事件处理函数中的 this 要替换为拖拽的元素，所以需要在事件处理函数外面用 <code>var that = this</code> 保存被拖拽元素，然后传进去。</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 *	drag 拖拽方法
 * <span class="token keyword">@param</span> <span class="token parameter">dragmove：拖拽过程中需要处理的事情写在dragmove函数</span>
 * <span class="token keyword">@param</span> <span class="token parameter">dragend：拖拽结束后，需要处理的事情写在dragend函数中</span>
 */</span>
<span class="token class-name">HTMLElement</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">drag</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">dragmove<span class="token punctuation">,</span> dragend</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 当鼠标在元素身上按下去时</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> e <span class="token operator">=</span> e <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>
    <span class="token comment">// 取消事件的默认行为</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 鼠标按下时，与浏览器左边的距离和上面的距离</span>
    <span class="token keyword">var</span> _clientX <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
    <span class="token keyword">var</span> _clientY <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>

    <span class="token comment">// 获鼠标按下时，元素与定位父元素左边和上边的距离</span>
    <span class="token keyword">var</span> _offsetTop <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
    <span class="token keyword">var</span> _offsetLeft <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>

    <span class="token comment">// 获取父容器的宽,用来计算元素最大left</span>
    <span class="token keyword">var</span> dragWidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span>
    <span class="token keyword">var</span> dragHeight <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>

    <span class="token comment">// 获取元素的定位父容器的宽</span>
    <span class="token keyword">var</span> parentWidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetParent<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
    <span class="token keyword">var</span> parentHeight <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetParent<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>

    <span class="token comment">// 计算元素能移动的最大left值和最大top值</span>
    <span class="token keyword">var</span> maxLeft <span class="token operator">=</span> parentWidth <span class="token operator">-</span> dragWidth<span class="token punctuation">;</span>
    <span class="token keyword">var</span> maxTop <span class="token operator">=</span> parentHeight <span class="token operator">-</span> dragHeight<span class="token punctuation">;</span>
    <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token comment">// 当鼠标移动时</span>
    document<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 鼠标移动时，与浏览器可视区左边的距离</span>
      <span class="token keyword">var</span> _moveClientX <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
      <span class="token keyword">var</span> _moveClientY <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>

      <span class="token comment">// 计算鼠标移动的距离</span>
      <span class="token keyword">var</span> _x <span class="token operator">=</span> _moveClientX <span class="token operator">-</span> _clientX<span class="token punctuation">;</span>
      <span class="token keyword">var</span> _y <span class="token operator">=</span> _moveClientY <span class="token operator">-</span> _clientY<span class="token punctuation">;</span>

      <span class="token comment">// 元素的left和top值</span>
      <span class="token keyword">var</span> left <span class="token operator">=</span> _x <span class="token operator">+</span> _offsetLeft<span class="token punctuation">;</span>
      <span class="token keyword">var</span> top <span class="token operator">=</span> _y <span class="token operator">+</span> _offsetTop<span class="token punctuation">;</span>

      <span class="token comment">// 限定left只能在 0-maxLeft之间</span>
      left <span class="token operator">=</span> left <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> left<span class="token punctuation">;</span>
      left <span class="token operator">=</span> left <span class="token operator">&gt;</span> maxLeft <span class="token operator">?</span> maxLeft <span class="token operator">:</span> left<span class="token punctuation">;</span>

      top <span class="token operator">=</span> top <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> top<span class="token punctuation">;</span>
      top <span class="token operator">=</span> top <span class="token operator">&gt;</span> maxTop <span class="token operator">?</span> maxTop <span class="token operator">:</span> top<span class="token punctuation">;</span>

      <span class="token comment">// 计算元素当前的位置</span>
      that<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      that<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> top <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>

      <span class="token comment">// 移动过程中要处理的事情，调用以下回调函数</span>
      dragmove <span class="token keyword">instanceof</span> <span class="token class-name">Function</span> <span class="token operator">?</span> <span class="token function">dragmove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> dragmove<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 当鼠标弹起来时，要对事件解绑</span>
    document<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token comment">// 拖拽动画结束后，调用以下回调函数</span>
      dragend <span class="token keyword">instanceof</span> <span class="token class-name">Function</span> <span class="token operator">?</span> <span class="token function">dragend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> dragend<span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>onmouseup <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>使用封装好的 drag 方法</strong></p><p><img src="https://www.arryblog.com/assets/img/GIF2022-11-2313-25-29-16692712986061.e944f327.gif" alt="GIF2022-11-2313-25-29"></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">html,
  body</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.box</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> move<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.box1</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> khaki<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.box2</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.box3</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> tomato<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box box1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box box2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box box3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./drag.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  box<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">drag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  box<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">drag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  box<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">drag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2、封装-drag-方法-二" tabindex="-1"><a class="header-anchor" href="#_1-2、封装-drag-方法-二" aria-hidden="true">#</a> 1.2、封装 drag 方法 二</h3><ul><li>功能：被按下的元素和被拖拽的元素不是同一个元素，当在 A 元素上按下时，可拖拖拽 B 元素</li><li>drag 方法中有 3 个参数 dragElement,dragmove 和 dragend</li><li>dragElement 表示要拖拽的元素</li><li>dragmove：拖拽过程中需要处理的事情写在 dragmove 函数</li><li>dragend：拖拽结束后，需要处理的事情写在 dragend 函数中</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 调用drag方法的元素，为鼠标按下的元素
 * <span class="token keyword">@param</span> <span class="token parameter">dragElement</span> 为被拖拽的元素
 * <span class="token keyword">@param</span> <span class="token parameter">dragmove：拖拽过程中需要处理的事情写在dragmove函数</span>
 * <span class="token keyword">@param</span> <span class="token parameter">dragend：拖拽结束后，需要处理的事情写在dragend函数</span>
 */</span>

<span class="token class-name">HTMLElement</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">drag</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">dragElement<span class="token punctuation">,</span> dragmove<span class="token punctuation">,</span> dragend</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 当鼠标在元素身上按下去时</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> e <span class="token operator">=</span> e <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>

    <span class="token comment">// 取消事件的默认行为</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 鼠标按下时，与浏览器左边的距离和上面的距离</span>
    <span class="token keyword">var</span> _clientX <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
    <span class="token keyword">var</span> _clientY <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>

    <span class="token comment">// 获鼠标按下时，元素与定位父元素左边和上边的距离</span>
    <span class="token keyword">var</span> _offsetTop <span class="token operator">=</span> dragElement<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
    <span class="token keyword">var</span> _offsetLeft <span class="token operator">=</span> dragElement<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>

    <span class="token comment">// 获取父容器的宽,用来计算元素最大left</span>
    <span class="token keyword">var</span> dragWidth <span class="token operator">=</span> dragElement<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span>
    <span class="token keyword">var</span> dragHeight <span class="token operator">=</span> dragElement<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>

    <span class="token comment">// 获取元素的定位父容器的宽</span>
    <span class="token keyword">var</span> parentWidth <span class="token operator">=</span> dragElement<span class="token punctuation">.</span>offsetParent<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
    <span class="token keyword">var</span> parentHeight <span class="token operator">=</span> dragElement<span class="token punctuation">.</span>offsetParent<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>

    <span class="token comment">// 计算元素能移动的最大left值和最大top值</span>
    <span class="token keyword">var</span> maxLeft <span class="token operator">=</span> parentWidth <span class="token operator">-</span> dragWidth<span class="token punctuation">;</span>
    <span class="token keyword">var</span> maxTop <span class="token operator">=</span> parentHeight <span class="token operator">-</span> dragHeight<span class="token punctuation">;</span>

    <span class="token comment">// 当鼠标移动时</span>
    document<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 鼠标移动时，与浏览器可视区左边的距离</span>
      <span class="token keyword">var</span> _moveClientX <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
      <span class="token keyword">var</span> _moveClientY <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>

      <span class="token comment">// 计算鼠标移动的距离</span>
      <span class="token keyword">var</span> _x <span class="token operator">=</span> _moveClientX <span class="token operator">-</span> _clientX<span class="token punctuation">;</span>
      <span class="token keyword">var</span> _y <span class="token operator">=</span> _moveClientY <span class="token operator">-</span> _clientY<span class="token punctuation">;</span>

      <span class="token comment">// 元素的left和top值</span>
      <span class="token keyword">var</span> left <span class="token operator">=</span> _x <span class="token operator">+</span> _offsetLeft<span class="token punctuation">;</span>
      <span class="token keyword">var</span> top <span class="token operator">=</span> _y <span class="token operator">+</span> _offsetTop<span class="token punctuation">;</span>

      <span class="token comment">// 限定left只能在 0-maxLeft之间</span>
      left <span class="token operator">=</span> left <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> left<span class="token punctuation">;</span>
      left <span class="token operator">=</span> left <span class="token operator">&gt;</span> maxLeft <span class="token operator">?</span> maxLeft <span class="token operator">:</span> left<span class="token punctuation">;</span>

      top <span class="token operator">=</span> top <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> top<span class="token punctuation">;</span>
      top <span class="token operator">=</span> top <span class="token operator">&gt;</span> maxTop <span class="token operator">?</span> maxTop <span class="token operator">:</span> top<span class="token punctuation">;</span>

      <span class="token comment">// 计算元素当前的位置</span>
      dragElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      dragElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> top <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>

      <span class="token comment">// 移动过程中要处理的事情，调用以下回调函数</span>
      dragmove <span class="token keyword">instanceof</span> <span class="token class-name">Function</span> <span class="token operator">?</span> <span class="token function">dragmove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> dragmove<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 当鼠标弹起来时，要对事件解绑</span>
    document<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token comment">// 拖拽动画结束后，调用以下回调函数</span>
      dragend <span class="token keyword">instanceof</span> <span class="token class-name">Function</span> <span class="token operator">?</span> <span class="token function">dragend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> dragend<span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>onmouseup <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>利用封装的 drag 方法，实现以下效果</p><ul><li>在黄色元素上按下，可拖拽橘红色元素移动</li><li>在橘红色元素上按下，元素不能被拖拽</li></ul><p><img src="https://www.arryblog.com/assets/img/GIF2022-11-220-56-07.70f09c26.gif" alt="GIF2022-11-220-56-07"></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">html,
  body</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.box</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> tomato<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> move<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.title</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> khaki<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./drag.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> title <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 鼠标在 title上面按下，但拖拽的是box元素</span>
  title<span class="token punctuation">.</span><span class="token function">drag</span><span class="token punctuation">(</span>box<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、案例-2-拖拽交换两元素位置" tabindex="-1"><a class="header-anchor" href="#_2、案例-2-拖拽交换两元素位置" aria-hidden="true">#</a> 2、案例 2：拖拽交换两元素位置</h3><p>涉及知识点</p><ul><li>利用 JS 实现布局转换</li><li>onmousedown、onmousemove、onmouseup 事件</li><li>事件对象</li><li>自定义属性的使用</li><li>拖拽动画实现原理、如何检测两个元素碰撞，如果找到多个碰撞元素中离自己最近的一个</li><li>如何交换两个元素的位置</li></ul><p><img src="https://www.arryblog.com/assets/img/GIF2022-11-2318-15-45-16692036016674.c00635d9.gif" alt="GIF2022-11-2318-15-45-16692036016674"></p><h3 id="_2-1、布局实现" tabindex="-1"><a class="header-anchor" href="#_2-1、布局实现" aria-hidden="true">#</a> 2.1、布局实现</h3><p>先利用纯 CSS 来实现两行 4 列的布局</p><p><img src="data:image/png;base64,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" alt="image-20221123165914084"></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">html,
  body,
  ul,
  li</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">html,
  body</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">ul</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 880px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 240px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 100px auto<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #ddd<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">ul li</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> move<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list clearfix<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2、布局转换" tabindex="-1"><a class="header-anchor" href="#_2-2、布局转换" aria-hidden="true">#</a> 2.2、布局转换</h3><p>元素需要拖动，那肯定要设置为绝对定位元素，我们可以利用 JS 来实现布局转换。同时将每个版块的颜色设置为不同</p><p><img src="data:image/png;base64,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" alt="image-20221123165841067"></p><p>通过 JS 获取页面中 li 元素，然后把每个元素相对其定位的父元素 left 值和 top 值添加到一个数组中</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> items <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;.list li&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 数组用来保存每个li元素的left 和 top值坐标</span>
<span class="token keyword">var</span> coordinates <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 循环遍历，把每个元素的坐标存到数组中去</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span>left <span class="token operator">=</span> items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span>top <span class="token operator">=</span> items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
  coordinates<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>遍历所有 li 元素，把每个元素的都转换为定位元素，同时把之前保存到数组中的对应的 left 值和 top 值添加到对应元素身上</li><li>再准备一个 bgColor 数组，用来保存每个 li 元素的背景颜色，同时把每个元素的背景颜色更改为对应颜色</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> bgColor <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;pink&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;skyblue&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;turquoise&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;khaki&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;salmon&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;thistle&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;orange&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 布局转换，把li转换成对应的绝对定位布局</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  items<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">&quot;absolute&quot;</span><span class="token punctuation">;</span>
  items<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>margin <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 注意把margin值设为 0</span>
  items<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> coordinates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>left <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  items<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> coordinates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>top <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  items<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> bgColor<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
  items<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>zIndex <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 统一元素的层级关系</span>

  <span class="token comment">// 保存left与top值，是为了后面效换元素时，能拿到元素交换前的位置</span>
  items<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>left <span class="token operator">=</span> coordinates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>left<span class="token punctuation">;</span>
  items<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>top <span class="token operator">=</span> coordinates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>top<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3、js-实现-拖拽效果" tabindex="-1"><a class="header-anchor" href="#_2-3、js-实现-拖拽效果" aria-hidden="true">#</a> 2.3、JS 实现：拖拽效果</h3><p>利用事件委托来处理，所以 li 子元素的 mousedown 事件需要处理的事情，全交由父元素来处理</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>list<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
  <span class="token keyword">var</span> tagName <span class="token operator">=</span> target<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>tagName <span class="token operator">!==</span> <span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

  <span class="token comment">// 如果是在 li上按下需要处理的事情写在下面</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>在 li 上按下，可以拖拽 li</li><li>同时在元素没有发生碰撞时，松开鼠标，元素回到原位置</li><li>被按下拖拽的元素，会在所有元素的最上面，所以他的 z-index 要最大</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 我们利事件委托，来处理</span>
list<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
  <span class="token keyword">var</span> tagName <span class="token operator">=</span> target<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>tagName <span class="token operator">!==</span> <span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token comment">// 只有在li上按下时，才会做下面的事情</span>
  <span class="token comment">// 鼠标按下时与浏览器可视区左边距离</span>
  <span class="token keyword">var</span> _clientX <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
  <span class="token keyword">var</span> _clientY <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
  <span class="token comment">// 按下时，元素的left值和top值</span>
  <span class="token keyword">var</span> offsetLeft <span class="token operator">=</span> target<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
  <span class="token keyword">var</span> offsetTop <span class="token operator">=</span> target<span class="token punctuation">.</span>top<span class="token punctuation">;</span>

  document<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> clientX <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
    <span class="token keyword">var</span> clientY <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>

    <span class="token keyword">var</span> left <span class="token operator">=</span> clientX <span class="token operator">-</span> _clientX <span class="token operator">+</span> offsetLeft<span class="token punctuation">;</span>
    <span class="token keyword">var</span> top <span class="token operator">=</span> clientY <span class="token operator">-</span> _clientY <span class="token operator">+</span> offsetTop<span class="token punctuation">;</span>

    target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> top <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 被拖拽的元素的层级是最高的</span>
    target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>zIndex <span class="token operator">=</span> <span class="token number">33</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 鼠标松开</span>
  document<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果没有和其它元素碰撞，那就回到原来位置，同时元素zIndex复原</span>
    <span class="token comment">// 判断条件，后面再写</span>
    target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> target<span class="token punctuation">.</span>left <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> target<span class="token punctuation">.</span>top <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>zIndex <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token comment">// 事件解绑</span>
    document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>onmouseup <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4、js-实现-碰撞检测-同时找出碰撞元素中离自己最近的元素" tabindex="-1"><a class="header-anchor" href="#_2-4、js-实现-碰撞检测-同时找出碰撞元素中离自己最近的元素" aria-hidden="true">#</a> 2.4、JS 实现：碰撞检测，同时找出碰撞元素中离自己最近的元素</h3><ul><li>判断当前拖拽的元素与其它兄弟碰上是否碰上</li><li>如果碰上，就把碰上的元素添加到数组中去</li><li>如果何找到碰到的元素中，离自己最近的元素</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> prevBumpElement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 记录前一个与自己碰撞的元素</span>
<span class="token keyword">var</span> nearElement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 当前碰上的元素</span>

document<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 前面代码略</span>
  <span class="token comment">//  .....</span>
  <span class="token comment">// 如何判断两个元素是否碰上</span>
  <span class="token keyword">var</span> bumpElement <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  items<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">!==</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isBump</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        bumpElement<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 找出与我碰撞的元素中，离自己最近的那一个</span>
  nearElement <span class="token operator">=</span> <span class="token function">findNearest</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> bumpElement<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 如果前一个碰上的元素存在，就把样式消掉</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>prevBumpElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    prevBumpElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>outline <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>
    prevBumpElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>zIndex <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 如果有碰上的元素，就把碰上的最近的那个元素添加如下样式</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>nearElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    nearElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>outline <span class="token operator">=</span> <span class="token string">&quot;2px solid red&quot;</span><span class="token punctuation">;</span>
    nearElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>zIndex <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span>
    prevBumpElement <span class="token operator">=</span> nearElement<span class="token punctuation">;</span> <span class="token comment">// 所当前碰上元素记录下来</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 判断两个元素是否碰上</span>
<span class="token keyword">function</span> <span class="token function">isBump</span><span class="token punctuation">(</span><span class="token parameter">obj1<span class="token punctuation">,</span> obj2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token constant">L1</span> <span class="token operator">=</span> obj1<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">R1</span> <span class="token operator">=</span> <span class="token constant">L1</span> <span class="token operator">+</span> obj1<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">T1</span> <span class="token operator">=</span> obj1<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">B1</span> <span class="token operator">=</span> <span class="token constant">T1</span> <span class="token operator">+</span> obj1<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">L2</span> <span class="token operator">=</span> obj2<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">R2</span> <span class="token operator">=</span> <span class="token constant">L2</span> <span class="token operator">+</span> obj2<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">T2</span> <span class="token operator">=</span> obj2<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">B2</span> <span class="token operator">=</span> <span class="token constant">T2</span> <span class="token operator">+</span> obj2<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">L2</span> <span class="token operator">&gt;</span> <span class="token constant">R1</span> <span class="token operator">||</span> <span class="token constant">L1</span> <span class="token operator">&gt;</span> <span class="token constant">R2</span> <span class="token operator">||</span> <span class="token constant">T2</span> <span class="token operator">&gt;</span> <span class="token constant">B1</span> <span class="token operator">||</span> <span class="token constant">T1</span> <span class="token operator">&gt;</span> <span class="token constant">B2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 未碰撞，返回false</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 碰撞，返回true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 找出数组中与obj元素距离最近的元素</span>
<span class="token keyword">function</span> <span class="token function">findNearest</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> elementArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// 遍历每个元素，计算每个元素于obj的中心位置，然后保存到数组中</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 当前被用来比较的obj，不用存到数组中，要排除</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//计算两中心点距离</span>
      <span class="token keyword">var</span> centerDistance <span class="token operator">=</span> <span class="token function">getDistance</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 把这个元素和对应中心点距离保存到数组中</span>
      <span class="token keyword">var</span> el <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      el<span class="token punctuation">.</span>element <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      el<span class="token punctuation">.</span>distance <span class="token operator">=</span> centerDistance<span class="token punctuation">;</span>
      elementArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// for循环遍历elementArr数组，找出数组中距离最小的那个元素，然后返回</span>
  <span class="token keyword">var</span> minElement <span class="token operator">=</span> elementArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> elementArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>elementArr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>distance <span class="token operator">&lt;</span> minElement<span class="token punctuation">.</span>distance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      minElement <span class="token operator">=</span> elementArr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>minElement<span class="token punctuation">)</span> <span class="token keyword">return</span> minElement<span class="token punctuation">.</span>element<span class="token punctuation">;</span> <span class="token comment">// 返回最小的距离的那个对象</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 计算两个元素中心点位置</span>
<span class="token keyword">function</span> <span class="token function">getDistance</span><span class="token punctuation">(</span><span class="token parameter">obj1<span class="token punctuation">,</span> obj2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> x <span class="token operator">=</span>
    obj1<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span>
    obj1<span class="token punctuation">.</span>offsetWidth <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span>
    <span class="token punctuation">(</span>obj2<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> obj2<span class="token punctuation">.</span>offsetWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> y <span class="token operator">=</span>
    obj1<span class="token punctuation">.</span>offsetTop <span class="token operator">+</span>
    obj1<span class="token punctuation">.</span>offsetHeight <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span>
    <span class="token punctuation">(</span>obj2<span class="token punctuation">.</span>offsetTop <span class="token operator">+</span> obj2<span class="token punctuation">.</span>offsetHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-5、js-实现-在碰上时-松开鼠标-交换两元素位置" tabindex="-1"><a class="header-anchor" href="#_2-5、js-实现-在碰上时-松开鼠标-交换两元素位置" aria-hidden="true">#</a> 2.5、JS 实现：在碰上时，松开鼠标，交换两元素位置</h3><p>如何判断当前鼠标是在碰撞元素上松开的呢 ？</p><p>如果鼠标松开时，存在离自己最近的碰上元素，那就是就是碰上时松开鼠标的</p><ul><li>碰上时，交换两元素位置，同时交换位置时，实现动画效果</li><li>交换位置时，要把碰上元素的<code>outline</code>去掉，同时<code>nearElement = null</code></li></ul><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token comment">/* 过渡动画 */</span>
<span class="token selector">.move</span> <span class="token punctuation">{</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 0.5s ease<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">document.onmouseup = function ()</span> <span class="token punctuation">{</span>
  <span class="token selector">if (nearElement)</span> <span class="token punctuation">{</span>
    // 如果元素碰上，然后再松开鼠标<span class="token punctuation">,</span>就要交换两个元素的位置
    var left = target.left<span class="token punctuation">;</span>
    var top = target.top<span class="token punctuation">;</span>

    // 把碰上元素的left和top值赋值级到 拖拽元素
    target.left = nearElement.left<span class="token punctuation">;</span>
    target.top = nearElement.top<span class="token punctuation">;</span>

    nearElement.left = left<span class="token punctuation">;</span>
    nearElement.top = top<span class="token punctuation">;</span>

    // 正式交换位置

    target.classList.<span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;move&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    nearElement.classList.<span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;move&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    target.style.left = target.left + <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    target.style.top = target.top + <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>

    nearElement.style.left = nearElement.left + <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    nearElement.style.top = nearElement.top + <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    nearElement.style.outline = <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>
    nearElement = null<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token selector">else</span> <span class="token punctuation">{</span>
    // 如果没有和其它元素碰撞，那就回到原来位置
    target.style.left = target.left + <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    target.style.top = target.top + <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    target.style.zIndex = 2<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  document.onmousemove = null<span class="token punctuation">;</span>
  document.onmouseup = null<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-6、js-实现-元素过渡动画结束后要处理的事" tabindex="-1"><a class="header-anchor" href="#_2-6、js-实现-元素过渡动画结束后要处理的事" aria-hidden="true">#</a> 2.6、JS 实现：元素过渡动画结束后要处理的事</h3><p>动画结束后移除元素身上的过渡动画样式，同时元素的<code>z-index</code>恢复为原值 2</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  items<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
    <span class="token string">&quot;transitionend&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;move&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>zIndex <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token boolean">false</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-7、完整版代码" tabindex="-1"><a class="header-anchor" href="#_2-7、完整版代码" aria-hidden="true">#</a> 2.7、完整版代码</h3><p>布局</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">body,
  html</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">body,
  html,
  ul,
  li</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.list</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 880px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 240px<span class="token punctuation">;</span>
    <span class="token comment">/* background-color: #ddd; */</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 100px auto<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span> <span class="token comment">/* 相对定位，切记要加 */</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.list li</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>
    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> move<span class="token punctuation">;</span>
    <span class="token comment">/* transition: all 1s ease; */</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.move</span> <span class="token punctuation">{</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all 0.5s ease<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>JS 代码</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 利用JS来实现布局转换</span>
<span class="token keyword">var</span> list <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.list&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> items <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;.list li&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> len <span class="token operator">=</span> items<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token keyword">var</span> prevBumpElement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 记录前一个与自己碰撞的元素</span>
<span class="token keyword">var</span> nearElement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 当前碰上的元素</span>
<span class="token keyword">var</span> coordinates <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 保存每个li的元素left 和 top</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span>left <span class="token operator">=</span> items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span>top <span class="token operator">=</span> items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
  coordinates<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 每个li元素的背景颜色</span>
<span class="token keyword">var</span> bgColor <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;pink&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;skyblue&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;turquoise&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;khaki&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;salmon&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;thistle&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;orange&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 把每一个li转换成一个绝对定位的元素</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  items<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">&quot;absolute&quot;</span><span class="token punctuation">;</span>
  items<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>margin <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 注意把margin值设为 0</span>
  items<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> coordinates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>left <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  items<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> coordinates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>top <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  items<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> bgColor<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
  items<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>zIndex <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 统一元素的层级关系</span>

  <span class="token comment">// 保存left与top值，是为了后面效换元素时，能拿到元素交换前的位置</span>
  items<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>left <span class="token operator">=</span> coordinates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>left<span class="token punctuation">;</span>
  items<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>top <span class="token operator">=</span> coordinates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>top<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 我们利事件委托，来处理</span>
list<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
  <span class="token keyword">var</span> tagName <span class="token operator">=</span> target<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>tagName <span class="token operator">!==</span> <span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token comment">// 只有在li上按下时，才会做下面的事情</span>
  <span class="token comment">// 鼠标按下时与浏览器可视区左边距离</span>
  <span class="token keyword">var</span> _clientX <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
  <span class="token keyword">var</span> _clientY <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
  <span class="token comment">// 按下时，元素的left值和top值</span>
  <span class="token keyword">var</span> offsetLeft <span class="token operator">=</span> target<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
  <span class="token keyword">var</span> offsetTop <span class="token operator">=</span> target<span class="token punctuation">.</span>top<span class="token punctuation">;</span>

  document<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> clientX <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
    <span class="token keyword">var</span> clientY <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>

    <span class="token keyword">var</span> left <span class="token operator">=</span> clientX <span class="token operator">-</span> _clientX <span class="token operator">+</span> offsetLeft<span class="token punctuation">;</span>
    <span class="token keyword">var</span> top <span class="token operator">=</span> clientY <span class="token operator">-</span> _clientY <span class="token operator">+</span> offsetTop<span class="token punctuation">;</span>

    target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> top <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 被拖拽的元素的层级是最高的</span>
    target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>zIndex <span class="token operator">=</span> <span class="token number">33</span><span class="token punctuation">;</span>

    <span class="token comment">// 如何判断两个元素是否碰上</span>
    <span class="token keyword">var</span> bumpElement <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    items<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">!==</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isBump</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          bumpElement<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 找出与我碰撞的元素中，离自己最近的那一个</span>
    nearElement <span class="token operator">=</span> <span class="token function">findNearest</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> bumpElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 如果前一个碰上的元素存在，就把样式消掉</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>prevBumpElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      prevBumpElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>outline <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>
      prevBumpElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>zIndex <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 如果有碰上的元素，就把碰上的最近的那个元素添加如下样式</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nearElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      nearElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>outline <span class="token operator">=</span> <span class="token string">&quot;2px solid red&quot;</span><span class="token punctuation">;</span>
      nearElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>zIndex <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span>
      prevBumpElement <span class="token operator">=</span> nearElement<span class="token punctuation">;</span> <span class="token comment">// 所当前碰上元素记录下来</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  document<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nearElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//如果元素碰上，然后再松开鼠标,就要交换两个元素的位置</span>
      <span class="token keyword">var</span> left <span class="token operator">=</span> target<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
      <span class="token keyword">var</span> top <span class="token operator">=</span> target<span class="token punctuation">.</span>top<span class="token punctuation">;</span>

      <span class="token comment">// 把碰上元素的left和top值赋值级到 拖拽元素</span>
      target<span class="token punctuation">.</span>left <span class="token operator">=</span> nearElement<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
      target<span class="token punctuation">.</span>top <span class="token operator">=</span> nearElement<span class="token punctuation">.</span>top<span class="token punctuation">;</span>

      nearElement<span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
      nearElement<span class="token punctuation">.</span>top <span class="token operator">=</span> top<span class="token punctuation">;</span>

      <span class="token comment">// 正式交换位置</span>

      target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;move&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      nearElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;move&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> target<span class="token punctuation">.</span>left <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> target<span class="token punctuation">.</span>top <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>

      nearElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> nearElement<span class="token punctuation">.</span>left <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      nearElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> nearElement<span class="token punctuation">.</span>top <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      nearElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>outline <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>
      nearElement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果没有和其它元素碰撞，那就回到原来位置</span>
      target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> target<span class="token punctuation">.</span>left <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> target<span class="token punctuation">.</span>top <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
      target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>zIndex <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>onmouseup <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  items<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
    <span class="token string">&quot;transitionend&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;move&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>zIndex <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token boolean">false</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 判断两个元素是否碰上</span>
<span class="token keyword">function</span> <span class="token function">isBump</span><span class="token punctuation">(</span><span class="token parameter">obj1<span class="token punctuation">,</span> obj2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token constant">L1</span> <span class="token operator">=</span> obj1<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">R1</span> <span class="token operator">=</span> <span class="token constant">L1</span> <span class="token operator">+</span> obj1<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">T1</span> <span class="token operator">=</span> obj1<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">B1</span> <span class="token operator">=</span> <span class="token constant">T1</span> <span class="token operator">+</span> obj1<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">L2</span> <span class="token operator">=</span> obj2<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">R2</span> <span class="token operator">=</span> <span class="token constant">L2</span> <span class="token operator">+</span> obj2<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">T2</span> <span class="token operator">=</span> obj2<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">B2</span> <span class="token operator">=</span> <span class="token constant">T2</span> <span class="token operator">+</span> obj2<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">L2</span> <span class="token operator">&gt;</span> <span class="token constant">R1</span> <span class="token operator">||</span> <span class="token constant">L1</span> <span class="token operator">&gt;</span> <span class="token constant">R2</span> <span class="token operator">||</span> <span class="token constant">T2</span> <span class="token operator">&gt;</span> <span class="token constant">B1</span> <span class="token operator">||</span> <span class="token constant">T1</span> <span class="token operator">&gt;</span> <span class="token constant">B2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 未碰撞，返回false</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 碰撞，返回true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 找出数组中与obj元素距离最近的元素</span>
<span class="token keyword">function</span> <span class="token function">findNearest</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> elementArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// 遍历每个元素，计算每个元素于obj的中心位置，然后保存到数组中</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 当前被用来比较的obj，不用存到数组中，要排除</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//计算两中心点距离</span>
      <span class="token keyword">var</span> centerDistance <span class="token operator">=</span> <span class="token function">getDistance</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 把这个元素和对应中心点距离保存到数组中</span>
      <span class="token keyword">var</span> el <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      el<span class="token punctuation">.</span>element <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      el<span class="token punctuation">.</span>distance <span class="token operator">=</span> centerDistance<span class="token punctuation">;</span>
      elementArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// for循环遍历elementArr数组，找出数组中距离最小的那个元素，然后返回</span>
  <span class="token keyword">var</span> minElement <span class="token operator">=</span> elementArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> elementArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>elementArr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>distance <span class="token operator">&lt;</span> minElement<span class="token punctuation">.</span>distance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      minElement <span class="token operator">=</span> elementArr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>minElement<span class="token punctuation">)</span> <span class="token keyword">return</span> minElement<span class="token punctuation">.</span>element<span class="token punctuation">;</span> <span class="token comment">// 返回最小的距离的那个对象</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 计算两个元素中心点位置</span>
<span class="token keyword">function</span> <span class="token function">getDistance</span><span class="token punctuation">(</span><span class="token parameter">obj1<span class="token punctuation">,</span> obj2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> x <span class="token operator">=</span>
    obj1<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span>
    obj1<span class="token punctuation">.</span>offsetWidth <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span>
    <span class="token punctuation">(</span>obj2<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> obj2<span class="token punctuation">.</span>offsetWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> y <span class="token operator">=</span>
    obj1<span class="token punctuation">.</span>offsetTop <span class="token operator">+</span>
    obj1<span class="token punctuation">.</span>offsetHeight <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span>
    <span class="token punctuation">(</span>obj2<span class="token punctuation">.</span>offsetTop <span class="token operator">+</span> obj2<span class="token punctuation">.</span>offsetHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果这个案例会了</p><p>那类传的以下效果大家都要尝试自己去做 ！</p><ul><li><strong>拖拽碰撞爆炸或拖拽删除、拖拽插入元素</strong></li><li><strong>黑洞吸附效果</strong>（其它元素碰到黑洞就消失）</li><li>拖拽改变元素大小</li></ul><h2 id="七、综合应用实践案例" tabindex="-1"><a class="header-anchor" href="#七、综合应用实践案例" aria-hidden="true">#</a> 七、综合应用实践案例</h2><p>结合本章节所学内容进行综合实践应用。</p><h3 id="_1、案例-3-键盘控制元素运动" tabindex="-1"><a class="header-anchor" href="#_1、案例-3-键盘控制元素运动" aria-hidden="true">#</a> 1、案例 3：键盘控制元素运动</h3><p>涉及知识点</p><ul><li>定时器 <code>setInterval()</code></li><li>onkeydown、onkeyup 事件</li><li>事件对象：<code>e.altkey</code>、<code>key</code></li><li>动画执行原理</li></ul><p><img src="https://www.arryblog.com/assets/img/GIF-2022-10-18-17-51-06.ac22461b.gif" alt="GIF 2022-10-18 17-51-06"></p><ul><li>页面中有一个长方形，当我按键盘上的不同方向键时，他可以向不同的方向移动</li><li>如果同时按下<code>Alt</code>键和方向键，则会加速向某个方向移动</li><li>因为 <code>keydown</code> 的第一次事件处理函数的调用时间与第二次的事件处理函数调用的时间间隔相对来说比较长</li><li>所以<code>keydown</code>事件主要用来判断元素的运动方向，元素的运动行为通过定时器来实现。</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.box</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> speed <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 锁，当前开锁状态</span>
  <span class="token keyword">var</span> key<span class="token punctuation">;</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token comment">// 当键盘按下时，需要做的事情</span>
  document<span class="token punctuation">.</span><span class="token function-variable function">onkeydown</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    key <span class="token operator">=</span> e<span class="token punctuation">.</span>key<span class="token punctuation">;</span>
    <span class="token keyword">var</span> altkey <span class="token operator">=</span> e<span class="token punctuation">.</span>altKey<span class="token punctuation">;</span> <span class="token comment">// true 或 false</span>
    speed <span class="token operator">=</span> altkey <span class="token operator">?</span> <span class="token number">50</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">;</span>

    <span class="token comment">// 这里第一次进来就会上锁,是不希望重复调用toMove函数</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>lock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      lock <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token function">toMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 根据方向，来移动元素</span>
  <span class="token keyword">function</span> <span class="token function">toMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">&quot;ArrowLeft&quot;</span><span class="token operator">:</span>
          box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> box<span class="token punctuation">.</span>offsetLeft <span class="token operator">-</span> speed <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;ArrowRight&quot;</span><span class="token operator">:</span>
          box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> box<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> speed <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;ArrowDown&quot;</span><span class="token operator">:</span>
          box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> box<span class="token punctuation">.</span>offsetTop <span class="token operator">+</span> speed <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&quot;ArrowUp&quot;</span><span class="token operator">:</span>
          box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> box<span class="token punctuation">.</span>offsetTop <span class="token operator">-</span> speed <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  document<span class="token punctuation">.</span><span class="token function-variable function">onkeyup</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、案例-4-表单全选和取消" tabindex="-1"><a class="header-anchor" href="#_2、案例-4-表单全选和取消" aria-hidden="true">#</a> 2、案例 4：表单全选和取消</h3><p>涉及知识点</p><ul><li>自定义属性灵活使用</li><li>事件委拖</li><li>判断元素身上是否包含某个 class 类</li></ul><p><img src="https://www.arryblog.com/assets/img/GIF-2022-10-23-18-45-38.56cb46d3.gif" alt="GIF 2022-10-23 18-45-38"></p><blockquote><p>以上布局，我们采用 <code>display: table;</code>来实现布局。</p></blockquote><p><code>display: table;</code>系列几乎是 和 <code>table</code>系的元素相对应的，请看下表：</p><table><thead><tr><th style="text-align:left;">属性</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">table</td><td style="text-align:left;">（类似 <code>&lt;table&gt;</code>）此元素会作为块级表格来显示，表格前后带有换行符。</td></tr><tr><td style="text-align:left;">inline-table</td><td style="text-align:left;">（类似 <code>&lt;table&gt;</code>）此元素会作为内联表格来显示，表格前后没有换行符。</td></tr><tr><td style="text-align:left;">table-row-group</td><td style="text-align:left;">（类似 <code>&lt;tbody&gt;</code>）此元素会作为一个或多个行的分组来显示。</td></tr><tr><td style="text-align:left;">table-header-group</td><td style="text-align:left;">（类似 <code>&lt;thead&gt;</code>）此元素会作为一个或多个行的分组来显示。</td></tr><tr><td style="text-align:left;">table-footer-group</td><td style="text-align:left;">（类似 <code>&lt;tfoot&gt;</code>）此元素会作为一个或多个行的分组来显示。</td></tr><tr><td style="text-align:left;">table-row</td><td style="text-align:left;">（类似 <code>&lt;tr&gt;</code>）此元素会作为一个表格行显示。</td></tr><tr><td style="text-align:left;">table-column-group</td><td style="text-align:left;">（类似 <code>&lt;colgroup&gt;</code>）此元素会作为一个或多个列的分组来显示。</td></tr><tr><td style="text-align:left;">table-column</td><td style="text-align:left;">（类似 <code>&lt;col&gt;</code>）此元素会作为一个单元格列显示。</td></tr><tr><td style="text-align:left;">table-cell</td><td style="text-align:left;">（类似 <code>&lt;td&gt;</code> 和 <code>&lt;th&gt;</code>）此元素会作为一个表格单元格显示。</td></tr><tr><td style="text-align:left;">table-caption</td><td style="text-align:left;">（类似 <code>&lt;caption&gt;</code>）此元素会作为一个表格标题显示。</td></tr></tbody></table><h3 id="_2-1、布局实现源码" tabindex="-1"><a class="header-anchor" href="#_2-1、布局实现源码" aria-hidden="true">#</a> 2.1、布局实现源码</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.table</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ddd<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 750px<span class="token punctuation">;</span>
    <span class="token property">border-collapse</span><span class="token punctuation">:</span> collapse<span class="token punctuation">;</span> <span class="token comment">/* 合并单元格边框线 */</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.table .tr</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> table-row<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.table .tr .th,
  .table .tr .td</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> table-cell<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 45px<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #666<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.table .tr .th</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #ddd<span class="token punctuation">;</span>
    <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.table .tr .td</span> <span class="token punctuation">{</span>
    <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.check</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
    <span class="token property">outline</span><span class="token punctuation">:</span> 1px solid #333<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/* 选中状态的样式 */</span>
  <span class="token selector">.selected</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&quot;./images/seleted.png&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>
    <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>table<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>J_table<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tr<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>th<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>check<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>J_selected<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>th<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>序号<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>th<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>编号<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>th<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>班级名称<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>th<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>班主任<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>th<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>操作<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tr<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>check check-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>202201001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>初一（103班）<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>王老师<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>del<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tr<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>check check-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>002<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>202201002<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>初一（104班）<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>贺老师<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>del<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tr<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>check check-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>003<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>202201001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>初二（105班）<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>雷老师<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>del<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tr<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>check check-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>004<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>202201001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>初二（106班）<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>张老师<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>td<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>del<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2、js-实现思路" tabindex="-1"><a class="header-anchor" href="#_2-2、js-实现思路" aria-hidden="true">#</a> 2.2、JS 实现思路</h3><p><strong>第一步：处理全选按扭点击后要实现的功能</strong></p><ul><li>通过<code>classList.toggle</code>方法，来实现元素点击时，在选中和未选中状态之间来回切换</li><li>如果<code>classList.toggle</code>方法的返回值为 true，表示当前是全选状态，为 false 表示未全选状态。</li><li>在全选按扭对象上创建 1 个属性，用来记录当前选中的子元素的个数<code>(selectedNum)</code>,同时赋初默认值<code>selectedNum = 0</code></li><li>如果全选按扭为选中状态，则<code>selectedNum = 所有子元素（复选框）个数</code></li><li>如果全选按扭未选中状态，则设直<code>selectedNum = 0</code></li></ul><p><strong>第二步：处理每个子元素点击要实现的功能（采用事件委托）</strong></p><p>同样通过<code>classList.toggle</code>来实现子元素在选中和未选中状态之间切换。</p><p>然后根据<code>toggle</code>方法的返回值，来决定当前全选按扭的状态。</p><ul><li>如果返回值为 true，让<code>selectedNum++</code>，如果<code>selectedNum === 子元素个数</code>，则表示当前所有子元素都是选中状态，则全选按扭更新为选中状态</li><li>如果返回值为<code>false</code>，让<code>selectedNume--</code>; 些时全选按扭肯定为未全选状态。因为只要有一个未选中，那就是未全选状态。</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// id=&quot;J_table&quot;的元素</span>
<span class="token keyword">var</span> table <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_table&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取全选按扭</span>
<span class="token keyword">var</span> selectAllButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_selected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取所有的复选框</span>
<span class="token keyword">var</span> checkButtons <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;.table .tr .td .check&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> len <span class="token operator">=</span> checkButtons<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
selectAllButton<span class="token punctuation">.</span>selectedNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 刚开始被选中的元素个数是0</span>

<span class="token comment">// 点击全选按扭，做相应的全选或取消操作</span>
selectAllButton<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">&quot;selected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// flag为true表示当前是选中状态，false表示取消状态</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 所有复选框全部选中</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      checkButtons<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;selected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>selectedNum <span class="token operator">=</span> len<span class="token punctuation">;</span> <span class="token comment">// 保存当前选中的子元素个数</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 所有复选框都是未选中状态</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      checkButtons<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;selected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>selectedNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 保存当前选中的子元素个数</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 利用事件委托，把复选的点击事件需要处理的事处委托给他的祖先元素 table来处</span>
table<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取真正触发点击事件的元素</span>
  <span class="token keyword">var</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
  <span class="token keyword">var</span> bool <span class="token operator">=</span> target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;check-item&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>bool<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token comment">// 如果被点击的元素身上的className中有check-item类，那就需要处理下面的事情</span>
  <span class="token keyword">var</span> bool2 <span class="token operator">=</span> target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">&quot;selected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 添加 selected时，flag值为true</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>bool2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    selectAllButton<span class="token punctuation">.</span>selectedNum<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token comment">// 选中个数与len相等，说明当前所有复选框全是选中的</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>selectAllButton<span class="token punctuation">.</span>selectedNum <span class="token operator">===</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      selectAllButton<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;selected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    selectAllButton<span class="token punctuation">.</span>selectedNum<span class="token operator">--</span><span class="token punctuation">;</span>
    selectAllButton<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;selected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、案例-5-表单验证提示效果" tabindex="-1"><a class="header-anchor" href="#_3、案例-5-表单验证提示效果" aria-hidden="true">#</a> 3、案例 5：表单验证提示效果</h3><p>涉及知识点</p><ul><li>定时器</li><li>onfocus 和 onblur 事件</li><li>css3 过渡动画</li></ul><p><img src="https://www.arryblog.com/assets/img/GIF-2022-10-23-21-54-01.be6ce2f4.gif" alt="GIF 2022-10-23 21-54-01"></p><h3 id="_3-1、布局实现源码" tabindex="-1"><a class="header-anchor" href="#_3-1、布局实现源码" aria-hidden="true">#</a> 3.1、布局实现源码</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">html,
  body</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">input</span> <span class="token punctuation">{</span>
    <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">body</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.login</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.login .login-row</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 20px 0px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.login .login-row input,
  .login .login-row button</span> <span class="token punctuation">{</span>
    <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #f9f9f9<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
    <span class="token property">padding-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/* JS 操作获取焦点后的样式 */</span>
  <span class="token selector">.login .login-row input.focus1</span> <span class="token punctuation">{</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid tomato<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.login .login-row input.focus2</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #fcf2f3<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">label.label-tip</span> <span class="token punctuation">{</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.4<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all 0.2s ease-out<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/* 动态添加的缩放效果 */</span>
  <span class="token selector">label.label-tip-min</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/* 错误提示 */</span>
  <span class="token selector">.label-error</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> tomato<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.hide</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.password-icon</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./images/eye-close.png<span class="token punctuation">)</span></span> no-repeat<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.eye-open</span> <span class="token punctuation">{</span>
    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./images/eye.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.login .login-row button</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> tomato<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>J_login<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-row<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>account<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>account<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-name<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>account<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>label-tip<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>邮箱/手机号码<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>label-error hide<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>请输入账户名<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-row<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-pwd<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>label-tip<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>密码<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>label-error hide<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>请输入登录密码<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password-icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>J_eye<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login-row<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button-login<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button-login<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      登录
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2、js-实现思路" tabindex="-1"><a class="header-anchor" href="#_3-2、js-实现思路" aria-hidden="true">#</a> 3.2、JS 实现思路</h3><p><strong>第一步：处理文本框获取到焦点时要实现的功能</strong></p><p>获取焦点时</p><ul><li>不关输入框中有内容还是没有内容，文字是缩小的，同时增加红色边框线</li><li>如果没有内容，还需要显示错误提示</li><li>如果有内容，去掉粉色背景，同时隐藏错误提示。</li></ul><p>失去焦点时</p><ul><li>不关输入框中有内容还是没有内容，去掉红色边框线</li><li>如果有内容，不需要再增加其它处理，因为有内容时，获取焦点时就处理过了</li><li>如果没有内容，文字要恢复正常大小，不需要再其它处理，因为在获取焦点时，如果没有内容，错误提示显示出来了。</li></ul><blockquote><ul><li>在输入时，有可能输入内容后又删除了，但 onfocus 只会在获取焦点时触发一次</li><li>所以要开一个<strong>计时器</strong>来定期检查输入内容是否为空，这里采用 requestAnimationFrame 来处理。</li><li>当失去焦点时，就不再调用 requestAnimationFrame，所以我们可以定义一把锁，当获取焦点时开锁，可以一直重复调用 requestAnimationFrame，失去焦点时关锁，不再调用</li></ul></blockquote><p><strong>第二步：处理点击密码框中的小眼睛，闭上与打开要实现的功能</strong></p><ul><li>如果小眼睛关闭状态，点击后打开，然后设置密码输入框<code>type = &#39;text&#39;</code></li><li>如果小眼睛打开状态，点击后关闭，然后设置密码输入框<code>type = &#39;password&#39;</code></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 获取input输入框，然后分别给他们加上获取焦点和失去焦点事件监听</span>
<span class="token keyword">var</span> inputs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;#J_login .login-row input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> eyeButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_eye&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> password <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// false表示锁是开的</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> inputs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  inputs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;focus&quot;</span><span class="token punctuation">,</span> focusFn<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  inputs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;blur&quot;</span><span class="token punctuation">,</span> blurFn<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 获取焦点事件处理函数</span>
<span class="token keyword">function</span> <span class="token function">focusFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token comment">//只要是获取焦点状态，不关是有内容还是没内容，文字都要缩小，同时添加边框线</span>
  <span class="token comment">// 1、缩小文字</span>
  that<span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;label-tip-min&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 2、增加边框线</span>
  that<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;focus1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 每次获取焦点时的那一刻，要解锁</span>
  <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取输入框中的内容</span>
    <span class="token keyword">var</span> value <span class="token operator">=</span> that<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 1、错识提示隐藏</span>
      that<span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;hide&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 2、去掉粉色背景</span>
      that<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;focus2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 3、显示错误提示</span>
      that<span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;hide&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 开锁状态，一直调用</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>lock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 失去焦点事件处理函数</span>
<span class="token keyword">function</span> <span class="token function">blurFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  lock <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取输入框中内容</span>
  <span class="token comment">// 1、移除边框线</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;focus1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 2、添加粉的背景色</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;focus2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//3、文字恢复正常</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;label-tip-min&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 点击眼睛关闭我显示</span>
eyeButton<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> bool <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">&quot;eye-open&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>bool<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    password<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    password<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4、案例-6-放大镜效果" tabindex="-1"><a class="header-anchor" href="#_4、案例-6-放大镜效果" aria-hidden="true">#</a> 4、案例 6：放大镜效果</h3><p>涉及知识点</p><ul><li>选项卡效果、事件代理</li><li>onmouseover、onmousemove 事件</li><li>事件对象：<code>e.pageX</code>、<code>e.pageY</code></li><li>元素偏移尺寸：offsetLeft、offsetTop</li><li>操作图片的 src 属性，完成图片替换</li><li>元素的显示与隐藏、事件冒泡机制</li></ul><p><img src="https://www.arryblog.com/assets/img/GIF2022-11-270-02-04.197d9b0a.gif" alt="GIF2022-11-270-02-04"></p><h3 id="_4-1、css-布局" tabindex="-1"><a class="header-anchor" href="#_4-1、css-布局" aria-hidden="true">#</a> 4.1、CSS 布局</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">html,
  body,
  ul,
  li</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">li</span> <span class="token punctuation">{</span>
    <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.magnifier-preview</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 350px<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ddd<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/* 主图样式 */</span>
  <span class="token selector">.magnifier-preview .main-img</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 350px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> khaki<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.magnifier-preview .main-img img</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 350px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 350px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.magnifier-preview .main-img .mask</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>252<span class="token punctuation">,</span> 245<span class="token punctuation">,</span> 184<span class="token punctuation">,</span> 0.6<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> move<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token comment">/* 一开始要隐藏 */</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.magnifier-preview .small-img</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 85px<span class="token punctuation">;</span>
    <span class="token comment">/* background-color: skyblue; */</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> flex-end<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.magnifier-preview .small-img li</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 75px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 75px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.magnifier-preview .small-img li img</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 75px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 75px<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.active</span> <span class="token punctuation">{</span>
    <span class="token property">outline</span><span class="token punctuation">:</span> 3px solid red<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/* 大图预览样式 */</span>
  <span class="token selector">.magnifier-preview .big-img</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 450px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 475px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.magnifier-preview .big-img img</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>magnifier-preview<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 主图部分 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main-img<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>J_main-img-wrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/big1.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>350<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mask<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 小图部分 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>small-img<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>J_small-img-wrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/small1.jpg<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>75<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/big1.jpg<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/small2.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>75<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/big2.jpg<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/small3.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>75<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/big3.jpg<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/small4.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>75<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/big4.jpg<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 大图预览 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>big-img<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>J_big-img-wrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/big1.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>J_big-img<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2、js-实现思路" tabindex="-1"><a class="header-anchor" href="#_4-2、js-实现思路" aria-hidden="true">#</a> 4.2、JS 实现思路</h3><p><strong>第一步：处理点击小图要实现的效果</strong></p><p>利用事件委托，点击小图后要处理的事情委托给他的们的祖先元素 ul 来处理。</p><blockquote><p>具体代码如下：</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 获取页面中的元素</span>
<span class="token keyword">var</span> smallImgWrap <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_small-img-wrap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 小图容器</span>
<span class="token keyword">var</span> smallImgs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;#J_small-img-wrap li img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 所有小图</span>
<span class="token keyword">var</span> mainImg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#J_main-img-wrap img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 主图</span>
<span class="token keyword">var</span> bigImg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_big-img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 大图</span>
<span class="token keyword">var</span> prevActiveImg <span class="token operator">=</span> smallImgs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 保存当前被选中的小图</span>

<span class="token comment">// 采用事件委托，把所有子元素的click事件需要处理的事情，委托他们的祖先元素来处</span>
smallImgWrap<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
  <span class="token keyword">var</span> tagName <span class="token operator">=</span> target<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>tagName <span class="token operator">!==</span> <span class="token string">&quot;img&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token comment">// 如果是img，接下来就要处理</span>
  <span class="token comment">// 0、把之前选中的图片样式去掉</span>
  prevActiveImg<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 1、给当前点击的图片添加边框</span>
  target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 2、把当前点击的图片更改换为前一个击活的图片</span>
  prevActiveImg <span class="token operator">=</span> target<span class="token punctuation">;</span>
  <span class="token comment">// 3、更换主图 获当前图片上自定义属性data-src的图片地址</span>
  mainImg<span class="token punctuation">.</span>src <span class="token operator">=</span> target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>src<span class="token punctuation">;</span>
  <span class="token comment">// 4、更换大图</span>
  bigImg<span class="token punctuation">.</span>src <span class="token operator">=</span> target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>src<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>第二步：当鼠标滑动到主图容器和离开主图容器要实现的效果</strong></p><ul><li>鼠标滑动到主图容器，要显示透明滑块，同时显示大图容器</li><li>鼠标离开主图容器，要隐藏透明滑块，同时隐藏大图容器</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> mainImgWrap <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_main-img-wrap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mask <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#J_main-img-wrap .mask&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bigImgWrap <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_big-img-wrap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 当鼠标进入到主图区域的时，要处理的事情</span>
mainImgWrap<span class="token punctuation">.</span><span class="token function-variable function">onmouseover</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  mask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;block&quot;</span><span class="token punctuation">;</span>
  bigImgWrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;block&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 当鼠标离开主图区域的时候，要处理的事情</span>
mainImgWrap<span class="token punctuation">.</span><span class="token function-variable function">onmouseout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  mask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>
  bigImgWrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>第三步：实现滑块跟随之鼠标移动，并且块的中心位置为鼠标当前所在位置</strong></p><ul><li>我们要求得滑块相对主图容器的 left 和 top 值</li><li>left 值 = 鼠标与浏览器左边距离 - 主图与浏览器左边距离 - 滑块宽度的一半</li><li>top 值 = 鼠标与浏览器上边距离 - 主图与浏览器上边距离 - 滑块高度的一半</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 当鼠标在主图区域上滑动时，要处理的事情</span>
mainImgWrap<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 鼠标与浏览器左边和顶部距离</span>
  <span class="token keyword">var</span> pageX <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX<span class="token punctuation">;</span>
  <span class="token keyword">var</span> pageY <span class="token operator">=</span> e<span class="token punctuation">.</span>pageY<span class="token punctuation">;</span>
  <span class="token comment">// 主图容器与浏览器左边和上边的距离</span>
  <span class="token keyword">var</span> mainLeft <span class="token operator">=</span> <span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left<span class="token punctuation">;</span>
  <span class="token keyword">var</span> mainTop <span class="token operator">=</span> <span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top<span class="token punctuation">;</span>
  <span class="token comment">// 获取滑块的宽和高</span>
  <span class="token keyword">var</span> maskWidth <span class="token operator">=</span> mask<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span>
  <span class="token keyword">var</span> maskHeight <span class="token operator">=</span> mask<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>

  <span class="token comment">// 计算滑块的left 和 top值</span>
  <span class="token keyword">var</span> left <span class="token operator">=</span> pageX <span class="token operator">-</span> mainLeft <span class="token operator">-</span> maskWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> top <span class="token operator">=</span> pageY <span class="token operator">-</span> mainTop <span class="token operator">-</span> maskHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

  <span class="token comment">// 下面限止滑块滑动的范围，代码写在这里</span>

  <span class="token comment">// 设置滑块的left和top值。</span>
  mask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  mask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> top <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 获取当前元素与浏览器的left和top值</span>
<span class="token keyword">function</span> <span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取当前元素左偏移量</span>
  <span class="token keyword">var</span> left <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
  <span class="token keyword">var</span> top <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
  <span class="token comment">// 获了当前元素的offsetParent</span>
  <span class="token keyword">var</span> parent <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
  <span class="token comment">// 如果 offsetParent 存在，则一直获取,计算他的offsetLeft值，如果不存在，则终止</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    left <span class="token operator">+=</span> parent<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span> <span class="token comment">// 与每一轮元素的父元素与其定位父元素左边距离累加</span>
    top <span class="token operator">+=</span> parent<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
    <span class="token comment">// 计算父元素左边框大小</span>
    style <span class="token operator">=</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    borderLeft <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>style<span class="token punctuation">.</span>borderLeftWidth<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 过滤单位部分，只取数字部分</span>
    borderTop <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>style<span class="token punctuation">.</span>borderTopWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 把左边框累加进去</span>
    left <span class="token operator">+=</span> borderLeft<span class="token punctuation">;</span>
    top <span class="token operator">+=</span> borderTop<span class="token punctuation">;</span>
    parent <span class="token operator">=</span> parent<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 最终返回获取的left值</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">left</span><span class="token operator">:</span> left<span class="token punctuation">,</span> <span class="token literal-property property">top</span><span class="token operator">:</span> top <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>第四步：限止滑块的滑块区域</strong></p><ul><li>滑块能滑动的最小水平距离 = 0 ，最大水平距离 = 主图容器宽 - 滑块宽</li><li>滑块能滑动的最小垂直距离 = 0 ，最大垂距离 = 主图容器高 - 滑块高</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 计算滑块能滑动的最大宽和高,即最大Left值和Top值,添加到mainImgWrap.onmousemove事件中</span>
<span class="token keyword">var</span> maxLeft <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clientWidth <span class="token operator">-</span> maskWidth<span class="token punctuation">;</span> <span class="token comment">// this= mainImgWrap</span>
<span class="token keyword">var</span> maxTop <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> maskHeight<span class="token punctuation">;</span> <span class="token comment">// this= mainImgWrap</span>

<span class="token comment">// 限定元素的left 和 top值</span>
left <span class="token operator">=</span> left <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> left<span class="token punctuation">;</span> <span class="token comment">// 如果小于0，强制拉回为0</span>
left <span class="token operator">=</span> left <span class="token operator">&gt;</span> maxLeft <span class="token operator">?</span> maxLeft <span class="token operator">:</span> left<span class="token punctuation">;</span> <span class="token comment">// 如果大于最大left，则强制拉回为最大Left</span>

top <span class="token operator">=</span> top <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> top<span class="token punctuation">;</span>
top <span class="token operator">=</span> top <span class="token operator">&gt;</span> maxTop <span class="token operator">?</span> maxTop <span class="token operator">:</span> top<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>第五步：处理大图预览的对应移动的位置</strong></p><ul><li>通过以下公式，来求大图对应移动的 left 和 top 值</li><li>滑块滑动的距离 / 滑块能滑动的最大距 = 大图移动的距离 / 大图能移动的最大距离</li><li>图移动的距离=（滑块滑动的距离 / 滑块能移动的最大距离） * 大图能移动的最大距离</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 大图最大滑动水平距离 即 left最大值</span>
<span class="token keyword">var</span> bigMaxLeft <span class="token operator">=</span> bigImg<span class="token punctuation">.</span>clientWidth <span class="token operator">-</span> bigImgWrap<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
<span class="token comment">// 大图最大滑动垂直距离，即top最大值</span>
<span class="token keyword">var</span> bigMaxTop <span class="token operator">=</span> bigImg<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> bigImgWrap<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>

<span class="token keyword">var</span> bigLeft <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">/</span> maxLeft<span class="token punctuation">)</span> <span class="token operator">*</span> bigMaxLeft<span class="token punctuation">;</span>
<span class="token keyword">var</span> bigTop <span class="token operator">=</span> <span class="token punctuation">(</span>top <span class="token operator">/</span> maxTop<span class="token punctuation">)</span> <span class="token operator">*</span> bigMaxTop<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3、完整版代码实现" tabindex="-1"><a class="header-anchor" href="#_4-3、完整版代码实现" aria-hidden="true">#</a> 4.3、完整版代码实现</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// 获取页面中的元素</span>
  <span class="token keyword">var</span> smallImgs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;#J_small-img-wrap li img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> mainImgWrap <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_main-img-wrap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> smallImgWrap <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_small-img-wrap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> bigImg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_big-img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> prevActiveImg <span class="token operator">=</span> smallImgs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 保存当前被选中的小图</span>
  <span class="token keyword">var</span> mainImg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#J_main-img-wrap img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 主图</span>
  <span class="token keyword">var</span> mask <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#J_main-img-wrap .mask&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> bigImgWrap <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_big-img-wrap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 采用事件委托，把所有子元素的click事件需要处理的事情，委托他们的祖先元素来处</span>
  smallImgWrap<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
    <span class="token keyword">var</span> tagName <span class="token operator">=</span> target<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>tagName <span class="token operator">!==</span> <span class="token string">&quot;img&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token comment">// 如果是img，接下来就要处理</span>
    <span class="token comment">// 0、把之前选中的图片样式去掉</span>
    prevActiveImg<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 1、给当前点击的图片添加边框</span>
    target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2、把当前点击的图片更改换为前一个击活的图片</span>
    prevActiveImg <span class="token operator">=</span> target<span class="token punctuation">;</span>
    <span class="token comment">// 3、更换主图</span>
    mainImg<span class="token punctuation">.</span>src <span class="token operator">=</span> target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>src<span class="token punctuation">;</span> <span class="token comment">// 获当前图片上自定义属性data-src的图片地址</span>
    <span class="token comment">// 4、更换大图</span>
    bigImg<span class="token punctuation">.</span>src <span class="token operator">=</span> target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>src<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 当鼠标进入到主图区域的时，要处理的事情</span>
  mainImgWrap<span class="token punctuation">.</span><span class="token function-variable function">onmouseover</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;block&quot;</span><span class="token punctuation">;</span>
    bigImgWrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;block&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 当鼠标离开主图区域的时候，要处理的事情</span>
  mainImgWrap<span class="token punctuation">.</span><span class="token function-variable function">onmouseout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>
    bigImgWrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 当鼠标在主图区域上滑动时，要处理的事情</span>
  mainImgWrap<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 鼠标与浏览器左边和顶部距离</span>
    <span class="token keyword">var</span> pageX <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX<span class="token punctuation">;</span>
    <span class="token keyword">var</span> pageY <span class="token operator">=</span> e<span class="token punctuation">.</span>pageY<span class="token punctuation">;</span>
    <span class="token comment">// 主图容器与浏览器左边和上边的距离</span>
    <span class="token keyword">var</span> mainLeft <span class="token operator">=</span> <span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left<span class="token punctuation">;</span>
    <span class="token keyword">var</span> mainTop <span class="token operator">=</span> <span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top<span class="token punctuation">;</span>
    <span class="token comment">// 获取滑块的宽和高</span>
    <span class="token keyword">var</span> maskWidth <span class="token operator">=</span> mask<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span>
    <span class="token keyword">var</span> maskHeight <span class="token operator">=</span> mask<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>

    <span class="token comment">// 计算滑块的left 和 top值</span>
    <span class="token keyword">var</span> left <span class="token operator">=</span> pageX <span class="token operator">-</span> mainLeft <span class="token operator">-</span> maskWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> top <span class="token operator">=</span> pageY <span class="token operator">-</span> mainTop <span class="token operator">-</span> maskHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

    <span class="token comment">// 计算滑块能滑动的最大宽和高,即最大Left值和Top值</span>
    <span class="token keyword">var</span> maxLeft <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clientWidth <span class="token operator">-</span> maskWidth<span class="token punctuation">;</span>
    <span class="token keyword">var</span> maxTop <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> maskHeight<span class="token punctuation">;</span>

    <span class="token comment">// 限定元素的left 和 top值</span>
    left <span class="token operator">=</span> left <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> left<span class="token punctuation">;</span> <span class="token comment">// 如果小于0，强制拉回为0</span>
    left <span class="token operator">=</span> left <span class="token operator">&gt;</span> maxLeft <span class="token operator">?</span> maxLeft <span class="token operator">:</span> left<span class="token punctuation">;</span> <span class="token comment">// 如果大于最大left，则强制拉回为最大Left</span>

    top <span class="token operator">=</span> top <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> top<span class="token punctuation">;</span>
    top <span class="token operator">=</span> top <span class="token operator">&gt;</span> maxTop <span class="token operator">?</span> maxTop <span class="token operator">:</span> top<span class="token punctuation">;</span>
    mask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    mask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> top <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 处理大图预览</span>
    <span class="token comment">// 滑块滑动的距离 /  滑块能滑动的最大距  =   大图移动的距离  /  大图能移动的最大距离</span>
    <span class="token comment">// 图移动的距离=（滑块滑动的距离 / 滑块能移动的最大距离） * 大图能移动的最大距离</span>

    <span class="token keyword">var</span> bigMaxLeft <span class="token operator">=</span> bigImg<span class="token punctuation">.</span>clientWidth <span class="token operator">-</span> bigImgWrap<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
    <span class="token keyword">var</span> bigMaxTop <span class="token operator">=</span> bigImg<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> bigImgWrap<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>

    <span class="token keyword">var</span> bigLeft <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">/</span> maxLeft<span class="token punctuation">)</span> <span class="token operator">*</span> bigMaxLeft<span class="token punctuation">;</span>
    <span class="token keyword">var</span> bigTop <span class="token operator">=</span> <span class="token punctuation">(</span>top <span class="token operator">/</span> maxTop<span class="token punctuation">)</span> <span class="token operator">*</span> bigMaxTop<span class="token punctuation">;</span>

    <span class="token comment">// 大图的left和top</span>
    bigImg<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span>bigLeft <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    bigImg<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token operator">-</span>bigTop <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 获取当前元素与浏览器的left和top值</span>
  <span class="token keyword">function</span> <span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取当前元素左偏移量</span>
    <span class="token keyword">var</span> left <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
    <span class="token keyword">var</span> top <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
    <span class="token comment">// 获了当前元素的offsetParent</span>
    <span class="token keyword">var</span> parent <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
    <span class="token comment">// 如果 offsetParent 存在，则一直获取,计算他的offsetLeft值，如果不存在，则终止</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      left <span class="token operator">+=</span> parent<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span> <span class="token comment">// 与每一轮元素的父元素与其定位父元素左边距离累加</span>
      top <span class="token operator">+=</span> parent<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
      <span class="token comment">// 计算父元素左边框大小</span>
      style <span class="token operator">=</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      borderLeft <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>style<span class="token punctuation">.</span>borderLeftWidth<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 过滤单位部分，只取数字部分</span>
      borderTop <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>style<span class="token punctuation">.</span>borderTopWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 把左边框累加进去</span>
      left <span class="token operator">+=</span> borderLeft<span class="token punctuation">;</span>
      top <span class="token operator">+=</span> borderTop<span class="token punctuation">;</span>
      parent <span class="token operator">=</span> parent<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 最终返回获取的left值</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">left</span><span class="token operator">:</span> left<span class="token punctuation">,</span> <span class="token literal-property property">top</span><span class="token operator">:</span> top <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4、性能优化版" tabindex="-1"><a class="header-anchor" href="#_4-4、性能优化版" aria-hidden="true">#</a> 4.4、性能优化版</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 第一个功能，点击对应的小图，更对应主图和大图预览中的图片</span>
<span class="token comment">// 获取页面中的元素</span>
<span class="token keyword">var</span> smallImgs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;#J_small-img-wrap li img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mainImgWrap <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_main-img-wrap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> smallImgWrap <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_small-img-wrap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bigImg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_big-img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> prevActiveImg <span class="token operator">=</span> smallImgs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mainImg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#J_main-img-wrap img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 主图</span>
<span class="token keyword">var</span> mask <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#J_main-img-wrap .mask&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bigImgWrap <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_big-img-wrap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 采用事件委托，把所有子元素的click事件需要处理的事情，委托他们的祖先元素来处</span>
<span class="token keyword">var</span> smallImgWrap <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_small-img-wrap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
smallImgWrap<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
  <span class="token keyword">var</span> tagName <span class="token operator">=</span> target<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>tagName <span class="token operator">!==</span> <span class="token string">&quot;img&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token comment">// 如果是img，接下来就要处理</span>
  <span class="token comment">// 0、把之前选中的图片样式去掉</span>
  prevActiveImg<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 1、给图片添加边框</span>
  target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 2、把当前点击的图片更改换为前一个击活的图片</span>
  prevActiveImg <span class="token operator">=</span> target<span class="token punctuation">;</span>
  <span class="token comment">// 2、更换主图</span>
  mainImg<span class="token punctuation">.</span>src <span class="token operator">=</span> target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>src<span class="token punctuation">;</span> <span class="token comment">// 获当前图片上自定义属性data-src的图片地址</span>
  <span class="token comment">// 3、更换大图</span>
  bigImg<span class="token punctuation">.</span>src <span class="token operator">=</span> target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>src<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 鼠标滑动到主图区，要处理的事情</span>
<span class="token comment">// 当鼠标进入到主图区域的时，要处理的事情</span>
<span class="token keyword">var</span> maskWidth<span class="token punctuation">;</span>
<span class="token keyword">var</span> maskHeight<span class="token punctuation">;</span>
<span class="token keyword">var</span> bigMaxLeft<span class="token punctuation">;</span>
<span class="token keyword">var</span> bigMaxTop<span class="token punctuation">;</span>
mainImgWrap<span class="token punctuation">.</span><span class="token function-variable function">onmouseover</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  mask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;block&quot;</span><span class="token punctuation">;</span>
  bigImgWrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;block&quot;</span><span class="token punctuation">;</span>

  <span class="token comment">// 获取滑块的宽和高</span>
  maskWidth <span class="token operator">=</span> mask<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span>
  maskHeight <span class="token operator">=</span> mask<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>

  <span class="token comment">// 大图预览能移动的最left和Top</span>
  bigMaxLeft <span class="token operator">=</span> bigImg<span class="token punctuation">.</span>clientWidth <span class="token operator">-</span> bigImgWrap<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
  bigMaxTop <span class="token operator">=</span> bigImg<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> bigImgWrap<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 当鼠标离开主图区域的时候，要处理的事情</span>
mainImgWrap<span class="token punctuation">.</span><span class="token function-variable function">onmouseout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  mask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>
  bigImgWrap<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 主图容器与浏览器左边和上边的距离</span>
<span class="token keyword">var</span> mainLeft <span class="token operator">=</span> <span class="token function">getPosition</span><span class="token punctuation">(</span>mainImgWrap<span class="token punctuation">)</span><span class="token punctuation">.</span>left<span class="token punctuation">;</span>
<span class="token keyword">var</span> mainTop <span class="token operator">=</span> <span class="token function">getPosition</span><span class="token punctuation">(</span>mainImgWrap<span class="token punctuation">)</span><span class="token punctuation">.</span>top<span class="token punctuation">;</span>
<span class="token keyword">var</span> mainImgWrapWidth <span class="token operator">=</span> mainImgWrap<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
<span class="token keyword">var</span> mainImgWrapHeight <span class="token operator">=</span> mainImgWrap<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>

<span class="token comment">// 当鼠标在主图区域上滑动时，要处理的事情</span>
<span class="token comment">// 优化点一：针对mousemove做节流操作</span>
mainImgWrap<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 鼠标与浏览器左边和顶部距离</span>
  <span class="token keyword">var</span> pageX <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX<span class="token punctuation">;</span>
  <span class="token keyword">var</span> pageY <span class="token operator">=</span> e<span class="token punctuation">.</span>pageY<span class="token punctuation">;</span>
  <span class="token comment">// 主图容器与浏览器左边和上边的距离</span>
  <span class="token comment">// var mainLeft = getPosition(this).left;</span>
  <span class="token comment">// var mainTop = getPosition(this).top;</span>
  <span class="token comment">// 获取滑块的宽和高</span>
  <span class="token comment">// var maskWidth = mask.offsetWidth;</span>
  <span class="token comment">// var maskHeight = mask.offsetHeight;</span>

  <span class="token comment">// 计算滑块的left 和 top值</span>
  <span class="token keyword">var</span> left <span class="token operator">=</span> pageX <span class="token operator">-</span> mainLeft <span class="token operator">-</span> maskWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> top <span class="token operator">=</span> pageY <span class="token operator">-</span> mainTop <span class="token operator">-</span> maskHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> maxLeft <span class="token operator">=</span> mainImgWrapWidth <span class="token operator">-</span> maskWidth<span class="token punctuation">;</span>
  <span class="token keyword">var</span> maxTop <span class="token operator">=</span> mainImgWrapHeight <span class="token operator">-</span> maskHeight<span class="token punctuation">;</span>

  <span class="token comment">// 限定元素的left 和 top值</span>
  left <span class="token operator">=</span> left <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> left<span class="token punctuation">;</span> <span class="token comment">// 如果小于0，强制拉回为0</span>
  left <span class="token operator">=</span> left <span class="token operator">&gt;</span> maxLeft <span class="token operator">?</span> maxLeft <span class="token operator">:</span> left<span class="token punctuation">;</span> <span class="token comment">// 如果大于最大left，则强制拉回为最大Left</span>

  top <span class="token operator">=</span> top <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> top<span class="token punctuation">;</span>
  top <span class="token operator">=</span> top <span class="token operator">&gt;</span> maxTop <span class="token operator">?</span> maxTop <span class="token operator">:</span> top<span class="token punctuation">;</span>
  mask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  mask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> top <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>

  <span class="token comment">// 处理大图预览</span>
  <span class="token comment">// 滑块滑动的距离 /  滑块能滑动的最大距  =   大图移动的距离  /  大图能移动的最大距离</span>
  <span class="token comment">// 图移动的距离=（滑块滑动的距离 / 滑块能移动的最大距离） * 大图能移动的最大距离</span>

  <span class="token comment">// var bigMaxLeft = bigImg.clientWidth - bigImgWrap.clientWidth;</span>
  <span class="token comment">// var bigMaxTop = bigImg.clientHeight - bigImgWrap.clientHeight;</span>

  <span class="token keyword">var</span> bigLeft <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">/</span> maxLeft<span class="token punctuation">)</span> <span class="token operator">*</span> bigMaxLeft<span class="token punctuation">;</span>
  <span class="token keyword">var</span> bigTop <span class="token operator">=</span> <span class="token punctuation">(</span>top <span class="token operator">/</span> maxTop<span class="token punctuation">)</span> <span class="token operator">*</span> bigMaxTop<span class="token punctuation">;</span>

  <span class="token comment">// 大图的left和top</span>
  bigImg<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span>bigLeft <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  bigImg<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token operator">-</span>bigTop <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取当前元素左偏移量</span>
  <span class="token keyword">var</span> left <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
  <span class="token keyword">var</span> top <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
  <span class="token comment">// 获了当前元素的offsetParent</span>
  <span class="token keyword">var</span> parent <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
  <span class="token comment">// 如果 offsetParent 存在，则一直获取,计算他的offsetLeft值，如果不存在，则终止</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    left <span class="token operator">+=</span> parent<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span> <span class="token comment">// 与每一轮元素的父元素与其定位父元素左边距离累加</span>
    top <span class="token operator">+=</span> parent<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
    <span class="token comment">// 计算父元素左边框大小</span>
    style <span class="token operator">=</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    borderLeft <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>style<span class="token punctuation">.</span>borderLeftWidth<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 过滤单位部分，只取数字部分</span>
    borderTop <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>style<span class="token punctuation">.</span>borderTopWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 把左边框累加进去</span>
    left <span class="token operator">+=</span> borderLeft<span class="token punctuation">;</span>
    top <span class="token operator">+=</span> borderTop<span class="token punctuation">;</span>
    parent <span class="token operator">=</span> parent<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 最终返回获取的left值</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">left</span><span class="token operator">:</span> left<span class="token punctuation">,</span> <span class="token literal-property property">top</span><span class="token operator">:</span> top <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 节流操作</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">20</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// null表示当前锁是打开的，没有锁，可以执行事件处理函数中的代码</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// 保存this 绑定事件的对象</span>
    <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span> <span class="token comment">// 保存arguments 主要用来获取事件对象 e</span>
    <span class="token comment">// 定时器计时，用来开锁</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 事件处理函数</span>
      timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 开锁</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="八、手写防抖函数-经典面试题" tabindex="-1"><a class="header-anchor" href="#八、手写防抖函数-经典面试题" aria-hidden="true">#</a> 八、手写防抖函数（经典面试题）</h2><p>工作能力 ≠ 面试能力，在学习和面试之前刻意练习，强化训练。聚焦前端面试必考的刚需内容，掌握解决面试题的思路、技巧与方法论。</p><p>接下来我们学习一个非常重要的知识，如何实现 JS 防抖。在实际的开发中也是经常用到，在面试中也是必问的。所以这个知识点是我们必需要掌握的一个核心知识点。</p><blockquote><p>以下公司面试中问到如何手写防抖函数（商汤、同花顺、广联达、百度、小红书、知乎、小米、字节）</p></blockquote><h3 id="_1、什么是防抖" tabindex="-1"><a class="header-anchor" href="#_1、什么是防抖" aria-hidden="true">#</a> 1、什么是防抖 ？</h3><ul><li>是指只有在间隔时间达到规定时间后才会执行一次真正的事件处理函数</li><li>如果在规定时间内再次触发事件，则会重新计时。</li></ul><p>接下来我们通过一个经典的<strong>防抖案例：搜索查询</strong>来作为切入点展开讲解。</p><p><strong>搜索查询 - 功能需求</strong></p><p>当我们在表单中输入内容时，希望在抬起键盘间隔<code>500ms</code>毫秒之后，获取输入框中输入的内容，然后再在事件处事函数中向后台发送请求，请求查询。</p><h3 id="_2、搜索查询-未实现防抖前效果" tabindex="-1"><a class="header-anchor" href="#_2、搜索查询-未实现防抖前效果" aria-hidden="true">#</a> 2、搜索查询 - 未实现防抖前效果</h3><ul><li>我们想要在键盘起后，获取输入框中的内容，然后再发送请求，请求查询</li><li>我们可以通过 keyup 事件来处理，但是当我们抬起键盘的那一刻就会触发 keup 事件</li><li>也就意味着我每输一个字，就会触发一次 keyup 事件</li></ul><blockquote><p>具体代码如下：</p></blockquote><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>搜索查询<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>search<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> search <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;search&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  search<span class="token punctuation">.</span><span class="token function-variable function">onkeyup</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取输入框内容，向后台发请求查询</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ....发送请求代码省略</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.arryblog.com/assets/img/GIF-2022-10-26-1-34-17.dcacc6ae.gif" alt="GIF 2022-10-26 1-34-17"></p><p>以上写法存在问题</p><ul><li>以上效果肯定不是我们想要的，因为事件处理函数的执行频率太高了。</li></ul><p><strong>期望效果</strong></p><ul><li>我们希望的是在我们抬起键盘<code>500ms</code>后，才真正的执行一次事件处理函数中的代码。</li><li>如果在<code>500ms</code>以内，再次输入内容，则会重新计时，不会执行事件处理函数中的代码。</li></ul><h3 id="_3、搜索查询-实现防抖后效果" tabindex="-1"><a class="header-anchor" href="#_3、搜索查询-实现防抖后效果" aria-hidden="true">#</a> 3、搜索查询 - 实现防抖后效果</h3><p><strong>实现逻辑</strong></p><ul><li>我们可以通过一个定时器来计时， 然后在定时器到达指定时间后，就执行事件处理函数中代码，向后台发送请求，请求查询</li><li>如果在定时器没有达到指定时间内，再次触发 keyup 事件，就把上一次的定时器清除掉，重新再开一个定时器重新计时</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>搜索查询<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>search<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> search <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;search&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  search<span class="token punctuation">.</span><span class="token function-variable function">onkeyup</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token comment">// 开启定时器</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 获取输入框内容，向后台发请求查询</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// ....发送请求代码省略</span>
      timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 这里很多人有争议，要不要置空</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.arryblog.com/assets/img/GIF-2022-10-26-1-32-13.22c21dbd.gif" alt="GIF 2022-10-26 1-32-13"></p><h3 id="_4、抽离防抖相关代码-封装成防抖函数" tabindex="-1"><a class="header-anchor" href="#_4、抽离防抖相关代码-封装成防抖函数" aria-hidden="true">#</a> 4、抽离防抖相关代码，封装成防抖函数</h3><p>上一步代码中的如下代码</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ....发送请求代码省略</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>是事件触发时真正要执行的代码，我们把抽离出来封装在函数<code>eventFn</code>中，在没有实现防抖前，<strong>eventFn 为真正的事件处理函数</strong>。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">eventFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ....发送请求代码省略</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上一步代码中的<code>fn 函数</code>是用来处理<strong>防抖的函数</strong>，也就是我们真正需要封装的防抖函数，我们把 fn 改名为<code>debounce</code>，<code>debounce</code>为防抖的意思</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> search <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;search&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  search<span class="token punctuation">.</span><span class="token function-variable function">onkeyup</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token comment">// 开启定时器</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">eventFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 这里很多人有争议，要不要置空</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 搜索查事件处理函数</span>
  <span class="token keyword">function</span> <span class="token function">eventFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取输入框内容，向后台发请求查询</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ....发送请求代码省略</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上 debounce 防抖函数显然还有很多不足（比如不能通用），需要我们来进一步优化</p><p><strong>下一步 debounce 函数优化点</strong></p><ul><li>timer 要放在 debounce 函数体内</li><li>在 debounce 函数体内，eventFn 事件处理函数名不能写死，要让用户自己来定义，通过参数传进去</li><li>debounce 函数体内的定时器的延次时间也不能写死，要让用户自己来定义</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>搜索查询<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>search<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> search <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;search&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  search<span class="token punctuation">.</span>onkeyup <span class="token operator">=</span> <span class="token function">debounce</span><span class="token punctuation">(</span>eventFn<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用防抖函数</span>

  <span class="token doc-comment comment">/**
   * debounce 防抖函数
   * fn 事件处理函数
   * delay 定时器的延迟时间
   */</span>
  <span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token comment">// 开启定时器</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 这里很多人有争议，要不要置空</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 搜索查事件处理函数</span>
  <span class="token keyword">function</span> <span class="token function">eventFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取输入框内容，向后台发请求查询</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ....发送请求代码省略</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>再进一步优化 - 最终版</strong></p><ul><li>denounce 函数内调用的 fn 事件处理函数中的 this 和 事件对象 e 是有问题的</li><li><code>fn()</code>直接调用，内部 this 肯定指向的是 window，同时事件对象 e 被丢失了</li><li>所以我们要修改<code>fn()</code>时，内部的 this 指向，同时把事件对象 e 传递进去。</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>搜索查询<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>search<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> search <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;search&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  search<span class="token punctuation">.</span>onkeyup <span class="token operator">=</span> <span class="token function">debounce</span><span class="token punctuation">(</span>eventFn<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token doc-comment comment">/**
   * debounce 防抖函数
   * fn 事件处理函数
   * delay 定时器的延迟时间
   */</span>
  <span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
      <span class="token comment">// 开启定时器</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 这里很多人有争议，要不要置空</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 搜索查事件处理函数</span>
  <span class="token keyword">function</span> <span class="token function">eventFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取输入框内容，向后台发请求查询</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ....发送请求代码省略</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、es5-版本-防抖函数" tabindex="-1"><a class="header-anchor" href="#_5、es5-版本-防抖函数" aria-hidden="true">#</a> 5、ES5 版本 - 防抖函数</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
   * debounce 防抖函数
   * <span class="token keyword">@param</span> <span class="token parameter">fn</span> 事件处理函数
   * <span class="token keyword">@param</span> <span class="token parameter">delay</span> 延迟时间
  */</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay<span class="token operator">=</span><span class="token number">200</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token comment">// 以下是每次需要执行的代码</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
        <span class="token comment">// 开启定时器</span>
        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 这里很多人有争议，要不要置空</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6、es6-版本-防抖函数" tabindex="-1"><a class="header-anchor" href="#_6、es6-版本-防抖函数" aria-hidden="true">#</a> 6、ES6 版本 - 防抖函数</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * debounce 防抖函数
 * <span class="token keyword">@param</span> <span class="token parameter">fn</span> 事件处理函数
 * <span class="token keyword">@param</span> <span class="token parameter">delay</span> 延迟时间
 */</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">200</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token comment">// 以下是每次需要执行的代码</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 开启定时器</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
      timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 这里很多人有争议，要不要置空</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7、区分防抖与节流" tabindex="-1"><a class="header-anchor" href="#_7、区分防抖与节流" aria-hidden="true">#</a> 7、区分防抖与节流</h3><p>不同点</p><ul><li>节流：不管事件触发有多频繁，都会保证在规定时间内执行一次真正的事件处理函数</li><li>防抖：只有在间隔时间达到规定时间后才会执行一次真正的事件处理函数，如果在规定时间内再次触发事件，则会重新计时。</li></ul><p><strong>相同点</strong></p><ul><li>都可通通过使用 setTimeout 来实现</li><li>都是降低真正的事件处理函数的执行频率，达到节省计算资 源，减少性能的消耗</li></ul><p><strong>节流应用场景</strong></p><ul><li>搜索框输入查询、手机号、邮箱验证输入检测。</li><li>resize 事件，只需在窗口调整完后，计算窗口大小，防止重复渲染</li></ul><p><strong>防抖应用场景</strong></p><ul><li>scroll 滚动事件，判断是否滚动到页面底部，自动加载更多内容</li><li>mousemove 事件，当拖拽页面元素，或鼠标根随效果</li><li>防止高频点击提交，防止表单重复提交</li></ul><h2 id="九、重难点总结" tabindex="-1"><a class="header-anchor" href="#九、重难点总结" aria-hidden="true">#</a> 九、重难点总结</h2><p>总结本章重难点知识，理清思路，把握重难点。并能轻松回答以下问题，说明自己就真正的掌握了。</p><p>用于故而知新，快速复习。</p><h3 id="_1、重点" tabindex="-1"><a class="header-anchor" href="#_1、重点" aria-hidden="true">#</a> 1、重点</h3><ul><li>1、掌握 setTimeout 和 setInterval 的用法，及如何清除定时器</li><li>2、理解同步与异步</li><li>3、定时器的延时和丢帧问题</li><li>4、requestAnimationFrame 的用法和优点和兼容处理</li><li>5、常握过渡事件和动画事件</li></ul><h3 id="_2、难点" tabindex="-1"><a class="header-anchor" href="#_2、难点" aria-hidden="true">#</a> 2、难点</h3><ul><li>1、封装动画函数</li><li>2、封装拖拽函数</li><li>3、手写防抖和节流函数</li><li>4、手写以下案例 <ul><li>带左右按扭的自动轮播图</li><li>转盘抽奖</li><li>红包雨</li><li>拖拽交换两元素位置</li><li>键盘控制元素运动</li><li>表单全选和取消</li><li>表单验证提示效果</li><li>放大镜效果</li></ul></li></ul></div></div><footer class="page-meta"><div class="meta-item edit-link"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M2 26h28v2H2z" fill="currentColor"></path><path d="M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->修改此页面<!--]--></span></span></div><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->最后一次修改 2024/1/12 17:31:47<!--]--></span></span></div></footer><nav class="page-nav"><p class="hasPrev hasNext inner"><span class="page-nav-item prev"> ← JavaScript DOM 样式 与 节点操作</span><span class="page-nav-item next">JavaScript 鼠标事件 和 HTML5 拖拽事件的综合应用 → </span></p></nav><!----></main><!--]--><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#一、定时器与延时器" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="一、定时器与延时器"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->一、定时器与延时器<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_1、setinterval-与-clearinterval" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="1、setInterval() 与 clearInterval()"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->1、setInterval() 与 clearInterval()<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_2、settimeout-与-cleartimeout" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2、setTimeout() 与 clearTimeout()"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2、setTimeout() 与 clearTimeout()<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_3、定时器中-this-问题" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3、定时器中 this 问题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3、定时器中 this 问题<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_4、队列" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4、队列"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4、队列<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_4-1、用-js-来实现一个队列" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4.1、用 JS 来实现一个队列"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4.1、用 JS 来实现一个队列<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_4-2、优化版本" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4.2、优化版本"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4.2、优化版本<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_5、单线程、同步与异步" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5、单线程、同步与异步"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5、单线程、同步与异步<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_5-1、第一种情况-同步执行任务" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5.1、第一种情况：同步执行任务"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5.1、第一种情况：同步执行任务<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_5-2、第二种情况-同步与异步结合执行任务" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5.2、第二种情况：同步与异步结合执行任务"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5.2、第二种情况：同步与异步结合执行任务<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_5-3、js-执行中遇到异步任务如何处理" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5.3、JS 执行中遇到异步任务如何处理"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5.3、JS 执行中遇到异步任务如何处理<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_5-4、setinterval-和-settimeout-是两个异步语句" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5.4、setInterval 和 setTimeout 是两个异步语句"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5.4、setInterval 和 setTimeout 是两个异步语句<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_5-5、异步的应用场景" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5.5、异步的应用场景"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5.5、异步的应用场景<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_6、定时器实现动画" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6、定时器实现动画"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6、定时器实现动画<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_6-1、案例-1-实现变色小球" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6.1、案例 1：实现变色小球"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6.1、案例 1：实现变色小球<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_6-2、案例-2-匀速运动-向右" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6.2、案例 2：匀速运动 - 向右"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6.2、案例 2：匀速运动 - 向右<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_6-3、案例-3-匀速水平-向左或向右" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6.3、案例 3：匀速水平（向左或向右）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6.3、案例 3：匀速水平（向左或向右）<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_6-4、案例-3-减速运动-向右" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6.4、案例 3：减速运动 - 向右"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6.4、案例 3：减速运动 - 向右<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_6-5、案例-4-减速运动-水平-向左或向右" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6.5、案例 4：减速运动 - 水平（向左或向右）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6.5、案例 4：减速运动 - 水平（向左或向右）<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_6-6、案例-6-动画函数添加回调函数" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6.6、案例 6：动画函数添加回调函数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6.6、案例 6：动画函数添加回调函数<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_6-7、案例-7-多属性减速运动" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6.7、案例 7：多属性减速运动"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6.7、案例 7：多属性减速运动<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_6-8、案例-8-限定时间动画" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6.8、案例 8：限定时间动画"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6.8、案例 8：限定时间动画<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_6-9、案例-9-多属性限定时间动画" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6.9、案例 9：多属性限定时间动画"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6.9、案例 9：多属性限定时间动画<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_7、带左右按扭的自动切换轮播效果" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="7、带左右按扭的自动切换轮播效果"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->7、带左右按扭的自动切换轮播效果<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#二、定时器延迟执行与丢帧问题" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="二、定时器延迟执行与丢帧问题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->二、定时器延迟执行与丢帧问题<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_1、屏幕刷新频率" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="1、屏幕刷新频率"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->1、屏幕刷新频率<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_2、动画实现原理" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2、动画实现原理"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2、动画实现原理<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_3、setinterval-实现动画原理" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3、setInterval 实现动画原理"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3、setInterval 实现动画原理<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_4、settimeout-实现动画原理" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4、setTimeout 实现动画原理"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4、setTimeout 实现动画原理<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_5、动画动画卡顿、抖动现象" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5、动画动画卡顿、抖动现象"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5、动画动画卡顿、抖动现象<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_6、总结-定时器执行动画卡顿、抖动原理" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6、总结：定时器执行动画卡顿、抖动原理"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6、总结：定时器执行动画卡顿、抖动原理<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#三、requestanimationframe" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="三、requestAnimationFrame"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->三、requestAnimationFrame<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_1、requestanimationframe-用法" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="1、requestAnimationFrame 用法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->1、requestAnimationFrame 用法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_2、requestanimationframe-实现动画原理" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2、requestAnimationFrame 实现动画原理"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2、requestAnimationFrame 实现动画原理<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_3、cancelanimationframe" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3、cancelAnimationFrame"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3、cancelAnimationFrame<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_4、requestanimationframe-注意事项" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4、requestAnimationFrame 注意事项"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4、requestAnimationFrame 注意事项<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_5、requestanimationframe-方法实现动画" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5、requestAnimationFrame 方法实现动画"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5、requestAnimationFrame 方法实现动画<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_6、优雅降级-处理兼容问题" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6、优雅降级 - 处理兼容问题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6、优雅降级 - 处理兼容问题<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#四、函数节流-经典面试题" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="四、函数节流（经典面试题）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->四、函数节流（经典面试题）<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_1、未节流前-mousemove-事件处理函数的执行次数" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="1、未节流前，mousemove 事件处理函数的执行次数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->1、未节流前，mousemove 事件处理函数的执行次数<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_2、对-mousemove-事件处理函数执行节流操作后-其执行次数" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2、对 mousemove 事件处理函数执行节流操作后，其执行次数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2、对 mousemove 事件处理函数执行节流操作后，其执行次数<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_3、抽离节流相关代码-封装成节流函数" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3、抽离节流相关代码，封装成节流函数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3、抽离节流相关代码，封装成节流函数<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_4、es5-版本-节流函数" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4、ES5 版本 - 节流函数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4、ES5 版本 - 节流函数<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_5、es6-版本-节流函数" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5、ES6 版本 - 节流函数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5、ES6 版本 - 节流函数<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_6、案例-规定时间内只能操作一次" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6、案例：规定时间内只能操作一次"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6、案例：规定时间内只能操作一次<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#五、css3-动画效果开发" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="五、CSS3 动画效果开发"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->五、CSS3 动画效果开发<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_1、js-结合-css3-的-transition-实现动画" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="1、JS 结合 CSS3 的 transition 实现动画"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->1、JS 结合 CSS3 的 transition 实现动画<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_2、动画的优化" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2、动画的优化"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2、动画的优化<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_3、过渡事件" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3、过渡事件"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3、过渡事件<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_4、利用-transitionend-事件-优化最开始的双向切换动画" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4、利用 transitionend 事件，优化最开始的双向切换动画"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4、利用 transitionend 事件，优化最开始的双向切换动画<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_5、二级伸缩菜单" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5、二级伸缩菜单"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5、二级伸缩菜单<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_6、动画事件" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6、动画事件"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6、动画事件<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_7、案例-1-js-结合-css3-实现转盘抽奖" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="7、案例 1：JS 结合 CSS3 实现转盘抽奖"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->7、案例 1：JS 结合 CSS3 实现转盘抽奖<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_8、案例-2-js-结合-css3-实现红包雨" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="8、案例 2：JS 结合 CSS3 实现红包雨"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->8、案例 2：JS 结合 CSS3 实现红包雨<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_8-1、布局实现思路" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="8.1、布局实现思路"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->8.1、布局实现思路<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_8-2、js-实现思路" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="8.2、JS 实现思路"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->8.2、JS 实现思路<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_8-3、完整源代码" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="8.3、完整源代码"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->8.3、完整源代码<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#六、js-实现拖拽动画" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="六、JS 实现拖拽动画"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->六、JS 实现拖拽动画<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_1、案例-1-拖拽动画" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="1、案例 1：拖拽动画"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->1、案例 1：拖拽动画<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_1-1、封装-drag-方法-一" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="1.1、封装 drag 方法 一"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->1.1、封装 drag 方法 一<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_1-2、封装-drag-方法-二" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="1.2、封装 drag 方法 二"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->1.2、封装 drag 方法 二<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_2、案例-2-拖拽交换两元素位置" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2、案例 2：拖拽交换两元素位置"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2、案例 2：拖拽交换两元素位置<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_2-1、布局实现" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2.1、布局实现"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.1、布局实现<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_2-2、布局转换" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2.2、布局转换"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.2、布局转换<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_2-3、js-实现-拖拽效果" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2.3、JS 实现：拖拽效果"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.3、JS 实现：拖拽效果<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_2-4、js-实现-碰撞检测-同时找出碰撞元素中离自己最近的元素" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2.4、JS 实现：碰撞检测，同时找出碰撞元素中离自己最近的元素"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.4、JS 实现：碰撞检测，同时找出碰撞元素中离自己最近的元素<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_2-5、js-实现-在碰上时-松开鼠标-交换两元素位置" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2.5、JS 实现：在碰上时，松开鼠标，交换两元素位置"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.5、JS 实现：在碰上时，松开鼠标，交换两元素位置<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_2-6、js-实现-元素过渡动画结束后要处理的事" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2.6、JS 实现：元素过渡动画结束后要处理的事"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.6、JS 实现：元素过渡动画结束后要处理的事<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_2-7、完整版代码" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2.7、完整版代码"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.7、完整版代码<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#七、综合应用实践案例" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="七、综合应用实践案例"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->七、综合应用实践案例<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_1、案例-3-键盘控制元素运动" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="1、案例 3：键盘控制元素运动"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->1、案例 3：键盘控制元素运动<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_2、案例-4-表单全选和取消" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2、案例 4：表单全选和取消"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2、案例 4：表单全选和取消<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_2-1、布局实现源码" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2.1、布局实现源码"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.1、布局实现源码<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_2-2、js-实现思路" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2.2、JS 实现思路"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.2、JS 实现思路<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_3、案例-5-表单验证提示效果" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3、案例 5：表单验证提示效果"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3、案例 5：表单验证提示效果<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_3-1、布局实现源码" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3.1、布局实现源码"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3.1、布局实现源码<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_3-2、js-实现思路" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3.2、JS 实现思路"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3.2、JS 实现思路<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_4、案例-6-放大镜效果" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4、案例 6：放大镜效果"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4、案例 6：放大镜效果<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_4-1、css-布局" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4.1、CSS 布局"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4.1、CSS 布局<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_4-2、js-实现思路" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4.2、JS 实现思路"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4.2、JS 实现思路<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_4-3、完整版代码实现" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4.3、完整版代码实现"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4.3、完整版代码实现<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_4-4、性能优化版" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4.4、性能优化版"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4.4、性能优化版<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#八、手写防抖函数-经典面试题" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="八、手写防抖函数（经典面试题）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->八、手写防抖函数（经典面试题）<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_1、什么是防抖" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="1、什么是防抖 ？"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->1、什么是防抖 ？<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_2、搜索查询-未实现防抖前效果" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2、搜索查询 - 未实现防抖前效果"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2、搜索查询 - 未实现防抖前效果<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_3、搜索查询-实现防抖后效果" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3、搜索查询 - 实现防抖后效果"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3、搜索查询 - 实现防抖后效果<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_4、抽离防抖相关代码-封装成防抖函数" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4、抽离防抖相关代码，封装成防抖函数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4、抽离防抖相关代码，封装成防抖函数<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_5、es5-版本-防抖函数" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5、ES5 版本 - 防抖函数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5、ES5 版本 - 防抖函数<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_6、es6-版本-防抖函数" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6、ES6 版本 - 防抖函数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6、ES6 版本 - 防抖函数<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_7、区分防抖与节流" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="7、区分防抖与节流"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->7、区分防抖与节流<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#九、重难点总结" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="九、重难点总结"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->九、重难点总结<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_1、重点" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="1、重点"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->1、重点<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/javascript/JavaScript dingshiqi、yanshiqi、CSS3 donghuashijian，fangdoujieliu.html#_2、难点" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2、难点"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2、难点<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--]--></ul></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/xunyu-blog/assets/app-e6acbbcc.js" defer></script>
  </body>
</html>
