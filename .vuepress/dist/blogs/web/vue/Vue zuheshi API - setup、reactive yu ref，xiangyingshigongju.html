<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <link rel="icon" href="favicon.ico"><title>Vue 组合式 API - setup、reactive 与 ref，响应式工具 | xunyublog</title><meta name="description" content="用代码将梦想照进现实">
    <link rel="modulepreload" href="/xunyu-blog/assets/app-3a073675.js"><link rel="modulepreload" href="/xunyu-blog/assets/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html-58d5b988.js"><link rel="modulepreload" href="/xunyu-blog/assets/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html-e11094f7.js"><link rel="prefetch" href="/xunyu-blog/assets/index.html-0a05feab.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-8c2edf06.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-4b3ba946.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-47172bd3.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-7e2fe36f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-17c6444b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-ee5a3abc.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-7c68cf3f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-f9835b2a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-ce0d065c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-103e2208.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-c10c52d6.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-5d7f901a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-cfdaadf7.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-2a4bf96c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-0b0463a7.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-953f98a2.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-6599e18f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-6cf06f14.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-1a88d37b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-c8e98ed0.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-c8aebd6c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/api.html-f1aa8008.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/home.html-b763c7d1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/plugin.html-b911482d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/theme.html-cfc3d2cc.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-1065dd3d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-a6dbeb12.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/meirimianshiti.html-af6c423e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-1d33ca8a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-28d0f9d0.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-82edc2d6.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-b0da4c7a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Pinia quanjuzhuangtaiguanli，shenru State、Getter、Action.html-79f7b0d1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue Router daohangshouwei、guoduyugundong、lanjiazai、dongtailuyou.html-dc7d00e8.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue Router luyouchuancan、bieming、pipeiyufa、bianchengshidaohang.html-84bfeff7.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue Router luyou，qianhouduanluyouyuanli yu jutishixian.html-40cbc854.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zhong Transition he TransitionGroup zujian，shijianyingyong.html-1fb676fb.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zhongde Teleport nazhizujian.html-0472604b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue xiongdizujianjiantongxin、fabuyudingyue，dongtai、yibuzujian.html-63478471.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue danwenjianzujian，fuzizujianjianchuanzhi、tongxin，touchuanshuxing.html-aff7db75.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue jichu - mobanyufa、shijianchuli、jisuanshuxing、zhentingqi.html-d2004456.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue jichu - biaodan、yangshibangding，tiaojian、liebiaoxuanran、zhiling.html-ad9bed7f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue chajiankaifa，Element Plus、VantUI zujiankushijianyingyong.html-57714fd7.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue chacao Slots，zidingyidanchuang、gaojiliebiaozujian，yilaizhuru.html-ed566494.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue xuanranjizhi - xuni DOM，render、h hanshu，xuanranliucheng.html-70c99bd7.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue shengmingzhouqi、zidingyizhiling、mobanyinyongdeyuanliyushijian.html-de3297cb.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zuheshi API - ref，tongxin API，yilaizhuru，shengmingzhouqi.html-7c75eefe.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zuheshi API - watch he watchEffect、zidingyizhiling.html-bd22510f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-c55543e8.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-d9b1b86b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-d7c02de1.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-ba6e2c8e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-99dd158e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-1dd64d0a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-858bda73.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-5039310f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-669b4555.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-703e4a8a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-962c260b.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-1a61635c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-edc49a43.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-b47c95f6.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-0dd09a6e.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-a59c658d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-75c93a8c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-604b8b88.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-5e64ef19.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-83702b2f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-496e211a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-c46fd736.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/api.html-e941db12.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/home.html-28d531ff.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/plugin.html-deac4af8.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/theme.html-4298f536.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-e9309f97.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-78fc0847.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/meirimianshiti.html-6f96ebbf.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-43562c60.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-c2f8468d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-63e9933a.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/index.html-95e79363.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Pinia quanjuzhuangtaiguanli，shenru State、Getter、Action.html-0eabe8cf.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue Router daohangshouwei、guoduyugundong、lanjiazai、dongtailuyou.html-529d33f9.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue Router luyouchuancan、bieming、pipeiyufa、bianchengshidaohang.html-28810561.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue Router luyou，qianhouduanluyouyuanli yu jutishixian.html-3b95ded4.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zhong Transition he TransitionGroup zujian，shijianyingyong.html-b2fe2c13.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zhongde Teleport nazhizujian.html-df043717.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue xiongdizujianjiantongxin、fabuyudingyue，dongtai、yibuzujian.html-61258b3c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue danwenjianzujian，fuzizujianjianchuanzhi、tongxin，touchuanshuxing.html-eaa37a4d.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue jichu - mobanyufa、shijianchuli、jisuanshuxing、zhentingqi.html-a59e34a4.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue jichu - biaodan、yangshibangding，tiaojian、liebiaoxuanran、zhiling.html-3bdbb366.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue chajiankaifa，Element Plus、VantUI zujiankushijianyingyong.html-4060a531.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue chacao Slots，zidingyidanchuang、gaojiliebiaozujian，yilaizhuru.html-7fd156fd.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue xuanranjizhi - xuni DOM，render、h hanshu，xuanranliucheng.html-23878ebe.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue shengmingzhouqi、zidingyizhiling、mobanyinyongdeyuanliyushijian.html-1e9a815c.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zuheshi API - ref，tongxin API，yilaizhuru，shengmingzhouqi.html-f126c03f.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/Vue zuheshi API - watch he watchEffect、zidingyizhiling.html-93c18142.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/404.html-c14df4c4.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/reco-valine-a195b6e9.js" as="script"><link rel="prefetch" href="/xunyu-blog/assets/giscus-2a044aea-497f0bd4.js" as="script">
    <link rel="preload" href="/xunyu-blog/assets/style-9fd72ae1.css" as="style"><link rel="stylesheet" href="/xunyu-blog/assets/style-9fd72ae1.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper show-series show-catalog"><header class="navbar-container" style="top:0;"><div class="site-brand nav-item"><img class="logo" src="/xunyu-blog/logo.jpg" alt="xunyublog"><a href="/xunyu-blog/" class="site-name can-hide">xunyublog</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/xunyu-blog/" class="link router-link-active" aria-label="主页"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16.612 2.214a1.01 1.01 0 0 0-1.242 0L1 13.419l1.243 1.572L4 13.621V26a2.004 2.004 0 0 0 2 2h20a2.004 2.004 0 0 0 2-2V13.63L29.757 15L31 13.428zM18 26h-4v-8h4zm2 0v-8a2.002 2.002 0 0 0-2-2h-4a2.002 2.002 0 0 0-2 2v8H6V12.062l10-7.79l10 7.8V26z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->主页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="前端学习笔记"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 2H8a2 2 0 0 0-2 2v4H4v2h2v5H4v2h2v5H4v2h2v4a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm0 26H8v-4h2v-2H8v-5h2v-2H8v-5h2V8H8V4h18z" fill="currentColor"></path><path d="M14 8h8v2h-8z" fill="currentColor"></path><path d="M14 15h8v2h-8z" fill="currentColor"></path><path d="M14 22h8v2h-8z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端学习笔记<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="前端学习笔记"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 2H8a2 2 0 0 0-2 2v4H4v2h2v5H4v2h2v5H4v2h2v4a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm0 26H8v-4h2v-2H8v-5h2v-2H8v-5h2V8H8V4h18z" fill="currentColor"></path><path d="M14 8h8v2h-8z" fill="currentColor"></path><path d="M14 15h8v2h-8z" fill="currentColor"></path><path d="M14 22h8v2h-8z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端学习笔记<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端基础<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/html/" class="link" aria-label="HTML"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTML<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/css/" class="link" aria-label="CSS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/javascript/" class="link" aria-label="JavaScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->进阶<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/ajax/" class="link" aria-label="Ajax"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Ajax<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/es6/" class="link" aria-label="ES6"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ES6<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/blogs/webpack/" class="link" aria-label="webpack"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->webpack<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/brower/" class="link" aria-label="浏览器原理和性能优化"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->浏览器原理和性能优化<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->小程序<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/applet/" class="link" aria-label="微信小程序"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->框架<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/vue/Vue 基础 - 模板语法、事件处理、计算属性、侦听器.md" class="link" aria-label="Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/react/" class="link" aria-label="React"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->外部库<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/elementui/" class="link" aria-label="Element Ui"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Element Ui<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/echarts/" class="link" aria-label="Echarts"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Echarts<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TypeScript<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/typescript/" class="link" aria-label="TypeScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TypeScript<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->构建工具<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/vite/" class="link" aria-label="Vite"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vite<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="面试题"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M28 10h-5V6a2.002 2.002 0 0 0-2-2H11a2.002 2.002 0 0 0-2 2v4H4a2.002 2.002 0 0 0-2 2v16a2.002 2.002 0 0 0 2 2h24a2.002 2.002 0 0 0 2-2V12a2.002 2.002 0 0 0-2-2zM4 28V12h5v2H7v2h2v2H7v2h2v2H7v2h2v4zm17 0H11V6h10zm7 0h-5v-4h2v-2h-2v-2h2v-2h-2v-2h2v-2h-2v-2h5z" fill="currentColor"></path><path d="M14 8h4v2h-4z" fill="currentColor"></path><path d="M14 12h4v2h-4z" fill="currentColor"></path><path d="M14 16h4v2h-4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试题<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="面试题"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M28 10h-5V6a2.002 2.002 0 0 0-2-2H11a2.002 2.002 0 0 0-2 2v4H4a2.002 2.002 0 0 0-2 2v16a2.002 2.002 0 0 0 2 2h24a2.002 2.002 0 0 0 2-2V12a2.002 2.002 0 0 0-2-2zM4 28V12h5v2H7v2h2v2H7v2h2v2H7v2h2v4zm17 0H11V6h10zm7 0h-5v-4h2v-2h-2v-2h2v-2h-2v-2h2v-2h-2v-2h5z" fill="currentColor"></path><path d="M14 8h4v2h-4z" fill="currentColor"></path><path d="M14 12h4v2h-4z" fill="currentColor"></path><path d="M14 16h4v2h-4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试题<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/html/" class="link" aria-label="HTML"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTML<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/css/" class="link" aria-label="CSS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/javascript/" class="link" aria-label="JavaScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/es6/" class="link" aria-label="ES6"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ES6<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/write/" class="link" aria-label="手写面试题 "><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->手写面试题 <!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/blogs/webpack/" class="link" aria-label="webpack"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->webpack<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/brower/" class="link" aria-label="浏览器网络"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->浏览器网络<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/vue/" class="link" aria-label="Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/react/" class="link" aria-label="React"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/algorithm/" class="link" aria-label="算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->算法<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a href="/xunyu-blog/algorithm/" class="link" aria-label="算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M19 13h6v2h-6z" fill="currentColor"></path><path d="M13 21h-2v-2H9v2H7v2h2v2h2v-2h2v-2z" fill="currentColor"></path><path d="M7 9h6v2H7z" fill="currentColor"></path><path d="M19 17h6v2h-6z" fill="currentColor"></path><path d="M27 3H5a2.002 2.002 0 0 0-2 2v22a2.002 2.002 0 0 0 2 2h22a2.002 2.002 0 0 0 2-2V5a2.002 2.002 0 0 0-2-2zM15 5v10H5V5zM5 17h10v10H5zm12 10V5h10v22z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->算法<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/xunyu-blog/project/" class="link" aria-label="项目"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 17v8H6v-8h10m0-2H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M27 6v5H17V6h10m0-2H17a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M27 17v5h-5v-5h5m0-2h-5a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M11 6v5H6V6h5m0-2H6a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->项目<!--]--></span></span><!--[--><!--]--></a></div><!--]--></nav><span class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></header><header class="sub-navbar-container"><span class="nav-item"><div class="toggle-series-button" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div> Series </span></header><div class="mobile-menus-container"><nav class="navbar-links mobile"><!--[--><div class="navbar-links__item"><a href="/xunyu-blog/" class="link router-link-active" aria-label="主页"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16.612 2.214a1.01 1.01 0 0 0-1.242 0L1 13.419l1.243 1.572L4 13.621V26a2.004 2.004 0 0 0 2 2h20a2.004 2.004 0 0 0 2-2V13.63L29.757 15L31 13.428zM18 26h-4v-8h4zm2 0v-8a2.002 2.002 0 0 0-2-2h-4a2.002 2.002 0 0 0-2 2v8H6V12.062l10-7.79l10 7.8V26z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->主页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="前端学习笔记"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 2H8a2 2 0 0 0-2 2v4H4v2h2v5H4v2h2v5H4v2h2v4a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm0 26H8v-4h2v-2H8v-5h2v-2H8v-5h2V8H8V4h18z" fill="currentColor"></path><path d="M14 8h8v2h-8z" fill="currentColor"></path><path d="M14 15h8v2h-8z" fill="currentColor"></path><path d="M14 22h8v2h-8z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端学习笔记<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="前端学习笔记"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 2H8a2 2 0 0 0-2 2v4H4v2h2v5H4v2h2v5H4v2h2v4a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm0 26H8v-4h2v-2H8v-5h2v-2H8v-5h2V8H8V4h18z" fill="currentColor"></path><path d="M14 8h8v2h-8z" fill="currentColor"></path><path d="M14 15h8v2h-8z" fill="currentColor"></path><path d="M14 22h8v2h-8z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端学习笔记<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端基础<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/html/" class="link" aria-label="HTML"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTML<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/css/" class="link" aria-label="CSS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/javascript/" class="link" aria-label="JavaScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->进阶<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/ajax/" class="link" aria-label="Ajax"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Ajax<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/es6/" class="link" aria-label="ES6"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ES6<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/blogs/webpack/" class="link" aria-label="webpack"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->webpack<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/brower/" class="link" aria-label="浏览器原理和性能优化"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->浏览器原理和性能优化<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->小程序<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/applet/" class="link" aria-label="微信小程序"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->微信小程序<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->框架<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/vue/Vue 基础 - 模板语法、事件处理、计算属性、侦听器.md" class="link" aria-label="Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/react/" class="link" aria-label="React"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->外部库<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/elementui/" class="link" aria-label="Element Ui"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Element Ui<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/echarts/" class="link" aria-label="Echarts"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Echarts<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TypeScript<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/typescript/" class="link" aria-label="TypeScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TypeScript<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-link__item"><!--[--><h5 class="dropdown-link__subtitle"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->构建工具<!--]--></span></span></h5><ul class="dropdown-link__subcontainer"><!--[--><li class="dropdown-link__subitem"><a href="/xunyu-blog/blogs/web/vite/" class="link" aria-label="Vite"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vite<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="面试题"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M28 10h-5V6a2.002 2.002 0 0 0-2-2H11a2.002 2.002 0 0 0-2 2v4H4a2.002 2.002 0 0 0-2 2v16a2.002 2.002 0 0 0 2 2h24a2.002 2.002 0 0 0 2-2V12a2.002 2.002 0 0 0-2-2zM4 28V12h5v2H7v2h2v2H7v2h2v2H7v2h2v4zm17 0H11V6h10zm7 0h-5v-4h2v-2h-2v-2h2v-2h-2v-2h2v-2h-2v-2h5z" fill="currentColor"></path><path d="M14 8h4v2h-4z" fill="currentColor"></path><path d="M14 12h4v2h-4z" fill="currentColor"></path><path d="M14 16h4v2h-4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试题<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="面试题"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M28 10h-5V6a2.002 2.002 0 0 0-2-2H11a2.002 2.002 0 0 0-2 2v4H4a2.002 2.002 0 0 0-2 2v16a2.002 2.002 0 0 0 2 2h24a2.002 2.002 0 0 0 2-2V12a2.002 2.002 0 0 0-2-2zM4 28V12h5v2H7v2h2v2H7v2h2v2H7v2h2v4zm17 0H11V6h10zm7 0h-5v-4h2v-2h-2v-2h2v-2h-2v-2h2v-2h-2v-2h5z" fill="currentColor"></path><path d="M14 8h4v2h-4z" fill="currentColor"></path><path d="M14 12h4v2h-4z" fill="currentColor"></path><path d="M14 16h4v2h-4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->面试题<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/html/" class="link" aria-label="HTML"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTML<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/css/" class="link" aria-label="CSS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/blogs/interview/javascript/" class="link" aria-label="JavaScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/es6/" class="link" aria-label="ES6"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ES6<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/write/" class="link" aria-label="手写面试题 "><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->手写面试题 <!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/blogs/webpack/" class="link" aria-label="webpack"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->webpack<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/brower/" class="link" aria-label="浏览器网络"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->浏览器网络<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/vue/" class="link" aria-label="Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/react/" class="link" aria-label="React"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/xunyu-blog/interview/algorithm/" class="link" aria-label="算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->算法<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a href="/xunyu-blog/algorithm/" class="link" aria-label="算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M19 13h6v2h-6z" fill="currentColor"></path><path d="M13 21h-2v-2H9v2H7v2h2v2h2v-2h2v-2z" fill="currentColor"></path><path d="M7 9h6v2H7z" fill="currentColor"></path><path d="M19 17h6v2h-6z" fill="currentColor"></path><path d="M27 3H5a2.002 2.002 0 0 0-2 2v22a2.002 2.002 0 0 0 2 2h22a2.002 2.002 0 0 0 2-2V5a2.002 2.002 0 0 0-2-2zM15 5v10H5V5zM5 17h10v10H5zm12 10V5h10v22z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->算法<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/xunyu-blog/project/" class="link" aria-label="项目"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 17v8H6v-8h10m0-2H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M27 6v5H17V6h10m0-2H17a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M27 17v5h-5v-5h5m0-2h-5a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2z" fill="currentColor"></path><path d="M11 6v5H6V6h5m0-2H6a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->项目<!--]--></span></span><!--[--><!--]--></a></div><!--]--></nav><div class="appearance"><span>Appearance</span><span class="xicon-container btn-toggle-dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span></div></div><div class="series-mask"></div><aside class="series-container"><div class="site-brand"><img class="logo" src="/xunyu-blog/logo.jpg" alt="xunyublog"><a href="/xunyu-blog/" class="site-name can-hide">xunyublog</a></div><!--[--><!--[--><section class="series-group series-item"><h5 class="series-heading">vue基础<span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a href="/xunyu-blog/blogs/web/vue/Vue jichu - mobanyufa、shijianchuli、jisuanshuxing、zhentingqi.html" class="link series-item" aria-label="Vue 基础 - 模板语法、事件处理、计算属性、侦听器"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue 基础 - 模板语法、事件处理、计算属性、侦听器<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/vue/Vue jichu - biaodan、yangshibangding，tiaojian、liebiaoxuanran、zhiling.html" class="link series-item" aria-label="Vue 基础 - 表单、样式绑定，条件、列表渲染、指令"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue 基础 - 表单、样式绑定，条件、列表渲染、指令<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/vue/Vue shengmingzhouqi、zidingyizhiling、mobanyinyongdeyuanliyushijian.html" class="link series-item" aria-label="Vue 生命周期、自定义指令、模板引用的原理与实践"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue 生命周期、自定义指令、模板引用的原理与实践<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">组件通信<span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a href="/xunyu-blog/blogs/web/vue/Vue danwenjianzujian，fuzizujianjianchuanzhi、tongxin，touchuanshuxing.html" class="link series-item" aria-label="Vue 单文件组件，父子组件间传值、通信，透传属性"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue 单文件组件，父子组件间传值、通信，透传属性<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/vue/Vue chacao Slots，zidingyidanchuang、gaojiliebiaozujian，yilaizhuru.html" class="link series-item" aria-label="Vue 插槽 Slots，自定义弹窗、高级列表组件，依赖注入"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue 插槽 Slots，自定义弹窗、高级列表组件，依赖注入<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/vue/Vue xiongdizujianjiantongxin、fabuyudingyue，dongtai、yibuzujian.html" class="link series-item" aria-label="Vue 兄弟组件间通信、发布与订阅，动态、异步组件"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue 兄弟组件间通信、发布与订阅，动态、异步组件<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading active">组合式API<span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html" class="router-link-active router-link-exact-active link router-link-active series-item active" aria-label="Vue 组合式 API - setup、reactive 与 ref，响应式工具"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue 组合式 API - setup、reactive 与 ref，响应式工具<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - watch he watchEffect、zidingyizhiling.html" class="link series-item" aria-label="Vue 组合式 API - watch 和 watchEffect、自定义指令"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue 组合式 API - watch 和 watchEffect、自定义指令<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - ref，tongxin API，yilaizhuru，shengmingzhouqi.html" class="link series-item" aria-label="Vue 组合式 API - ref，通信 API，依赖注入，生命周期"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue 组合式 API - ref，通信 API，依赖注入，生命周期<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">路由和导航守卫<span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a href="/xunyu-blog/blogs/web/vue/Vue Router luyou，qianhouduanluyouyuanli yu jutishixian.html" class="link series-item" aria-label="Vue Router 路由，前后端路由原理 与 具体实现"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue Router 路由，前后端路由原理 与 具体实现<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/vue/Vue Router luyouchuancan、bieming、pipeiyufa、bianchengshidaohang.html" class="link series-item" aria-label="Vue Router 路由传参、别名、匹配语法、编程式导航"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue Router 路由传参、别名、匹配语法、编程式导航<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/vue/Vue Router daohangshouwei、guoduyugundong、lanjiazai、dongtailuyou.html" class="link series-item" aria-label="Vue Router 导航守卫、过渡与滚动、懒加载、动态路由"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue Router 导航守卫、过渡与滚动、懒加载、动态路由<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">Pinia<span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a href="/xunyu-blog/blogs/web/vue/Pinia quanjuzhuangtaiguanli，shenru State、Getter、Action.html" class="link series-item" aria-label="Pinia 全局状态管理，深入 State、Getter、Action"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Pinia 全局状态管理，深入 State、Getter、Action<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">其他<span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a href="/xunyu-blog/blogs/web/vue/Vue xuanranjizhi - xuni DOM，render、h hanshu，xuanranliucheng.html" class="link series-item" aria-label="Vue 渲染机制 - 虚拟 DOM，render、h 函数，渲染流程"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue 渲染机制 - 虚拟 DOM，render、h 函数，渲染流程<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/vue/Vue zhong Transition he TransitionGroup zujian，shijianyingyong.html" class="link series-item" aria-label="Vue 中 Transition 和 TransitionGroup 组件，实践应用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue 中 Transition 和 TransitionGroup 组件，实践应用<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/vue/Vue chajiankaifa，Element Plus、VantUI zujiankushijianyingyong.html" class="link series-item" aria-label="Vue 插件开发，Element Plus、VantUI 组件库实践应用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue 插件开发，Element Plus、VantUI 组件库实践应用<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/xunyu-blog/blogs/web/vue/Vue zhongde Teleport nazhizujian.html" class="link series-item" aria-label="Vue 中的 Teleport 内置组件"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue 中的 Teleport 内置组件<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--]--></aside><!--[--><main class="page-container"><h1 class="page-title">Vue 组合式 API - setup、reactive 与 ref，响应式工具</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->xunyu<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2023-10-24<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vue<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M10 14a4 4 0 1 1 4-4a4.005 4.005 0 0 1-4 4zm0-6a2 2 0 1 0 1.998 2.004A2.002 2.002 0 0 0 10 8z" fill="currentColor"></path><path d="M16.644 29.415L2.586 15.354A2 2 0 0 1 2 13.941V4a2 2 0 0 1 2-2h9.941a2 2 0 0 1 1.414.586l14.06 14.058a2 2 0 0 1 0 2.828l-9.943 9.943a2 2 0 0 1-2.829 0zM4 4v9.942L18.058 28L28 18.058L13.942 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->vue<!--]--></span></span><!----></div><div class="theme-reco-default-content"><div><h1 id="vue-组合式-api-setup、reactive-与-ref-响应式工具" tabindex="-1"><a class="header-anchor" href="#vue-组合式-api-setup、reactive-与-ref-响应式工具" aria-hidden="true">#</a> Vue 组合式 API - setup、reactive 与 ref，响应式工具</h1><p>组合式 API（Composition API）是一系列 API 的集合，使我们可以使用函数而不是声明选项的方式书写 Vue 组件。它是一个概括性的术语，涵盖了以下方面的 API：</p><ul><li><a href="https://cn.vuejs.org/api/reactivity-core.html" target="_blank" rel="noopener noreferrer">响应式 API (opens new window)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>：使我们可以直接创建响应式状态、计算属性和侦听器，如： <code>ref()</code> 和 <code>reactive()</code></li><li><a href="https://cn.vuejs.org/api/composition-api-lifecycle.html" target="_blank" rel="noopener noreferrer">生命周期钩子 (opens new window)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>：使我们可以在组件各个生命周期阶段添加逻辑，如： <code>onMounted()</code> 和 <code>onUnmounted()</code></li><li><a href="https://cn.vuejs.org/api/composition-api-dependency-injection.html" target="_blank" rel="noopener noreferrer">依赖注入 (opens new window)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>：使我们可以在使用响应式 API 时，利用 Vue 的依赖注入系统，如 <code>provide()</code> 和 <code>inject()</code></li></ul><p>组合式 API 是 Vue 3 及 <a href="https://blog.vuejs.org/posts/vue-2-7-naruto.html" target="_blank" rel="noopener noreferrer">Vue 2.7 (opens new window)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>的内置功能。对于更老的 Vue 2 版本，可以使用官方维护的插件 <a href="https://github.com/vuejs/composition-api" target="_blank" rel="noopener noreferrer"><code>@vue/composition-api</code> (opens new window)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</p><blockquote><p>在 Vue 3 中，组合式 API 基本上都会配合 <a href="https://cn.vuejs.org/api/sfc-script-setup.html" target="_blank" rel="noopener noreferrer">`` (opens new window)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>语法在单文件组件中使用。</p></blockquote><p>下面是一个使用组合式 API 的组件示例：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

  <span class="token comment">// 创建响应式数据 相当于选项式API中 data中定义的属性</span>
  <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Composition API&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 定义一个方法，相当于选项式API中的methods选项中定义的方法</span>
  <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    num<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 创建一个计算属性，相当于选项式API中的computed选项中创建的计算属性</span>
  <span class="token keyword">const</span> price <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;$&quot;</span> <span class="token operator">+</span> num<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>{{ msg }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>价格：{{ price }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>更新<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注：</p><ul><li>从上面代码中可以看到，创建的响应式数据，methods 方法，computed 计算属性都是基于函数来实现的。这些函数组合在一起就能完成一个具体的应用。</li><li>所谓组合式 API 就是指这些不同的 API（函数）组合在一起来实现一个完整的应用，和之前学习的选项式 API 风格完全不同。</li></ul><blockquote><p>以上代码最终渲染结果如下：</p></blockquote><p><img src="https://www.arryblog.com/assets/img/GIF2023-7-818-26-01.2e15412c.gif" alt="GIF2023-7-818-26-01"></p><p>接下来我们将正式开启组合式 API 的学习之旅，本章节具体内容安排如下：</p><ul><li>初识<code>setup()</code>函数</li><li>初始<code>reactive</code>与<code>ref</code>响应式 API</li><li>深入响应式 API- 工具函数（一）</li><li>深入响应式 API- 工具函数（二）</li><li><code>setup()</code>函数参数</li></ul><h2 id="一、初识-setup-函数" tabindex="-1"><a class="header-anchor" href="#一、初识-setup-函数" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#%E4%B8%80%E3%80%81%E5%88%9D%E8%AF%86-setup-%E5%87%BD%E6%95%B0" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>一、初识 setup() 函数</h2><p><code>setup()</code> 函数是在组件中使用组合式 API 的入口（表演的舞台），所有组合式 API 代码都写在<code>setup()</code>函数中</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token comment">// setup函数是所有组合式API的入口（表演的舞台）</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// .....所有代码在此书写</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1、setup-函数的返回值" tabindex="-1"><a class="header-anchor" href="#_1、setup-函数的返回值" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_1%E3%80%81setup-%E5%87%BD%E6%95%B0%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>1、setup() 函数的返回值</h3><p><code>setup()</code>函数的返回值通常是一个对象，这个对象的所有属性会暴露给组件模板和组件实例，所以</p><ul><li>在组件的<strong>模板</strong>中可以直接访问<code>setup()</code>返回对象的属性</li><li>在组件的<strong>选项式 API</strong>中可通过组件实例可以访问<code>setup()</code>返回对象身上的属性。</li></ul><p>以下代码展示了，在模板中和组件实例上访问到<code>setup()</code>函数返回的对象身上的属性和方法。</p><blockquote><p><strong>提示：</strong> 选项式 API 与组合式 API 是可以共存的。</p></blockquote><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 返回值会暴露给模板和其他的选项式 API 钩子</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;Hello Vue!!&quot;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">sayHello</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;sayHello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 组件实例可以直接获取message属性</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sayHello<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>sayHello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--模板中可以直接使用message属性--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ message }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>最终渲染效果如下：</p></blockquote><p><img src="https://www.arryblog.com/assets/img/GIF2023-7-814-43-14.338bbb14.gif" alt="GIF2023-7-814-43-14"></p><h3 id="_2、setup-函数中-this-指向" tabindex="-1"><a class="header-anchor" href="#_2、setup-函数中-this-指向" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_2%E3%80%81setup-%E5%87%BD%E6%95%B0%E4%B8%AD-this-%E6%8C%87%E5%90%91" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>2、setup() 函数中 this 指向</h3><ul><li><code>setup()</code>函数自身并不含对组件实例的访问权，在<code>setup()</code>中访问<code>this</code>会是<code>undefind</code></li><li>所以<code>setup()</code>函数内是没有办法访问到选项式 API 中的属性、方法、计算属性等。</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token comment">&lt;!-- 以下代码是错的 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;Hello Vue!!&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 抛出错误，因为this为undefined</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、setup-函数执行时机" tabindex="-1"><a class="header-anchor" href="#_3、setup-函数执行时机" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_3%E3%80%81setup-%E5%87%BD%E6%95%B0%E6%89%A7%E8%A1%8C%E6%97%B6%E6%9C%BA" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>3、setup() 函数执行时机</h3><p><code>setup()</code>函数是在 Vue 生命周期函数<code>beforeCreate()</code>之前被自动调用的。</p><p>所以在<code>beforeCreate()</code>函数和选项式 API 中可以访问到<code>setup()</code>函数对外暴露的属性</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;Hello Vue!!&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 在控制台输出 ： beforeCreate： Hello Vue!!</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;beforeCreate：&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--以下代码渲染后效果: &lt;div&gt; Hello Vue!! &lt;/div&gt;--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ text }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.arryblog.com/assets/img/image-20230522151358423.dd146084.png" alt="image-20230522151358423"></p><h3 id="_4、setup-函数暴露非响应式属性" tabindex="-1"><a class="header-anchor" href="#_4、setup-函数暴露非响应式属性" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_4%E3%80%81setup-%E5%87%BD%E6%95%B0%E6%9A%B4%E9%9C%B2%E9%9D%9E%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B1%9E%E6%80%A7" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>4、setup() 函数暴露非响应式属性</h3><p>以下方式<code>setup()</code>函数对外暴露的属性非响应式的，当属性的值发生变化时，页面并不会同步更新。</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
      <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        a<span class="token punctuation">,</span>
        b<span class="token punctuation">,</span>
        update<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>a的值：{{ a }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>b的值：{{ b }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>更新a,b的值<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.arryblog.com/assets/img/GIF2023-5-2215-22-16.70462a1f.gif" alt="GIF2023-5-2215-22-16"></p><p>注：</p><p>以上的 a,b 属性都是非响应式的，所以当我们点击按扭时，页面中 a,b 的值并没有变化</p><blockquote><p>如果想要对外暴露的属性支持响应式，需要用到响应式 API 中的<code>reactive()</code>或<code>ref()</code>方法来实现。</p></blockquote><h3 id="_5、总结" tabindex="-1"><a class="header-anchor" href="#_5、总结" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_5%E3%80%81%E6%80%BB%E7%BB%93" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>5、总结</h3><ul><li><code>setup()</code>函数返回值通常是一个对象，这个对象的所有属性会暴露给组件模板和组件实例</li><li><code>setup()</code>函数中的<code>this</code>指向<code>undefined</code></li><li><code>setup()</code>函数会在所有生命周期函数<code>beforeCreate</code>之前被执行。</li><li><code>setup()</code>函数内定义的变量默认为非响应式的，所以对外暴露该属性为非响应式</li></ul><h2 id="二、初始-reactive-与-ref-响应式-api" tabindex="-1"><a class="header-anchor" href="#二、初始-reactive-与-ref-响应式-api" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#%E4%BA%8C%E3%80%81%E5%88%9D%E5%A7%8B-reactive-%E4%B8%8E-ref-%E5%93%8D%E5%BA%94%E5%BC%8F-api" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>二、初始 reactive 与 ref 响应式 API</h2><p>本小节我们将会初步认识<code>reactive</code>与<code>ref</code> 两个响应式 API，掌握他们的基本用法。</p><h3 id="_1、初识-reactive-方法" tabindex="-1"><a class="header-anchor" href="#_1、初识-reactive-方法" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_1%E3%80%81%E5%88%9D%E8%AF%86-reactive-%E6%96%B9%E6%B3%95" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>1、初识 reactive() 方法</h3><p><code>reactive()</code>方法用来返回一个<strong>对象</strong>的响应式代理。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> objProxy <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// objProxy为obj对象的响应式代理</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>我们通过响应式代理来操作对象的属性，当属性的值发生变化时也会驱动页面视图的更新。</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// 导入reactive方法</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token comment">// Info为响应式代理对象</span>
      <span class="token keyword">const</span> objProxy <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>objProxy<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Proxy(Object) {a: 1, b: 2}</span>

      <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 修改对象属性的值</span>
        objProxy<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        objProxy<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 将属性暴露给组件实例</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        objProxy<span class="token punctuation">,</span>
        update<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>a的值：{{ objProxy.a }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>b的值：{{ objProxy.b }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>更新a,b的值<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>以上代码最终渲染效果如下，当点击按扭更新 a、b 值时，页面中 a、b 的值会更新为最新的。</p></blockquote><p><img src="https://www.arryblog.com/assets/img/GIF2023-5-2215-51-30.5c3c48f9.gif" alt="GIF2023-5-2215-51-30"></p><p>代码分析</p><ul><li>以上代码中的<code>objProxy</code>为<code>obj</code>对象的响应式代理对象。</li><li>我们可以通过<code>objProxy.a=10</code> 和<code>objProxy.b=20</code>来为<code>obj</code>对象的 a、b 属性赋值。</li><li>当点击按扭后，会调用 update 方法，更新对象的属性的值。最终 a、b 属性的值从 1，2 修改成 10，20。因为数据是响应式的，所以数据更新后页面视图也发生了更新</li></ul><blockquote><p>以上过程证明<code>objProxy</code>代理对象具有响应性，所以<code>objProxy</code>为响应式代理对象。</p></blockquote><h3 id="_1-1、深层响应性" tabindex="-1"><a class="header-anchor" href="#_1-1、深层响应性" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_1-1%E3%80%81%E6%B7%B1%E5%B1%82%E5%93%8D%E5%BA%94%E6%80%A7" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>1.1、深层响应性</h3><p>通过<code>reactive()</code>方法转换的响应式对象是 <strong>&quot;深层响应&quot;</strong> 的。</p><p>即不管对象的属性嵌套有多深，都具有响应性，其值发生变化时，页面视图会同步更新。</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// info为响应式代理对象</span>
      <span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        info<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b<span class="token punctuation">.</span>c<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        info<span class="token punctuation">,</span>
        add<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in info.a.b.c<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>添加<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>以上代码渲染后效果如下：</p></blockquote><p><img src="data:image/gif;base64,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" alt="GIF2023-5-2217-16-08"></p><blockquote><p>当点击按扭后，往数组中添加了“A&quot;，页面同步更新渲染出来了。</p></blockquote><h3 id="_1-2、reactive-无法转换基本数据类型" tabindex="-1"><a class="header-anchor" href="#_1-2、reactive-无法转换基本数据类型" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_1-2%E3%80%81reactive-%E6%97%A0%E6%B3%95%E8%BD%AC%E6%8D%A2%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>1.2、reactive() 无法转换基本数据类型</h3><ul><li><code>reactive()</code>方法只能将一个对象转换为一个响应式对象，而不能将一个基本数据类型转换为响应式对象。</li><li>因为<code>reactive()</code>方法的底层采用的是<code>Proxy</code>来实现的，而<code>Proxy</code>只能创建对象的代理。</li></ul><blockquote><p>以下代码为错误示例</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Vue!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>以上代码执行后，在控制台打印如下结果：</p></blockquote><p><img src="data:image/png;base64,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" alt="image-20230522161131916"></p><p>注：</p><p>警告提示，值不能被设置为响应式，最后 msg 的结果仍为原始值<code>&quot;Hello Vue!!&quot;</code></p><h3 id="_1-3、reactive-方法底层实现原理" tabindex="-1"><a class="header-anchor" href="#_1-3、reactive-方法底层实现原理" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_1-3%E3%80%81reactive-%E6%96%B9%E6%B3%95%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>1.3、reactive() 方法底层实现原理</h3><p><code>reactive()</code>方法返回的响应式代理对象本质是<code>Proxy()</code>的实例。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> objProxy <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>以上代码的内部实现如下：（以下为极简版， 主要帮助大家理解响应式代理）</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 判断obj是不是对象，是对象才可以利有Proxy实现代理</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// objProxy响应式代理对象</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token comment">// 当访问objProxy对象身上的属性时,get方法会被调用</span>
      <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> res <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 响应式依赖收集 ,收集属性对应的DOM更新代码</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 当给objProxy对象向上的属性赋值时，set方法会被调用</span>
      <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 触发响应式依赖 更新DOM</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// ....</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、初识-ref-方法" tabindex="-1"><a class="header-anchor" href="#_2、初识-ref-方法" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_2%E3%80%81%E5%88%9D%E8%AF%86-ref-%E6%96%B9%E6%B3%95" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>2、初识 ref() 方法</h3><p>接受一个内部值，返回一个响应式的、可更改的 ref 对象，此对象只有一个指向其内部值的属性 <code>.value</code></p><ul><li>可更改是指你可以为<code>ref</code>对象的<code>value</code>属性赋予新的值</li><li>响应式是指所有对 <code>.value</code> 的操作都将被追踪，并且写操作会触发与之相关的副作用（DOM 更新）</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// msg为一个ref对象，并且是响应式的</span>
      <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Vue!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: &quot;Hello Vue!!&quot;}</span>

      <span class="token comment">// 修改ref对象value属性的值</span>
      msg<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;Hello ref!!&quot;</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        msg<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span> {{ msg }} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注：</p><p>以上代码中的字符串<code>&quot;Hello Vue!!&quot;</code>被<code>ref()</code>方法转换成了一个 ref 对象<code>{value: &quot;Hello Vue!!&quot;}</code>。</p><p>当我们修改这 value 属性的值时，页面视图中用到该数据的地方会同步更新。</p><blockquote><p>以上代码最终渲染结果如下：</p></blockquote><p><img src="data:image/png;base64,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" alt="image-20230708154959482"></p><h3 id="_2-1、访问-ref-对象的-value-属性" tabindex="-1"><a class="header-anchor" href="#_2-1、访问-ref-对象的-value-属性" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_2-1%E3%80%81%E8%AE%BF%E9%97%AE-ref-%E5%AF%B9%E8%B1%A1%E7%9A%84-value-%E5%B1%9E%E6%80%A7" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>2.1、访问 ref 对象的 value 属性</h3><ul><li>在<code>setup()</code>中访问<code>ref</code>对象的<code>value</code>值时，需要<code>.value</code>的形式来访问</li><li>在组件模板中访问<code>ref</code>对象的<code>value</code>值时，它会<strong>自动浅层解包</strong>（会自动调用<code>ref.value</code>），因此你无须再在模板中为它写 <code>.value</code>。</li><li>在选项式 API 中，通过 <code>this</code> 访问 ref 时也会自动浅层解包</li></ul><table><thead><tr><th style="text-align:left;">使用场景</th><th style="text-align:left;">是否自动浅层解包</th></tr></thead><tbody><tr><td style="text-align:left;"><code>setup()</code>函数</td><td style="text-align:left;">否</td></tr><tr><td style="text-align:left;">组件模板</td><td style="text-align:left;">是</td></tr><tr><td style="text-align:left;">选项式 API</td><td style="text-align:left;">是</td></tr></tbody></table><p><strong>代码示例</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// 导入 ref 方法</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 将&quot;Hello Vue!!&quot; 转换为响应式，可更改的ref对象</span>
      <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Vue!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;setup--&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 更新msg方法</span>
      <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 修改msg的值</span>
        msg<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;Hello ref!!!&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        msg<span class="token punctuation">,</span>
        update<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// msg是一个ref对象，但会自动解包,所以不需要通过this.msg.value来获取值</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;mounted&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>更新<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--msg会自动解包，不需要使用 msg.value--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ msg }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>以上代码最终渲染效果如下：</p></blockquote><p><img src="https://www.arryblog.com/assets/img/GIF2023-5-1722-12-19.4a33561b.gif" alt="GIF2023-5-1722-12-19"></p><h3 id="_2-2、ref-方法转换对象" tabindex="-1"><a class="header-anchor" href="#_2-2、ref-方法转换对象" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_2-2%E3%80%81ref-%E6%96%B9%E6%B3%95%E8%BD%AC%E6%8D%A2%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>2.2、ref() 方法转换对象</h3><ul><li><code>ref()</code>方法的参数如果为一个对象（引用类型），则最终返回的<code>ref</code>对象的<code>value</code>属性值为该对象的响应式代理对象。</li><li>该 ref 对象是一具有<strong>深层响</strong>应式，可更改的<code>ref</code>对象。</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">&quot;Hello ref!!&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token comment">/*
            	ref的参数为一个对象，先用reactive()方法返回obj的响应式代理对象
            	然后将该响应式代理对象赋值给到ref对象的value属性。
            */</span>
      <span class="token keyword">const</span> refProxyObj <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>refProxyObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>refProxyObj<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>以上代码，最终在控制台输出如下结果：</p></blockquote><p><img src="https://www.arryblog.com/assets/img/image-20230522195240987.ec33cf4c.png" alt="image-20230522195240987"></p><p>分析输出结果</p><p><code>ref()</code>方法的参数如果为一个对象，其内部相当于经历了以下两步：</p><ul><li>先用<code>reactive(obj)</code>方法返回<code>obj</code>的响应式代理对象 <code>proxyObj</code></li><li>然后将该响应式代理对象赋值给到 ref 对象的 value 属性，即<code>{value:proxyObj}</code></li></ul><blockquote><p>所以最终得到的 ref 对象是一个<strong>深层响</strong>应式，可更改的<code>ref</code>对象。</p></blockquote><p><strong>代码演示</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">userName</span><span class="token operator">:</span> <span class="token string">&quot;清心&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;女&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userInfo<span class="token punctuation">.</span>value<span class="token punctuation">.</span>userName <span class="token operator">=</span> <span class="token string">&quot;icoding&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//sex a.b 都会一个ref对象，但都会自动解包</span>
        userInfo<span class="token punctuation">.</span>value<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">;</span>
        userInfo<span class="token punctuation">.</span>value<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token comment">// 下面这种写法，也支持响应式</span>
        <span class="token comment">// userInfo.value.a={b:100}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        userInfo<span class="token punctuation">,</span>
        update<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>更新<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--使用时，全都会自动解包--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ userInfo.userName }} -- {{ userInfo.sex }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ userInfo.a.b }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.arryblog.com/assets/img/GIF2023-5-1814-40-06.af7c2bea.gif" alt="GIF2023-5-1814-40-06"></p><p>注：</p><p>当数据的结构比较深时，深层响应式是非常消耗性能的，因为需要对对象进行深度递归，将每一个被嵌套的属性都转换为响应式。</p><blockquote><p>若要避免这种深层次的转换，请使用 <code>shallowRef()</code>来替代。</p></blockquote><h3 id="_2-3、ref-方法的底层实现" tabindex="-1"><a class="header-anchor" href="#_2-3、ref-方法的底层实现" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_2-3%E3%80%81ref-%E6%96%B9%E6%B3%95%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>2.3、ref() 方法的底层实现</h3><p>以上代码中的<code>ref()</code>方法，返回的<code>ref</code>对象，底层实现如下（极简版，不完整，仅供了解思路）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> refObject <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">get</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">track</span><span class="token punctuation">(</span>refObject<span class="token punctuation">,</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">set</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
      <span class="token function">trigger</span><span class="token punctuation">(</span>refObject<span class="token punctuation">,</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> refObject<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注：</p><ul><li>当我们访问 ref 对象的 value 属性时，本质是触发了 value 属性的 get 方法。</li><li>当我们给 ref 对象赋值时，本质是触发了 value 属性的 set 方法。</li></ul><h3 id="_3、总结" tabindex="-1"><a class="header-anchor" href="#_3、总结" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_3%E3%80%81%E6%80%BB%E7%BB%93" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>3、总结</h3><p><strong>reactive 方法</strong></p><ul><li>用来返回一个对象的响应式代理对象，其响应性为深层响应，不管对象的属性嵌套有多深，都具有响应性，其值发生变化时，页面视图会同步更新。</li><li>reactive 方法无法转换基本数据类型</li><li>reactive 方法的底层实现是通过<code>proxy</code>代理来实现的</li></ul><p><strong>ref 方法</strong></p><ul><li>主要用来将一个基本数据类型值转换为一个响应式，可更改的 ref 对象。</li><li>访问 ref 对象的属性值时，如果在 setup()函数中，需要打点<code>.value</code>属性才能访问，如果在模板或选项式 API 中，则会自动浅层解包，不需要<code>.value</code>。</li><li>ref 方法的参数如果为对象类型，则返回的 ref 对象的 value 属性值为该对象的 proxy 响应式代理对象。</li><li>ref 方法的底层实现是通过创建一个具有 get value 与 set value 属性的对象来实现。</li></ul><h2 id="三、深入响应式-api-工具函数-一" tabindex="-1"><a class="header-anchor" href="#三、深入响应式-api-工具函数-一" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#%E4%B8%89%E3%80%81%E6%B7%B1%E5%85%A5%E5%93%8D%E5%BA%94%E5%BC%8F-api-%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0-%E4%B8%80" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>三、深入响应式 API - 工具函数（一）</h2><p>通过前面的学习我们知道<code>reactive()</code>方法的返回值为一个对象的<strong>响应式代理</strong>。本小节我们针对响应式代理对象做深入的学习，主要内容如下：</p><ul><li>响应式对象会自动解包 ref 属性</li><li>不能被自动解包的集合</li><li>解构响应式对象</li><li><code>toRef()</code> 方法</li><li><code>toRefs()</code> 方法</li><li><code>shallowReactive()</code>方法</li><li><code>readonly()</code> 方法</li></ul><blockquote><p>注：我们将响应式代理对象简称为响应式对象</p></blockquote><h3 id="_1、响应式对象会自动解包-ref-属性" tabindex="-1"><a class="header-anchor" href="#_1、响应式对象会自动解包-ref-属性" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_1%E3%80%81%E5%93%8D%E5%BA%94%E5%BC%8F%E5%AF%B9%E8%B1%A1%E4%BC%9A%E8%87%AA%E5%8A%A8%E8%A7%A3%E5%8C%85-ref-%E5%B1%9E%E6%80%A7" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>1、响应式对象会自动解包 ref 属性</h3><p>一个响应式对象的属性及嵌套属性的值如果为<code>ref</code>属性，在模板或<code>setup()</code>中使用时，会自动解包，同时保持响应性</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> userName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;艾编程&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">33</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        userName<span class="token punctuation">,</span> <span class="token comment">// ref对象</span>
        age<span class="token punctuation">,</span> <span class="token comment">// ref对象</span>
        <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// ref对象</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// userName会自动解包  所以写成 userInfo.userName.value=&quot;清心&quot; 是错误的</span>
        userInfo<span class="token punctuation">.</span>userName <span class="token operator">=</span> <span class="token string">&quot;清心&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 与 userName.value=&quot;清心&quot; 一样支持响应式</span>
        userInfo<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">44</span><span class="token punctuation">;</span> <span class="token comment">// 与  age.value = &quot;44&quot; 一样支持响应式</span>
        userInfo<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">&quot;女&quot;</span><span class="token punctuation">;</span>
        userInfo<span class="token punctuation">.</span>test<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment">// 深层响应式</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        userInfo<span class="token punctuation">,</span>
        update<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>更新数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--userInfo的属性为ref对象时，会自动解包--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ userInfo.userName }} -{{ userInfo.age }}--{{ userInfo.sex }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ userInfo.test.a.b }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>以上代码渲染后效果如下：</p></blockquote><p><img src="https://www.arryblog.com/assets/img/GIF2023-5-1722-57-04.6a787ae1.gif" alt="GIF2023-5-1722-57-04"></p><h3 id="_2、不能被自动解包的集合" tabindex="-1"><a class="header-anchor" href="#_2、不能被自动解包的集合" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_2%E3%80%81%E4%B8%8D%E8%83%BD%E8%A2%AB%E8%87%AA%E5%8A%A8%E8%A7%A3%E5%8C%85%E7%9A%84%E9%9B%86%E5%90%88" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>2、不能被自动解包的集合</h3><p>当访问到某个响应式数组或 <code>Map</code> 这样的原生集合类型中的 <code>ref</code> 元素时，<strong>不会</strong>执行 ref 的解包。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> hobbies <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;音乐&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;阅读&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;跳舞&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 这里需要 .value</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hobbies<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">,</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 这里需要 .value</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、解构响应式对象" tabindex="-1"><a class="header-anchor" href="#_3、解构响应式对象" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_3%E3%80%81%E8%A7%A3%E6%9E%84%E5%93%8D%E5%BA%94%E5%BC%8F%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>3、解构响应式对象</h3><p><strong>如果我们直接利用解构赋值来解构响应式对象</strong></p><ul><li>当属性值为基本数据类型或 ref 对象（解包后为基本数据类型）时，解构后会失去响应性</li><li>当属性值为引用数据类型或 ref 对象（解包后为引用数据类型）时，解构后仍保持响应性</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 解构响应式对象</span>
      <span class="token keyword">let</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#39;a&#39; 基本数据类型，失去响应式</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Proxy(Array) {0: &#39;b&#39;} 响应式对象，具有响应性</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Proxy(Array) {0: &#39;c&#39;} 响应式对象，具有响</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#39;d&#39;  基本数据类型，失去响应式</span>

      <span class="token comment">// 更新数据</span>
      <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        a <span class="token operator">=</span> <span class="token string">&quot;aa&quot;</span><span class="token punctuation">;</span>
        b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;bb&quot;</span><span class="token punctuation">;</span>
        c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;cc&quot;</span><span class="token punctuation">;</span>
        d <span class="token operator">=</span> <span class="token string">&quot;dd&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        a<span class="token punctuation">,</span>
        b<span class="token punctuation">,</span>
        c<span class="token punctuation">,</span>
        d<span class="token punctuation">,</span>
        update<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>a:{{ a }}--b:{{ b[0] }}--c:{{ c[0] }}--{{ d }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>更新<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>最终渲染效果如下图：</p></blockquote><p><img src="https://www.arryblog.com/assets/img/GIF2023-7-817-08-42.982079d2.gif" alt="GIF2023-7-817-08-42"></p><p>注：</p><p>观察控制台输出的结果，可以看到解构后</p><ul><li>b 和 c 的值为 proxy 响应式代理对象，具有响应性</li><li>a 和 d 变量的值为基本数据类型，不具有响应性。</li></ul><blockquote><p>所以，点击更新后按扭后，b,c 的值更新后，页面中对应的值也被更新了。</p></blockquote><hr><p><strong>如果解构的响应式对象为数组或 Map 等原生集合类型</strong></p><ul><li>只有集合中成员为基本数据类型时会失去响应性</li><li>集合成员为<code>ref</code>类型与引用类型都不会失去响应性，因为<code>ref</code>成员不会自动解包</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 解构响应式对象</span>
      <span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value:&#39;a&#39;} ref对象，具有响应性</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value:Proxy(Array){0:&#39;b&#39;}} ref对象，具有响应性</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Proxy(Array) {0: &#39;c&#39;} 响应式对象，具有响性</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#39;d&#39;  基本数据类型，失去响应式</span>

      <span class="token comment">// 更新数据</span>
      <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        a<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;aa&quot;</span><span class="token punctuation">;</span>
        b<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;bb&quot;</span><span class="token punctuation">;</span>
        c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;cc&quot;</span><span class="token punctuation">;</span>
        d <span class="token operator">=</span> <span class="token string">&quot;dd&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        a<span class="token punctuation">,</span>
        b<span class="token punctuation">,</span>
        c<span class="token punctuation">,</span>
        d<span class="token punctuation">,</span>
        update<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>a:{{ a }}--b:{{ b[0] }}--c:{{ c[0] }}--{{ d }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>更新<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>以上代码最终渲染结果如下：</p></blockquote><p><img src="https://www.arryblog.com/assets/img/GIF2023-7-817-22-18.2d48fd21.gif" alt="GIF2023-7-817-22-18"></p><p>注：</p><p>观察上图控制台打印的结果，可以看到</p><ul><li>变量 a，b 为 ref 对象，具有响应性</li><li>变量 c 为 proxy 代理对象，具有响应性</li><li>d 变量为基本数据类型，不具有响应性</li></ul><p>所以点击更新按扭后，a,b,c 变量的值更新后，页面也同步更新了。</p><blockquote><p>那我们如何保持解构后的变量都具有响应性呢 ？这就需要用到接下来讲到的<code>toRef()</code>和<code>toRefs()</code>方法</p></blockquote><h3 id="_4、toref-方法" tabindex="-1"><a class="header-anchor" href="#_4、toref-方法" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_4%E3%80%81toref-%E6%96%B9%E6%B3%95" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>4、toRef() 方法</h3><p><code>toRef()</code>方法可以基于响应式对象上的一个属性，创建一个对应的 ref。</p><blockquote><p>这样创建的 ref 与其源属性保持同步：改变源属性的值将更新 ref 的值，反之亦然。</p></blockquote><p><strong>语法：</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> variable <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>proxyObject<span class="token punctuation">,</span> key<span class="token punctuation">,</span> defaultValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>proxyObject</code> 为响应式对象</li><li><code>key</code> 为 响应式对象对应的原对象的属性</li><li><code>defaultValue</code> 默认值，当转换对象身上不存在的值是会返回 undefined，如果有默认值，则会使用默认值</li></ul><p><strong>代码演示</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> toRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token comment">// obj为响应式代理对象</span>
      <span class="token keyword">const</span> objProxy <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// toRef()方法将对象obj的属性a转换为一个响应式的ref对象 {value:1}</span>
      <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>objProxy<span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value:1}</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 访问a的值</span>

      <span class="token comment">// objProxy.a=10 时，对应a.value的值也变成了10，两者保持同步</span>
      objProxy<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// a.value=100时，对应objProxy.a的值也变成100，两者保持同步</span>
        a<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        a<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ a }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>以上代码最终渲染结果如下：</p></blockquote><p><img src="https://www.arryblog.com/assets/img/GIF2023-7-923-42-52-16889813353901.7c158049.gif" alt="GIF2023-7-923-42-52"></p><p>注：</p><p>通过渲染后的结果可以看到，<code>objProxy.a = 10</code>与<code>a.value = 100</code>最终都会影响到 a 变量的值，也可以说影响到<code>objProxy.a</code>的值，同时都具有响应性。</p><h3 id="_4-1、toref-注意事项" tabindex="-1"><a class="header-anchor" href="#_4-1、toref-注意事项" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_4-1%E3%80%81toref-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>4.1、toRef() 注意事项</h3><ul><li><code>toRef()</code> 如果传入的对象非响应式的，则返回该对象上指定属性的<code>ref</code>对象。（只做了解）</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value:1}</span>
<span class="token comment">// 访问a的值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>当<code>toRef()</code>转换一个对象身上不存在的属性时，返回的 ref 对象的 value 值为<code>undefind</code>，可以为其指定默认值</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> objProxy <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// toRef()方法将对象{a:1,b:2}的属性a转换为一个响应式的ref对象</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>objProxy<span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 访问a的值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>

c <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>objProxy<span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;默认值&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 默认值</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>利用<code>toRef()</code>也可以返回一个只读的<code>ref对象</code>，当我们想创建一个只读的变量时可以使用</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> toRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// obj为响应式代理对象</span>
<span class="token keyword">const</span> objProxy <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回值为只读的ref对象</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> objProxy<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 访问a的值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 以下赋值操作将抛出错误</span>
<span class="token comment">// a.value = &quot;ssss&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、torefs-方法" tabindex="-1"><a class="header-anchor" href="#_5、torefs-方法" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_5%E3%80%81torefs-%E6%96%B9%E6%B3%95" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>5、toRefs() 方法</h3><ul><li>将一个响应式对象转换为一个普通对象，这个普通对象的每个属性都是指向源对象相应属性的 ref。</li><li>每个单独的 ref 都是使用 <a href="https://cn.vuejs.org/api/reactivity-utilities.html#toref" target="_blank" rel="noopener noreferrer"><code>toRef()</code> (opens new window)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>创建的。</li></ul><p><strong>语法</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">toRefs</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object为响应式对象</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>如果我们想要一次性解构一个响应式对象的所有属性，则可以使用<code>toRefs()</code></p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> objProxy <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>objProxy<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {a:toRef(objProxy,&quot;a&quot;),b:toRef(objProxy,&quot;b&quot;)}</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> b <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
    <span class="token comment">// a,b为ref对象，所以访问需要.value</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>value<span class="token punctuation">,</span> b<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1  2</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>代码演示</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">userName</span><span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;艾编程&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// ref对象</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">33</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// ref对象</span>
        <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// toRefs()转换响应式对象，然后利用解构赋值解构属性</span>
      <span class="token keyword">let</span> <span class="token punctuation">{</span> userName<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> test <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 因为解构后的每个属性为ref对象，所以需要通过.value形式访问</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;userName&quot;</span><span class="token punctuation">,</span> userName<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// userName 艾编程</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// age 33</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;sex&quot;</span><span class="token punctuation">,</span> sex<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// sex 男</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> test<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// proxy对象</span>

      <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userName<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;清心&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 失去响应性</span>
        age<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;44&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 失去响应性</span>
        sex<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;女&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 失去响应性</span>
        test<span class="token punctuation">.</span>value<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment">// 保持响应性</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        userName<span class="token punctuation">,</span>
        age<span class="token punctuation">,</span>
        sex<span class="token punctuation">,</span>
        test<span class="token punctuation">,</span>
        update<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>更新数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--userInfo的属性为ref对象时，会自动解包--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ userName }} -{{ age }}--{{ sex }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ test.a.b }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>以上代码最终渲染效果如下：</p></blockquote><p><img src="https://www.arryblog.com/assets/img/GIF2023-5-2222-25-47.d5ca60e3.gif" alt="GIF2023-5-2222-25-47"></p><p>注意事项</p><p><code>toRefs</code> 在调用时只会为源对象上可以枚举的属性创建 ref。如果要为可能还不存在的属性创建 ref，请改用 <a href="https://cn.vuejs.org/api/reactivity-utilities.html#toref" target="_blank" rel="noopener noreferrer"><code>toRef</code> (opens new window)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</p><h3 id="_6、shallowreactive-方法" tabindex="-1"><a class="header-anchor" href="#_6、shallowreactive-方法" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_6%E3%80%81shallowreactive-%E6%96%B9%E6%B3%95" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>6、shallowReactive() 方法</h3><ul><li><code>shallowReactive()</code>相当于是<code>reactive()</code>的浅层作用形式。</li><li>也就是<code>shallowReactive()</code>转换的响应式对象只有根级别的属性是响应式的。属性的值会被原样存储和暴露，这也意味着值为 <code>ref</code> 的属性<strong>不会</strong>被自动解包了。</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> shallowReactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token function">shallowReactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">function</span> <span class="token function">update1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ref不会自动解包，需要调用value，值修改后会触发</span>
        info<span class="token punctuation">.</span>count<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">function</span> <span class="token function">update2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 并不会触发页面更新</span>
        info<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token comment">// 以下方式会触发页面更新</span>
        <span class="token comment">// info.a = { b: 100 }</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        info<span class="token punctuation">,</span>
        update1<span class="token punctuation">,</span>
        update2<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>更新count<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>更新b的值<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ info.count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ info.a.b }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>以上代码最终渲染效果如下：</p></blockquote><p><img src="https://www.arryblog.com/assets/img/GIF2023-5-1815-55-26.5c88ba5a.gif" alt="GIF2023-5-1815-55-26"></p><h3 id="_7、readonly-方法" tabindex="-1"><a class="header-anchor" href="#_7、readonly-方法" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_7%E3%80%81readonly-%E6%96%B9%E6%B3%95" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>7、readonly() 方法</h3><p>接受一个对象 (不论是响应式还是普通的) 或是一个 <a href="https://cn.vuejs.org/api/reactivity-core.html#ref" target="_blank" rel="noopener noreferrer">ref (opens new window)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，返回一个原值的只读代理。</p><p>只读代理是深层的：对任何嵌套属性的访问都将是只读的。它的 ref 解包行为与 <code>reactive()</code> 相同，会自动解包，但解包得到的值是只读的。</p><blockquote><p>要避免深层级的转换行为，请使用 <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowreadonly" target="_blank" rel="noopener noreferrer">shallowReadonly() (opens new window)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>作替代。</p></blockquote><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> readonly <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> proxyObj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> readonlyObj <span class="token operator">=</span> <span class="token function">readonly</span><span class="token punctuation">(</span>proxyObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 对象属性可读</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>readonlyObj<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// `</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>readonlyObj<span class="token punctuation">.</span>b<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
      <span class="token comment">// 以下对象属性赋值失败，同时在控制台抛出错误</span>
      readonlyObj<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
      readonlyObj<span class="token punctuation">.</span>b<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8、isreactive-方法" tabindex="-1"><a class="header-anchor" href="#_8、isreactive-方法" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_8%E3%80%81isreactive-%E6%96%B9%E6%B3%95" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>8、isReactive() 方法</h3><p>检查一个对象是否是由 <code>reactive()</code>或 <code>shallowReactive()</code> 创建的代理。</p><blockquote><p>返回值为<code>boolean</code>布尔类型值，<code>true</code>表示是，<code>false</code>表示否</p></blockquote><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> isReactive<span class="token punctuation">,</span> shallowReactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isReactive</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isReactive</span><span class="token punctuation">(</span><span class="token function">reactive</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isReactive</span><span class="token punctuation">(</span><span class="token function">shallowReactive</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="四、深入响应式-api-工具函数-二" tabindex="-1"><a class="header-anchor" href="#四、深入响应式-api-工具函数-二" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#%E5%9B%9B%E3%80%81%E6%B7%B1%E5%85%A5%E5%93%8D%E5%BA%94%E5%BC%8F-api-%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0-%E4%BA%8C" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>四、深入响应式 API - 工具函数（二）</h2><p>通过前面<code>ref()</code>方法的学习，我们对 ref 对象有了初步的了解，本小节我们将深入展开<code>ref</code>对象的学习。</p><p>本小节主要包含如下内容：</p><ul><li><code>shallowRef()</code>方法，创建浅层的 ref 对象</li><li><code>isRef()</code>方法，检查某个值是否为 ref 对象</li><li><code>unref()</code>方法，获取 ref 属性值的一种语法糖</li><li><code>customRef()</code>方法，自定义 ref</li></ul><h3 id="_1、shallowref-方法" tabindex="-1"><a class="header-anchor" href="#_1、shallowref-方法" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_1%E3%80%81shallowref-%E6%96%B9%E6%B3%95" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>1、shallowRef() 方法</h3><p><code>shallowRef()</code>方法相当于<code>ref()</code>的浅层作用形式，只对<code>.value</code>的访问是响应式的，对对象的其它属性值的写操作不支持响应式。</p><p>针对大型的数据结构，如果我们确实只需要浅层次的响应式，则可以利用<code>shallowRef()</code>帮助我们提升性能，因为减小了深层次的递归操作。</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> shallowRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">function</span> <span class="token function">update1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 不会触发页面的更新</span>
        state<span class="token punctuation">.</span>value<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">function</span> <span class="token function">update2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 会触发页面的更新</span>
        state<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        state<span class="token punctuation">,</span>
        update1<span class="token punctuation">,</span>
        update2<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>更新1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>更新2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ state.count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>以上代码最终效果如下：</p></blockquote><p><img src="https://www.arryblog.com/assets/img/GIF2023-5-1814-57-56.bf03451c.gif" alt="GIF2023-5-1814-57-56"></p><p>注：</p><p>点击更新 1 并不会触发页面的更新，只有点击更新 2 时，才会触发页面的更新。</p><p>因为 state 是被<code>shallowRef</code>转换的的一个浅层的响应式对象，所以<code>state.value.count = 100</code>并不会触发页面的更新，而<code>state.value = { count: 200 }</code>会触发页面的更新。</p><h3 id="_2、isref-方法" tabindex="-1"><a class="header-anchor" href="#_2、isref-方法" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_2%E3%80%81isref-%E6%96%B9%E6%B3%95" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>2、isRef() 方法</h3><p>检查某个值是否为 ref 对象，如果是返回 true，否则返回 false</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> isRef<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isRef</span><span class="token punctuation">(</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isRef</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、unref-方法" tabindex="-1"><a class="header-anchor" href="#_3、unref-方法" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_3%E3%80%81unref-%E6%96%B9%E6%B3%95" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>3、unref() 方法</h3><p><code>unref()</code>方法的参数是 ref，则返回 ref 对象的 value 属性值，否则返回参数本身。</p><blockquote><p><code>unref()</code>方法是<code>val = isRef(val) ? val.value : val</code>计算的一个语法糖</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> isRef<span class="token punctuation">,</span> unref<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">unref</span><span class="token punctuation">(</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">unref</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">unref</span><span class="token punctuation">(</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Proxy(Object) {a: 1, b: 2}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">unref</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {a: 1, b: 2}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4、customref-自定义-ref" tabindex="-1"><a class="header-anchor" href="#_4、customref-自定义-ref" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_4%E3%80%81customref-%E8%87%AA%E5%AE%9A%E4%B9%89-ref" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>4、customRef() 自定义 ref</h3><p><code>customRef()</code>方法用来创建一个自定义的 ref，显式声明对其依赖追踪和更新触发的控制方式。</p><p><strong>语法</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> value<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">// 返回值为ref对象</span>
<span class="token keyword">const</span> refObj<span class="token operator">=</span><span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">track<span class="token punctuation">,</span>trigger</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// 返回一个对象</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 获取ref的值时，会调用get方法</span>
            <span class="token keyword">return</span> value<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 修改ref的值时，会调用set方法</span>
            value<span class="token operator">=</span>newValue
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注：</p><p>为了帮助大家更好的理解<code>customRef()</code>的用法，大家可以先按以下思路来创建一个自定义的 ref，实现数据与视图的同步更新。</p><p><strong>第一步：创建 <code>createRef()</code>函数</strong></p><ul><li><code>customRef()</code>方法的返回值为一个<code>ref</code>，该方法接受一个回调函数作为参数。</li><li><code>createRef(value)</code>方法直接将<code>customRef()</code>方法的返回值返回，即返回值为 ref</li><li>参数<code>value</code>为需要转换为<code>ref</code>的原始值</li><li>以下代码中<code>count</code>为原始值 0 转换后的 ref 对象</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// createRef为自定义创建ref的方法，接受一个参数value，value为需要转换为ref的原始值</span>
<span class="token keyword">function</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用createRef将原始值 0 创建成 ref，即count为ref对象</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>第二步：<code>customRef()</code>回调函数的返回值</strong></p><ul><li><code>customRef()</code>方法的回调函数返回一个带 get 和 set 的对象</li><li>当访问 count 的值（<code>count.vaue</code>）时，会调用 get 方法获取到对应的值</li><li>当修改 count 的值（<code>count.value=100</code>）时，会调用 set 方法来更新对应的值</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 当访问ref对象的value值时，会调用get方法</span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">get被调用了，此时返回的value值为：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 当给ref对象的value重新赋值时，会调用set方法</span>
      <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">set被调用了，此时value的值更新为：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用createRef将原始值 0 创建成 ref，即count为ref对象</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 读取ref中的值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 更新ref的value值</span>
count<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>第三步：在组件模板中使用 count</strong></p><ul><li>在组件模板中使用自定义的 ref 对象 count</li><li>定义 update 方法，当点击更新按扭时，调用该方法更新 count 的值</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> customRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">function</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token comment">// 当访问ref对象的value值时，会调用get方法</span>
            <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">get被调用了，此时返回的value值为：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">return</span> value<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// 当给ref对象的value重新赋值时，会调用set方法</span>
            <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">set被调用了，此时value的值更新为：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 使用createRef将原始值 0 创建成 ref，即count为ref对象</span>
      <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 读取ref中的值</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 更新ref的value值</span>
        count<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 对外暴露属性与方法</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        count<span class="token punctuation">,</span>
        update<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>更新myRef的值<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>myRef的值:{{ count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>以上代码最终渲染效果如下：</p></blockquote><p><img src="https://www.arryblog.com/assets/img/GIF2023-7-913-52-10.ebc781dc.gif" alt="GIF2023-7-913-52-10"></p><p>分析执行结果</p><ul><li>当我们点击对应的更新按扭更新<code>count</code>的值为 100 时，set 方法被调用了，但页面视图并没有同步更新。</li><li>因为我们并没有在<strong>get 中收集依赖</strong>（建立对应属性与相关 DOM 的依赖，让 Vue 知道数据更新后要更新那些 DOM）</li><li>也没有在<strong>set 方法中触发依赖</strong>（根据 get 方法中建立的依赖关系，触发 DOM 的更新）</li></ul><p><strong>第四步：<code>customRef()</code>回调函数的<code>track</code>与<code>trigger</code>参数</strong></p><blockquote><p><code>customRef((track, trigger) =&gt; { })</code>回调函数的两个参数</p></blockquote><ul><li><code>track()</code>方法用来在 get 方法被调用时，收集依赖</li><li><code>trigger()</code> 方法用来在 set 方法被调用时，触发依赖</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> customRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">function</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">track<span class="token punctuation">,</span> trigger</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token comment">// 当访问ref对象的value值时，会调用get方法</span>
            <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">get被调用了，此时返回的value值为：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">return</span> value<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// 当给ref对象的value重新赋值时，会调用set方法</span>
            <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
              <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">set被调用了，此时value的值更新为：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 使用createRef将原始值 0 创建成 ref，即count为ref对象</span>
      <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 读取ref中的值</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 更新ref的value值</span>
        count<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        count<span class="token punctuation">,</span>
        update<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>更新myRef的值<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>myRef的值:{{ count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>以上代码最终渲染效果如下：</p></blockquote><p><img src="https://www.arryblog.com/assets/img/GIF2023-5-2314-52-23.eaac56f0.gif" alt="GIF2023-5-2314-52-23"></p><h3 id="_4-1、总结-customref-方法使用流程" tabindex="-1"><a class="header-anchor" href="#_4-1、总结-customref-方法使用流程" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_4-1%E3%80%81%E6%80%BB%E7%BB%93-customref-%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>4.1、总结：customRef() 方法使用流程</h3><p><strong>第一步：</strong></p><ul><li>创建一个自定义函数，该函数接受一个参数，这个参数为需要转换为 ref 的原始值</li><li>函数的返回值为<code>customRef()</code>方法的返回值 ref</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>第二步：</strong></p><ul><li>创建 customRef 回调函数的返回值，返回值为一个带有 get 和 set 的对象。</li><li>当访问 ref 的 value 值时调用 get 方法，所有在此时需要处理的相关逻辑都可以写在 get 中</li><li>当修改 ref 的 value 值时调用 set 方法，所有在此时南要处理的相关链辑都可以写在 set 中</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>第三步：</strong></p><ul><li>在 get 方法返回值前调用<code>track()</code>方法，收集依赖</li><li>在 set 方法更新值之后调用<code>trigger()</code>方法，触发依赖</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">track<span class="token punctuation">,</span> trigger</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
        <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>通过前面的学习，我们知道如何创建自定义 ref，那自定义 ref 应该在什么场景下使用呢？</p></blockquote><p>注：自定义 ref 使用场景</p><ul><li>当我们在获取数据或更新数据时需要做一些额外的操作，就可以用自定义 ref。</li><li>比如：页面视图的更新并不需要同步更新，而是数据在 200ms 内如果没有连续更新，则再更新视图。</li></ul><blockquote><p>接下来，我们就来学习下 Vue 官方提供的《自定义防抖 ref》案例</p></blockquote><h3 id="_5、实战应用-自定义防抖-ref" tabindex="-1"><a class="header-anchor" href="#_5、实战应用-自定义防抖-ref" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_5%E3%80%81%E5%AE%9E%E6%88%98%E5%BA%94%E7%94%A8-%E8%87%AA%E5%AE%9A%E4%B9%89%E9%98%B2%E6%8A%96-ref" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>5、实战应用：自定义防抖 ref</h3><p>当在输入框中连续输入内容的间隔时间超过<code>500ms</code>，则更新 h3 标签显示的内容，否则不更新。</p><blockquote><p>如下：</p></blockquote><p><img src="https://www.arryblog.com/assets/img/GIF2023-5-2315-39-31.3669680c.gif" alt="GIF2023-5-2315-39-31"></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> customRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">function</span> <span class="token function">useDebouncedRef</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">500</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 用来保存定时器</span>
        <span class="token keyword">return</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">track<span class="token punctuation">,</span> trigger</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">return</span> value<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token comment">// 间隔时间不够500ms,则清除上一次定时器，重新计时</span>
              <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
              timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
                <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 创建 ref</span>
      <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token function">useDebouncedRef</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 对外暴露text</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        text<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>{{ text }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6、总结" tabindex="-1"><a class="header-anchor" href="#_6、总结" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_6%E3%80%81%E6%80%BB%E7%BB%93" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>6、总结</h3><ul><li><code>shallowRef()</code> 用来创建浅层的 ref 对象，只对<code>.value</code>的访问是响应式的，对象的其它均为非响应式</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
proxy<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 具有响应性，值被修改后页面视图会同步更新</span>
proxy<span class="token punctuation">.</span>value<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 不具有响应性，值被修改后页面视图不会更新</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>isRef()</code>判断一个对象是不是 ref 对象，是返回 true，不是返回 false</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isRef</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isRef</span><span class="token punctuation">(</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>unref()</code>方法的参数是 ref，则返回 ref 对象的 value 属性值，否则返回参数本身。</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">unref</span><span class="token punctuation">(</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token function">unref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token function">unref</span><span class="token punctuation">(</span><span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Proxy（Object){a:1}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>customRef()</code>用来自定义 ref 对象，主要掌如何定义一个 ref 对象及实现自定义防抖 ref</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// value为ref对象value属性的原始值</span>
<span class="token keyword">function</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">track<span class="token punctuation">,</span> trigger</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
        <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 定义一个ref对象</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="五、setup-函数参数" tabindex="-1"><a class="header-anchor" href="#五、setup-函数参数" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#%E4%BA%94%E3%80%81setup-%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>五、setup() 函数参数</h2><p>深入浅出 setup() 函数参数 props、context、什么情况下会使用 setup() 函数</p><h3 id="_1、参数-props" tabindex="-1"><a class="header-anchor" href="#_1、参数-props" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_1%E3%80%81%E5%8F%82%E6%95%B0-props" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>1、参数 props</h3><ul><li><code>setup()</code>函数有两个参数，第一个参数是组件的<code>props</code>，和标准的组件一致。</li><li>一个 <code>setup</code> 函数的 <code>props</code> 是响应式的，并且会在传入新的<code>props</code> 时同步更新。</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;title&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 访问传递的title属性</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 访问传递的list属性</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>代码示例</strong></p><ul><li><code>App.vue</code></li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">import</span> List <span class="token keyword">from</span> <span class="token string">&quot;./components/List.vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;新闻1..&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;新闻2..&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;新闻3..&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;新闻标题&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 更新方法</span>
      <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span>title<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;更新后--标题&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;新加内容一条&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        list<span class="token punctuation">,</span>
        title<span class="token punctuation">,</span>
        update<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      List<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>List</span> <span class="token attr-name">:list</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@event-update</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>List</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>List.vue</code></li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;title&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">emits</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;eventUpdate&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 访问传递的title属性</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 访问传递的list属性</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$emit(&#39;eventUpdate&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>更新<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>{{ title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最终渲染效果如下：</p><blockquote><p>点击更新按扭更新 props 的内容，<code>3s</code>后，<code>setup()</code>函数中的 props 的值也更新为了最新的。</p></blockquote><p><img src="https://www.arryblog.com/assets/img/GIF2023-7-914-23-39.9a84900a.gif" alt="GIF2023-7-914-23-39"></p><h3 id="_1-1、解构-props" tabindex="-1"><a class="header-anchor" href="#_1-1、解构-props" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_1-1%E3%80%81%E8%A7%A3%E6%9E%84-props" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>1.1、解构 props</h3><p>通过上面案例我们知道 props 参数的值为一个响应式代理对象，但如果直接解构<code>props</code>部分属性将失去响应性。因此推荐通过<code>props.xxx</code>的形式来使用 props</p><ul><li>如果我们确实需要解构<code>props</code>，但解构后对应变量仍需保持响应性，可以利用<code>toRefs()</code>工具函数来实现</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> list <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>如果我们需要将 props 中的某一个 prop 传递到外部，并保持其响应性，则可以利用<code>toRef()</code>工具函数来实现</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> title <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> <span class="token string">&#39;title&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、参数-context" tabindex="-1"><a class="header-anchor" href="#_2、参数-context" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_2%E3%80%81%E5%8F%82%E6%95%B0-context" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>2、参数 context</h3><p>传入 <code>setup</code> 函数的第二个参数 context 是一个 <strong>Setup 上下文</strong>对象。上下文对象暴露了其他一些在 <code>setup</code> 中可能会用到的值。</p><blockquote><p>如下：</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// context是非响应式的普通对象</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;context&quot;</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span>
    <span class="token comment">// 透传 Attributes（非响应式的对象（只读），等价于 $attrs）</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;attrs&quot;</span><span class="token punctuation">,</span> context<span class="token punctuation">.</span>attrs<span class="token punctuation">)</span>

    <span class="token comment">// 插槽（非响应式的对象，等价于 $slots）</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;slots&quot;</span><span class="token punctuation">,</span> context<span class="token punctuation">.</span>slots<span class="token punctuation">)</span>

    <span class="token comment">// 触发事件（函数）等价于 $emit）</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;emit&quot;</span><span class="token punctuation">,</span> context<span class="token punctuation">.</span>emit<span class="token punctuation">)</span>

    <span class="token comment">// 暴露组件公共属性（函数）</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;expose&quot;</span><span class="token punctuation">,</span> context<span class="token punctuation">.</span>expose<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>以下为上面代码在某个案例中的打印结果</p></blockquote><p><img src="https://www.arryblog.com/assets/img/image-20230709150617759.405c7a10.png" alt="image-20230709150617759"></p><p><strong>代码示例</strong>：</p><ul><li>App.vue</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">import</span> List <span class="token keyword">from</span> <span class="token string">&quot;./components/List.vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;新闻标题&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 更新</span>
      <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        title<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;最新动态&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        title<span class="token punctuation">,</span>
        list<span class="token punctuation">,</span>
        update<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 子组件List对外暴露了num属性，所以可以访问到</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;num&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>myList<span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 100</span>
      <span class="token comment">// 子组件List并没有对外暴露count属性</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>myList<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      List<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>List</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@update-event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--默认插槽内容--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--具名插槽内容--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>footer</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...点击查看更多<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>List</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>List.vue</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">emits</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;updateEvent&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// context是非响应式的普通对象</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;context&quot;</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 透传 Attributes（非响应式的对象（只读），等价于 $attrs）</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;attrs&quot;</span><span class="token punctuation">,</span> context<span class="token punctuation">.</span>attrs<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 插槽（非响应式的对象，等价于 $slots）</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;slots&quot;</span><span class="token punctuation">,</span> context<span class="token punctuation">.</span>slots<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 触发事件（函数）等价于 $emit）</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;emit&quot;</span><span class="token punctuation">,</span> context<span class="token punctuation">.</span>emit<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 暴露组件公共属性（函数）</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;expose&quot;</span><span class="token punctuation">,</span> context<span class="token punctuation">.</span>expose<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 暴露组件公共属性</span>
      <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      context<span class="token punctuation">.</span><span class="token function">expose</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>{{ title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--默认插槽--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span>显未主体内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--具名插槽--&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.arryblog.com/assets/img/image-20230710162733492.0a3bb939.png" alt="image-20230710162733492"></p><blockquote><p>通过上图可以看到，<code>context</code>上下文对象是非响应式的，可以安全地解构</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token comment">// props是响应式的</span>
    <span class="token comment">// attrs,slots非响应式（只读的） emit、expose为函数</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> <span class="token punctuation">{</span> attrs<span class="token punctuation">,</span> slots<span class="token punctuation">,</span> emit<span class="token punctuation">,</span> expose <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>attrs</code> 和 <code>slots</code> 都是有状态的对象，它们总是会随着组件自身的更新而更新</li><li>这意味着你应当避免解构它们，并始终通过 <code>attrs.x</code> 或 <code>slots.x</code> 的形式使用其中的属性</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">/* 不应该解构他们 */</span>
<span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> <span class="token punctuation">{</span> attrs<span class="token punctuation">,</span> slots<span class="token punctuation">,</span> emit<span class="token punctuation">,</span> expose <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>xx<span class="token punctuation">,</span>xxx<span class="token punctuation">}</span><span class="token operator">=</span>attrs<span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>xx<span class="token punctuation">,</span>xxx<span class="token punctuation">}</span><span class="token operator">=</span>slots
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、什么情况下会使用-setup-函数" tabindex="-1"><a class="header-anchor" href="#_3、什么情况下会使用-setup-函数" aria-hidden="true">#</a> <a href="https://www.arryblog.com/vip/vue/composition-api-setup-reactive-ref.html#_3%E3%80%81%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%E4%BC%9A%E4%BD%BF%E7%94%A8-setup-%E5%87%BD%E6%95%B0" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>3、什么情况下会使用 setup() 函数</h3><p>通过前面的学习，我们知道组合式 API 可以与选项式 API 共存，也就是说，我们可以在选项式 API 中使用<code>setup()</code>函数。</p><p>但在实际开发中，我们并不推荐两种方式混合使用，更希望在项目中选择其中的一种方式来开发。但在以下情况，选项式 API 会与组合式 API 共存。</p><ul><li><strong>旧项目改造：</strong> 我们在改造旧项目时，旧项目使用的是选项式 API 书写的，但是我们现在想在原来的基础上集成基于组合式 API 的代码。</li><li><strong>非单文件组件：</strong> 在非单文件组件中我们想要使用组合使 API 时，就必需要使用到<code>setup()</code>函数。</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// App.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;https://unpkg.com/vue@3/dist/vue.esm-browser.js&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Vue!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;{{msg}}&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>温馨提示</p><p>对于单文件组件开发中想要使用组合式 API，我们更推荐在<code>&lt;script setup&gt;....&lt;/script&gt;</code>标签中来书写，代码更加简加及符合程序员编写代码的习惯。</p><blockquote><p>在本章的第三个版块《单文件组件中使用组合式 API》中会讲到<code>&lt;script setup&gt;</code></p></blockquote></div></div><footer class="page-meta"><div class="meta-item edit-link"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M2 26h28v2H2z" fill="currentColor"></path><path d="M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Edit this page<!--]--></span></span></div><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Last Updated 2023/10/24 22:08:04<!--]--></span></span></div></footer><nav class="page-nav"><p class="hasNext inner"><!----><span class="page-nav-item next">Vue 组合式 API - watch 和 watchEffect、自定义指令 → </span></p></nav><!----></main><!--]--><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#一、初识-setup-函数" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#一、初识 setup() 函数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#一、初识 setup() 函数<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_1、setup-函数的返回值" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#1、setup() 函数的返回值"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#1、setup() 函数的返回值<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_2、setup-函数中-this-指向" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#2、setup() 函数中 this 指向"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#2、setup() 函数中 this 指向<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_3、setup-函数执行时机" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#3、setup() 函数执行时机"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#3、setup() 函数执行时机<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_4、setup-函数暴露非响应式属性" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#4、setup() 函数暴露非响应式属性"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#4、setup() 函数暴露非响应式属性<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_5、总结" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#5、总结"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#5、总结<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#二、初始-reactive-与-ref-响应式-api" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#二、初始 reactive 与 ref 响应式 API"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#二、初始 reactive 与 ref 响应式 API<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_1、初识-reactive-方法" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#1、初识 reactive() 方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#1、初识 reactive() 方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_1-1、深层响应性" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#1.1、深层响应性"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#1.1、深层响应性<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_1-2、reactive-无法转换基本数据类型" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#1.2、reactive() 无法转换基本数据类型"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#1.2、reactive() 无法转换基本数据类型<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_1-3、reactive-方法底层实现原理" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#1.3、reactive() 方法底层实现原理"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#1.3、reactive() 方法底层实现原理<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_2、初识-ref-方法" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#2、初识 ref() 方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#2、初识 ref() 方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_2-1、访问-ref-对象的-value-属性" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#2.1、访问 ref 对象的 value 属性"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#2.1、访问 ref 对象的 value 属性<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_2-2、ref-方法转换对象" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#2.2、ref() 方法转换对象"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#2.2、ref() 方法转换对象<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_2-3、ref-方法的底层实现" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#2.3、ref() 方法的底层实现"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#2.3、ref() 方法的底层实现<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_3、总结" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#3、总结"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#3、总结<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#三、深入响应式-api-工具函数-一" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#三、深入响应式 API - 工具函数（一）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#三、深入响应式 API - 工具函数（一）<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_1、响应式对象会自动解包-ref-属性" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#1、响应式对象会自动解包 ref 属性"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#1、响应式对象会自动解包 ref 属性<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_2、不能被自动解包的集合" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#2、不能被自动解包的集合"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#2、不能被自动解包的集合<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_3、解构响应式对象" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#3、解构响应式对象"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#3、解构响应式对象<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_4、toref-方法" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#4、toRef() 方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#4、toRef() 方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_4-1、toref-注意事项" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#4.1、toRef() 注意事项"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#4.1、toRef() 注意事项<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_5、torefs-方法" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#5、toRefs() 方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#5、toRefs() 方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_6、shallowreactive-方法" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#6、shallowReactive() 方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#6、shallowReactive() 方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_7、readonly-方法" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#7、readonly() 方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#7、readonly() 方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_8、isreactive-方法" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#8、isReactive() 方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#8、isReactive() 方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#四、深入响应式-api-工具函数-二" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#四、深入响应式 API - 工具函数（二）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#四、深入响应式 API - 工具函数（二）<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_1、shallowref-方法" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#1、shallowRef() 方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#1、shallowRef() 方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_2、isref-方法" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#2、isRef() 方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#2、isRef() 方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_3、unref-方法" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#3、unref() 方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#3、unref() 方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_4、customref-自定义-ref" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#4、customRef() 自定义 ref"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#4、customRef() 自定义 ref<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_4-1、总结-customref-方法使用流程" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#4.1、总结：customRef() 方法使用流程"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#4.1、总结：customRef() 方法使用流程<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_5、实战应用-自定义防抖-ref" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#5、实战应用：自定义防抖 ref"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#5、实战应用：自定义防抖 ref<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_6、总结" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#6、总结"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#6、总结<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#五、setup-函数参数" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#五、setup() 函数参数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#五、setup() 函数参数<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_1、参数-props" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#1、参数 props"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#1、参数 props<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_1-1、解构-props" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#1.1、解构 props"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#1.1、解构 props<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_2、参数-context" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#2、参数 context"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#2、参数 context<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/xunyu-blog/blogs/web/vue/Vue zuheshi API - setup、reactive yu ref，xiangyingshigongju.html#_3、什么情况下会使用-setup-函数" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="#3、什么情况下会使用 setup() 函数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->#3、什么情况下会使用 setup() 函数<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--]--></ul></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/xunyu-blog/assets/app-3a073675.js" defer></script>
  </body>
</html>
