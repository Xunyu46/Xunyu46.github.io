import{_ as e,r as o,o as c,c as l,b as n,d as s,e as p,a}from"./app-48690364.js";const i={},u=a(`<h1 id="javascript-bom-核心-window-对象属性、方法、事件" tabindex="-1"><a class="header-anchor" href="#javascript-bom-核心-window-对象属性、方法、事件" aria-hidden="true">#</a> JavaScript BOM 核心 Window 对象属性、方法、事件</h1><p>从本章开始，我们来学习 BOM 相关内容，在之前的 DOM 相关内容中，提到的和 window 对象有关的属性，部分也属于 BOM 相关内容，比如定时器。只是因为在 DOM 中要经常用到，所以就提前学习了。</p><p><strong>什么是 BOM</strong></p><ul><li>BOM（Browser Object Model）浏览器对象模型，是 JS 与浏览器窗口交互的接口</li><li>BOM 的核心是 window 对象，表示浏览器的实例</li></ul><blockquote><p>接下来我们就来深入学习下 window 对象</p></blockquote><h2 id="一、window-对象" tabindex="-1"><a class="header-anchor" href="#一、window-对象" aria-hidden="true">#</a> 一、window 对象</h2><ul><li><code>window</code>作为全局变量，代表了脚本正在运行的窗口，暴露给 Javascript 代码</li><li>在有标签页功能的浏览器中，每个标签都拥有自己的 window 对象</li><li>也就是说，同一个窗口的标签页之间不会共享一个 window 对象</li></ul><p><strong>window 对象有两重身份</strong></p><ul><li>在 ECMScript 中为 Global 对象，也就是后面常说的 Node 中的全局对象。</li><li>在浏览器窗口中为 window 对象，所有全局作用域下的 var 声明的全局变量和函数都是 window 对象的属性</li></ul><h3 id="_1、全局变量是-window-属性" tabindex="-1"><a class="header-anchor" href="#_1、全局变量是-window-属性" aria-hidden="true">#</a> 1、全局变量是 window 属性</h3><p>所有全局作用域下 var 声明的全局变量和函数都是 window 对象的属性</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment">// hasOwnProperty 检测当前对象是否拥有该属性</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>a <span class="token operator">==</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>多个 JS 文件之间是共享全局作用域的，即 JS 文件没有作用域隔离功能</li><li>创建<code>a.js</code>和<code>b.js</code>及<code>c.html</code>文件，在<code>c.html</code>页面引入<code>a.js</code>和<code>b.js</code></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// a.js文件代码如下</span>
<span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment">// b.js文件代码如下</span>
<span class="token keyword">var</span> i<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> c<span class="token punctuation">.</span>html文件代码如下 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;js/a.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;js/b.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、内置函数普遍是-window-对象的方法" tabindex="-1"><a class="header-anchor" href="#_2、内置函数普遍是-window-对象的方法" aria-hidden="true">#</a> 2、内置函数普遍是 window 对象的方法</h3><p><code>setInterval()</code>、<code>alert()</code>、<code>Array</code> 等普遍是 window 的方法</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>alert <span class="token operator">==</span> alert<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>setInterval <span class="token operator">==</span> setInterval<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;setInterval&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

window<span class="token punctuation">.</span><span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、浏览器窗口大小" tabindex="-1"><a class="header-anchor" href="#_3、浏览器窗口大小" aria-hidden="true">#</a> 3、浏览器窗口大小</h3><p>window 对象身上的以下 4 个属性用来确定浏览器窗品大小</p><table><thead><tr><th style="text-align:left;">属性名</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">innerWidth</td><td style="text-align:left;">返回浏览器窗口中页面可视区宽（不包含 浏览器边框和工具栏，包括滚动条）</td></tr><tr><td style="text-align:left;">innerHeight</td><td style="text-align:left;">返回浏览器窗口中页面可视区高（不包含 浏览器边框和工具栏，包括滚动条）</td></tr><tr><td style="text-align:left;">outerWidth</td><td style="text-align:left;">返回浏览器窗口自身的实际宽</td></tr><tr><td style="text-align:left;">outerHeight</td><td style="text-align:left;">返回浏览器窗口自身的实际高</td></tr></tbody></table><p>注：</p><p>因为 innerWidth 和 innerHeight 包括了滚动条的宽和高，所以很多时候我们获取页面可视宽和高是通过。</p><p><code>document.body.clientWidth || document.documentElement.clientWidth</code> 来实现</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 浏览器窗口中页面视口大小 包括滚动条</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;innerWidth:&quot;</span> <span class="token operator">+</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;innerHeight:&quot;</span> <span class="token operator">+</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 浏览器窗口大小</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;outerWidth:&quot;</span> <span class="token operator">+</span> window<span class="token punctuation">.</span>outerWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;outerHeight:&quot;</span> <span class="token operator">+</span> window<span class="token punctuation">.</span>outerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 页面可视区大小（不包括滚动条）</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;clientWidth:&quot;</span> <span class="token operator">+</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;clientHeight:&quot;</span> <span class="token operator">+</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.arryblog.com/assets/img/image-20221201145847880.57189c9a.png" alt="image-20221201145847880"></p><h3 id="_4、滚动距离" tabindex="-1"><a class="header-anchor" href="#_4、滚动距离" aria-hidden="true">#</a> 4、滚动距离</h3><table><thead><tr><th style="text-align:left;">属性</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><code>window.scrollX</code></td><td style="text-align:left;">返回文档/页面水平方向滚动的像素值</td></tr><tr><td style="text-align:left;"><code>window.scrollY</code></td><td style="text-align:left;">返回文档在垂直方向已滚动的像素值</td></tr><tr><td style="text-align:left;"><code>window.pageXoffset</code></td><td style="text-align:left;">相当于 scrollX 的别名</td></tr><tr><td style="text-align:left;"><code>window.pageYoffset</code></td><td style="text-align:left;">相当于 scrollY 的别名</td></tr></tbody></table><p>注：</p><p>通常获取页面的水平和垂滚动距离还会通过如下代码获取</p><ul><li>文档水平滚动距离： <code>document.documentElement.scrollLeft || document.body.scrollLeft</code></li><li>文档垂直滚动距离： <code>document.documentElement.scrollTop || document.body.scrollTop</code></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;scrollX:&quot;</span> <span class="token operator">+</span> window<span class="token punctuation">.</span>scrollX<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;scrollY:&quot;</span> <span class="token operator">+</span> window<span class="token punctuation">.</span>scrollY<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;pageXoffset:&quot;</span> <span class="token operator">+</span> window<span class="token punctuation">.</span>pageXOffset<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;pageYoffset:&quot;</span> <span class="token operator">+</span> window<span class="token punctuation">.</span>pageYOffset<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;scrollTop:&quot;</span> <span class="token operator">+</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;scrollLeft:&quot;</span> <span class="token operator">+</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:left;">方法</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><code>scroll(x,y)</code></td><td style="text-align:left;"><code>x，y</code>表示相对视口距离的<code>x</code>和<code>y</code>坐标，<code>scroll(x,y)</code>表示文档滚动到指定坐标位置</td></tr><tr><td style="text-align:left;"><code>scrollBy(x,y)</code></td><td style="text-align:left;"><code>x</code>表示水平方向上要滚动的偏移量，<code>y</code>表示垂直方向上要滚动的偏移量</td></tr></tbody></table><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">html,
  body</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 3000px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 3000px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">button</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.by</span> <span class="token punctuation">{</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 280px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>to<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>滚动到指定位置<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>by<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>滚动一定距离<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  button<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">scroll</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 点击后，跳转到与视口x=100,y=200的坐标位置</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  button<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// window.scrollBy(0, -100); // 每次点击，滚动条向上滚动 100px</span>
    window<span class="token punctuation">.</span><span class="token function">scrollBy</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 每次点击，滚动条向上滚动100px</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、window-其它属性" tabindex="-1"><a class="header-anchor" href="#_5、window-其它属性" aria-hidden="true">#</a> 5、window 其它属性</h3><p><strong>重点提示</strong></p><ul><li>因为 window 对象的属性在全局作用域中有效，所以很多<strong>浏览器 API</strong>及相关<strong>构造函数</strong>等都以 window 对象属性的形式暴露出来</li><li>总结一句话：window 对象身上的属性并非全是与 BOM 操作相关的方法和属性</li></ul><blockquote><p>接下来我们学习<code>window</code>对象身上与<code>BOM</code>相关的属性</p></blockquote><table><thead><tr><th style="text-align:left;">属性</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">location</td><td style="text-align:left;">获取当前面面的 URL 信息</td></tr><tr><td style="text-align:left;">history</td><td style="text-align:left;">对象提供了操作浏览器<strong>会话历史</strong>的接口</td></tr><tr><td style="text-align:left;">navigator</td><td style="text-align:left;">对象包含用户此次活动的浏览器的相关属性和标识</td></tr></tbody></table><h2 id="二、window-location-对象" tabindex="-1"><a class="header-anchor" href="#二、window-location-对象" aria-hidden="true">#</a> 二、window.location 对象</h2><p><strong><code>window.location</code></strong> 只读属性，返回一个 <code>Location</code>对象，其中包含有关文档当前位置的信息。</p><p><code>Location</code> 接口表示其链接到的对象的位置（URL）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>location<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Location</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token comment">// true</span>
window<span class="token punctuation">.</span>location<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.arryblog.com/assets/img/image-20221108141335356.10d5438b.png" alt="image-20221108141335356"></p><blockquote><p>强调：location 对象可以赋值，重新赋值 URL，相当于跳转到当 URL</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 跳转到  http://www.icodingedu.com 这个页面</span>
window<span class="token punctuation">.</span>location <span class="token operator">=</span> <span class="token string">&quot;http://www.icodingedu.com&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1、url-组成部分" tabindex="-1"><a class="header-anchor" href="#_1、url-组成部分" aria-hidden="true">#</a> 1、URL 组成部分</h3><ul><li>URL（Uniform Resource Locator）统一资源定位符</li><li>URL 无非就是一个给定的独特资源在 Web 上的地址</li><li>理论上说，每个有效的 URL 都指向一个唯一的资源</li><li>这个资源可以是一个 HTML 页面，一个 CSS 文档，一幅图像，等等</li></ul><p><strong>URL 的组成部分</strong></p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token property">protocol</span><span class="token punctuation">:</span>//host[<span class="token punctuation">:</span>port]/path/[?query]#fragment  <span class="token comment">/* [] 方括号表示可选 */</span>
<span class="token property">http</span><span class="token punctuation">:</span>//www.arryblog.com/guide/html5/html5.html?targetId=12&amp;preview=0#top
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:left;">组成</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">protocol</td><td style="text-align:left;">URL 对应的协议名，常用的协议有：<code>http</code>、<code>https</code>、<code>ftp</code>、<code>maito</code>、<code>file</code>等</td></tr><tr><td style="text-align:left;">host</td><td style="text-align:left;">主机（域名），如 <code>www.arryblog.com</code></td></tr><tr><td style="text-align:left;">port</td><td style="text-align:left;">网络端口号，可选。如果省略，表示使用默认的端口。如 http 的默认端口是 80</td></tr><tr><td style="text-align:left;">path</td><td style="text-align:left;">路径，用来表示服务器上的一个目录或文件路径 如：<code>guide/html5/html5.html</code></td></tr><tr><td style="text-align:left;">query</td><td style="text-align:left;">查询字符串（参数），以键值对的形式表示，多个用&amp;符号分隔，如：<code>targetId=12&amp;preview=0</code></td></tr><tr><td style="text-align:left;">fragment</td><td style="text-align:left;">片段标识符，<code>#</code>后内容，用来标记已获取资源的文档内的某个位置。如：常见锚点 <code>#top</code></td></tr></tbody></table><h3 id="_2、location-对象的属性" tabindex="-1"><a class="header-anchor" href="#_2、location-对象的属性" aria-hidden="true">#</a> 2、location 对象的属性</h3><p>location 对象上有很多属性，以下就是其中的一部分</p><table><thead><tr><th style="text-align:left;">属性</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><code>location.href</code></td><td style="text-align:left;">获取完整的 URL，也可以重新设置 URL</td></tr><tr><td style="text-align:left;"><code>location.host</code></td><td style="text-align:left;">获取主机名（域名）</td></tr><tr><td style="text-align:left;"><code>location.port</code></td><td style="text-align:left;">获取端口号，如果端口号省略，返回空字符串<code>“”</code></td></tr><tr><td style="text-align:left;"><code>location.pathname</code></td><td style="text-align:left;">返回 URL 中 path 路径部分</td></tr><tr><td style="text-align:left;"><code>location.search</code></td><td style="text-align:left;">返回 URL 中的 query 查询字符串部分内容</td></tr><tr><td style="text-align:left;"><code>location.hash</code></td><td style="text-align:left;">返回 URL 中的 fragment 部分内容。</td></tr></tbody></table><p><img src="https://www.arryblog.com/assets/img/image-20221108142440670.abc8afb5.png" alt="image-20221108142440670"></p><h3 id="_3、处理-url-中-query-部分数据" tabindex="-1"><a class="header-anchor" href="#_3、处理-url-中-query-部分数据" aria-hidden="true">#</a> 3、处理 URL 中 query 部分数据</h3><p>写一个函数，把 URL 中的 query 部分参数转换成对象中的属性和值，然后将这个对象返回，同时要考虑参数的类型。</p>`,56),r={href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/location",target:"_blank",rel:"noopener noreferrer"},k=a(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// location.search得到 URL中的query数据</span>
<span class="token string">&quot;?targetId=99&amp;sort=hot&amp;bool=true&amp;name=张三&quot;</span>

<span class="token comment">// 最终转换成下面这样一个对象</span>
<span class="token punctuation">{</span> <span class="token literal-property property">targetId</span><span class="token operator">:</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token literal-property property">sort</span><span class="token operator">:</span> <span class="token string">&#39;hot&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">bool</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;张三&#39;</span><span class="token punctuation">}</span>
<span class="token comment">// 获取地址中query查询字符串部分内容</span>
<span class="token keyword">var</span> search <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">;</span>
<span class="token comment">// 返回处理后以对象形式呈现的查询字符</span>
paramObj <span class="token operator">=</span> <span class="token function">GetVars</span><span class="token punctuation">(</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>paramObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * GetVars 将取得的查询参数以键值对形式存到对象中，同时考虑数据类型
 * <span class="token keyword">@param</span> <span class="token parameter">search查询的字符串内容</span> 如 ?targetId=99&amp;sort=hot
 */</span>
<span class="token keyword">function</span> <span class="token function">GetVars</span><span class="token punctuation">(</span><span class="token parameter">search</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> oGetVars <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 用来保存返回的参数与参数对应的值</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>search<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 将获取到的字符串，去掉第一个问号，同时将剩下的字符串以 &amp; 来分隔</span>
    <span class="token keyword">var</span> arr <span class="token operator">=</span> search<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//得到如下数组：</span>
    arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> keyValue <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;=&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> key <span class="token operator">=</span> keyValue<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> value <span class="token operator">=</span> keyValue<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token comment">// decodeURIComponent  将已编码 URI 中所有能识别的转义序列转换成原字符</span>
      oGetVars<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">buildValue</span><span class="token punctuation">(</span><span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> oGetVars<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 写一个函数，专门来处理参数值的类型</span>
<span class="token comment">// 1、考虑传过来的值是不是空的，如果为空就返回null</span>
<span class="token comment">// 2、考虑参数是boole值 true和false,返回对应bool值</span>
<span class="token comment">// 3、考虑是不是一个数字类型</span>
<span class="token comment">// 4、考虑是不是一个日期类型</span>
<span class="token comment">// 5、排除上面，最后只有字符串类型</span>
<span class="token keyword">function</span> <span class="token function">buildValue</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1、考虑传过来的值是不是空的，如果为空就返回null</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> value<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token comment">// 2、如果是一个boole值，则返回对应的bool值</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token comment">// 3、全局isFinite() 用来判断被传入的数值是否为一个有限数值，判断时会做数据类型转换</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFinite</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 4、判断是不是一个日期</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFinite</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 5、上面都不满足，最后只能是字符串，并将其返回</span>
  <span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4、数据交互-根据参数显示页面内容" tabindex="-1"><a class="header-anchor" href="#_4、数据交互-根据参数显示页面内容" aria-hidden="true">#</a> 4、数据交互 - 根据参数显示页面内容</h3><ul><li><code>index.html</code>表示首页，用来显示产品列表</li><li><code>goods.html</code>表示产品详细页，根据 URL 中的参数来决定显示那个产品的详细信息</li><li>当点击<code>index.html</code>页面的产品名，就会跳转到<code>goods.html</code>页面，显示对应产品的详细信息</li></ul><p><img src="https://www.arryblog.com/assets/img/GIF2022-11-816-08-32.f7db9c57.gif" alt="数据交互，根据参数来显示页面内容"></p><p><strong><code>index.html</code> 页面源代码</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--
&lt;li&gt;
&lt;a href=&quot;./goods.html?targetId=93&quot;&gt;Web前端高级工程师系统课-星辰班&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;./goods.html?targetId=91&quot;&gt;CSS实战小案例详解&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;a href=&quot;./goods.html?targetId=77&quot;&gt;云原生Kubernetes与云上DevOps新版系统实战&lt;/a&gt;
&lt;/li&gt; 
--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">targetId</span><span class="token operator">:</span> <span class="token number">93</span><span class="token punctuation">,</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;Web前端高级工程师系统课-星辰班&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">mainImage</span><span class="token operator">:</span>
        <span class="token string">&quot;https://sce7a2b9c9d95a-sb-qn.qiqiuyun.net/files/course/2022/08-29/210311f40bcf290736.jpg&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">8680</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">targetId</span><span class="token operator">:</span> <span class="token number">91</span><span class="token punctuation">,</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;30个HTML+CSS实战小案例详解&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">mainImage</span><span class="token operator">:</span>
        <span class="token string">&quot;https://sce7a2b9c9d95a-sb-qn.qiqiuyun.net/files/course/2022/03-19/174949d70767470556.jpg&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">targetId</span><span class="token operator">:</span> <span class="token number">77</span><span class="token punctuation">,</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;云原生Kubernetes与云上DevOps新版系统实战课&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">mainImage</span><span class="token operator">:</span>
        <span class="token string">&quot;https://sce7a2b9c9d95a-sb-qn.qiqiuyun.net/files/course/2020/07-14/122139326c0d505110.png&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">2680</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 遍历我们拿到的数据</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> li <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    a<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&quot;./goods.html?targetId=&quot;</span> <span class="token operator">+</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>targetId<span class="token punctuation">;</span>
    a<span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token string">&quot;_blank&quot;</span><span class="token punctuation">;</span>
    a<span class="token punctuation">.</span>innerText <span class="token operator">=</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>title<span class="token punctuation">;</span>
    li<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ul<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong><code>goods.html</code> 页面源代码</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--
&lt;img  src=&quot;https://sce7a2b9c9d95a-sb-qn.qiqiuyun.net/files/course/2022/08-29/210311f40bcf290736.jpg&quot;
width=&quot;300&quot;
/&gt;
&lt;h3&gt;Web前端高级工程师系统课-星辰班&lt;/h3&gt;
&lt;p&gt;价格：8680&lt;/p&gt; 
--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./getVars.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">targetId</span><span class="token operator">:</span> <span class="token number">93</span><span class="token punctuation">,</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;Web前端高级工程师系统课-星辰班&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">mainImage</span><span class="token operator">:</span>
        <span class="token string">&quot;https://sce7a2b9c9d95a-sb-qn.qiqiuyun.net/files/course/2022/08-29/210311f40bcf290736.jpg&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">8680</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">targetId</span><span class="token operator">:</span> <span class="token number">91</span><span class="token punctuation">,</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;30个HTML+CSS实战小案例详解&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">mainImage</span><span class="token operator">:</span>
        <span class="token string">&quot;https://sce7a2b9c9d95a-sb-qn.qiqiuyun.net/files/course/2022/03-19/174949d70767470556.jpg&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">targetId</span><span class="token operator">:</span> <span class="token number">77</span><span class="token punctuation">,</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;云原生Kubernetes与云上DevOps新版系统实战课&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">mainImage</span><span class="token operator">:</span>
        <span class="token string">&quot;https://sce7a2b9c9d95a-sb-qn.qiqiuyun.net/files/course/2020/07-14/122139326c0d505110.png&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">2680</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">//</span>
  <span class="token keyword">var</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;container&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 获取查询字符串中的targetId</span>
  <span class="token keyword">var</span> search <span class="token operator">=</span> location<span class="token punctuation">.</span>search<span class="token punctuation">;</span>
  <span class="token keyword">var</span> Vars <span class="token operator">=</span> <span class="token function">GetVars</span><span class="token punctuation">(</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span>

  data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>targetId <span class="token operator">===</span> Vars<span class="token punctuation">.</span>targetId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 就是我想要找到用来渲染的那一条数据</span>
      <span class="token comment">// 创建一个DOM碎片</span>
      <span class="token keyword">var</span> frag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 创建图片</span>
      <span class="token keyword">var</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      img<span class="token punctuation">.</span>src <span class="token operator">=</span> item<span class="token punctuation">.</span>mainImage<span class="token punctuation">;</span>
      <span class="token comment">// 创建h3</span>
      <span class="token keyword">var</span> h3 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;h3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      h3<span class="token punctuation">.</span>innerText <span class="token operator">=</span> item<span class="token punctuation">.</span>title<span class="token punctuation">;</span>
      <span class="token comment">// 创建p标签</span>
      <span class="token keyword">var</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> price <span class="token operator">=</span> item<span class="token punctuation">.</span>price <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> item<span class="token punctuation">.</span>price <span class="token operator">:</span> <span class="token string">&quot;免费&quot;</span><span class="token punctuation">;</span>
      p<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">&quot;价格：&quot;</span> <span class="token operator">+</span> price<span class="token punctuation">;</span>

      <span class="token comment">// 先添加到DOM碎片</span>
      frag<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
      frag<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>h3<span class="token punctuation">)</span><span class="token punctuation">;</span>
      frag<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 统一加到container中去</span>
      container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>frag<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、404-页面-定时跳转功能" tabindex="-1"><a class="header-anchor" href="#_5、404-页面-定时跳转功能" aria-hidden="true">#</a> 5、404 页面，定时跳转功能</h3><p><img src="https://www.arryblog.com/assets/img/20221108time404.e0f2dc36.gif" alt="20221108time404"></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.time</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>秒后，页面跳转到首页
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> time <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.time&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> second <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    second<span class="token operator">--</span><span class="token punctuation">;</span>
    time<span class="token punctuation">.</span>innerText <span class="token operator">=</span> second<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>second<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&quot;http://www.icodingedu.com&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6、location-对象的方法" tabindex="-1"><a class="header-anchor" href="#_6、location-对象的方法" aria-hidden="true">#</a> 6、location 对象的方法</h3><blockquote><p>以下是 location 对象身上的一些常见的方法</p></blockquote><table><thead><tr><th style="text-align:left;">方法名</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">assign</td><td style="text-align:left;"><code>location.assign()</code>方法会触发窗口加载并显示指定的 URL 的内容，类似<code>location.href</code> 会有<strong>历史记录</strong>，可通过前进和后退按扭来追回历史页。 如果传入一个无效的 URL，则会抛出一个</td></tr><tr><td style="text-align:left;">replace</td><td style="text-align:left;">用给定的 URL 替换掉当前的资源，<strong>不会有历史记录</strong>，即不能用后退回到原页面</td></tr><tr><td style="text-align:left;">reload</td><td style="text-align:left;">重新加载当前页面，相当于刷新按扭或<code>F5</code> 如果参数 为<code>true</code>，表示<strong>强制刷新</strong> <code>ctrl + F5</code> ，即：要从服务器上加载数据 如果参数为<code>false</code>，表示浏览器可能从<strong>缓存当中加载页面</strong></td></tr></tbody></table><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// assign 相当于href，跳转到一个新的页面</span>
location<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.icodingedu.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 用给定URL替换当前面 不会产生历史记录</span>
location<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.icodingedu.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 重新加载当页面</span>
location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 强制制新，重新从服务器加载数据</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="三、window-history-对象" tabindex="-1"><a class="header-anchor" href="#三、window-history-对象" aria-hidden="true">#</a> 三、window.history 对象</h2><p><strong><code>Window.history</code></strong> 是一个只读属性，用来获取<code>History</code>对象的引用，History 对象提供了操作浏览器<strong>会话历史</strong>的接口</p><p><code>window.history</code>对象相关方法</p><table><thead><tr><th style="text-align:left;">方法</th><th style="text-align:left;">作用</th></tr></thead><tbody><tr><td style="text-align:left;">back</td><td style="text-align:left;">后退功能，返回上一页，相当于用户点击了浏览的 <code>🡰</code> 等价 <code>history.go(-1)</code></td></tr><tr><td style="text-align:left;">forward</td><td style="text-align:left;">前进功能，进入下一页，相当于用户点击了浏览的 <code>➔</code> 等价<code>history.go(1)</code></td></tr><tr><td style="text-align:left;">go</td><td style="text-align:left;">前进与后退， 当参数为<code>1</code>，表示进入下一页， 当参数为<code>-1</code>，表示退回上一页， 如果参数为<code>0</code>，则重新载入当前页面</td></tr></tbody></table><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>history<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 后退</span>
history<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 前进</span>
history<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 前进 进入下一页</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="四、navigator-对象" tabindex="-1"><a class="header-anchor" href="#四、navigator-对象" aria-hidden="true">#</a> 四、navigator 对象</h2><ul><li><code>window.navigator</code>对象包含用户此次活动的浏览器的相关属性和标识</li><li>他有很多属性，但最常用的是 userAgent 这个属性</li><li>userAgent 属性返回当前浏览器的用户代理字符串</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">;</span> <span class="token comment">// 返回用户代理（浏览器）相关信息</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://www.arryblog.com/assets/img/image-20221108201344417.3db96021.png" alt="image-20221108201344417"></p><blockquote><p>我们通常利用这个<code>userAgent</code>属性来判断当前的打开页面的浏览器和设备</p></blockquote><h3 id="_1、检测浏览器并返回浏览器名称" tabindex="-1"><a class="header-anchor" href="#_1、检测浏览器并返回浏览器名称" aria-hidden="true">#</a> 1、检测浏览器并返回浏览器名称</h3>`,26),d={href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/navigator",target:"_blank",rel:"noopener noreferrer"},v=a(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">BrowserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> sBrowser<span class="token punctuation">,</span>
    sUsrAg <span class="token operator">=</span> navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>sUsrAg<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;Firefox&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sBrowser <span class="token operator">=</span> <span class="token string">&quot;Mozilla Firefox&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 火狐</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>sUsrAg<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;Opera&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> sUsrAg<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;OPR&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sBrowser <span class="token operator">=</span> <span class="token string">&quot;Opera&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 欧朋</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>sUsrAg<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;Trident&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sBrowser <span class="token operator">=</span> <span class="token string">&quot;Microsoft Internet Explorer&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>sUsrAg<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;Edge&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sBrowser <span class="token operator">=</span> <span class="token string">&quot;Microsoft Edge&quot;</span><span class="token punctuation">;</span> <span class="token comment">//Edge浏览器</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>sUsrAg<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;Chrome&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sBrowser <span class="token operator">=</span> <span class="token string">&quot;Google Chrome or Chromium&quot;</span><span class="token punctuation">;</span> <span class="token comment">// Chrome</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>sUsrAg<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;Safari&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sBrowser <span class="token operator">=</span> <span class="token string">&quot;Apple Safari&quot;</span><span class="token punctuation">;</span> <span class="token comment">// Safari</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    sBrowser <span class="token operator">=</span> <span class="token string">&quot;unknown&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 不知道</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> sBrowser<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、判断是否为微信环境" tabindex="-1"><a class="header-anchor" href="#_2、判断是否为微信环境" aria-hidden="true">#</a> 2、判断是否为微信环境</h3><p><code>micromessenger</code>为微信内嵌的浏览器，有此标识的基本上可以判断是微信环境吗，但此标识也可以伪造</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 判断是否为微信</span>
<span class="token keyword">const</span> <span class="token function-variable function">isWx</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> ua <span class="token operator">=</span> window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ua<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;micromessenger&quot;</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、设备判断-android、ios、web" tabindex="-1"><a class="header-anchor" href="#_3、设备判断-android、ios、web" aria-hidden="true">#</a> 3、设备判断：android、ios、web</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">isDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(iPhone|iPad|iPod|iOS)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;iOS&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(Android)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;Android&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token string">&quot;Web&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注：</p><ul><li><code>i</code>：代表不区分大小写匹配</li><li><code>()</code>是为了提取匹配字符串的，表达式中有几个<code>()</code>，就有几个相应的匹配字符串</li></ul><h2 id="五、window-相关事件" tabindex="-1"><a class="header-anchor" href="#五、window-相关事件" aria-hidden="true">#</a> 五、window 相关事件</h2><p>接下来我们学习几个非常用要的事件</p><table><thead><tr><th style="text-align:left;">事件名</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">load</td><td style="text-align:left;">整个页面（包括所有外部资源，如：图片、JavaScript 文件和 CSS 文件）加载完成后触发</td></tr><tr><td style="text-align:left;">DOMContentLoaded</td><td style="text-align:left;">在 DOM 树构建完成后立即触发，不用等待图片、JavaScript 文件、CSS 文件或其它资源加载完成。</td></tr><tr><td style="text-align:left;">resize</td><td style="text-align:left;">当调整浏览器的窗口大小时，会触发 resize 事件。 resize 事件触发会很频繁，所以我们在处理时，可以设置节流操作</td></tr><tr><td style="text-align:left;">scroll</td><td style="text-align:left;">当浏览器滚动条发生滚动时触发<code>window.onsrcoll</code>事件</td></tr></tbody></table><p>注：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>DOMContentLoaded\`事件的实际目标是\`document\`，但会冒泡到\`window
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>所以我们可以在<code>document</code>上监听这个事件</p></blockquote><h3 id="_1、load-和-domcontentloaded-事件" tabindex="-1"><a class="header-anchor" href="#_1、load-和-domcontentloaded-事件" aria-hidden="true">#</a> 1、load 和 DOMContentLoaded 事件</h3><ul><li><code>load</code> ：整个页面（包括所有外部资源，如：图片、JavaScript 文件和 CSS 文件）加载完成后触发</li><li><code>DOMContentLoaded</code> ：在 DOM 树构建完成后立即触发，不用等待图片、JavaScript 文件、CSS 文件或其它资源加载完成。</li></ul><blockquote><p>DOMContentLoaded 事件始终在 load 事件之前发生</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我第一个出来&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// DOM树构建完成时触发</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;DOMContentLoaded&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;我第二个出来&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 页面加载完成后触发</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;我第三个出来&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>除了页面加完会触发 load 事件外，其它元素也会触发与之对应的 load 的事件</p></blockquote><table><thead><tr><th style="text-align:left;">元素</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><code>&lt;img&gt;</code>标签</td><td style="text-align:left;">图片会在图片加载完成后触发 load 事件 图片并不需要插入到页面。只要 img 对象添加 src 属性，就会发起 http 请求，下载成功就会触发 load 事件</td></tr><tr><td style="text-align:left;"><code>&lt;script&gt;</code>标签</td><td style="text-align:left;">在 JS 加载完后会触发 load 事件 不过<code>&lt;script&gt;</code>标签要指定 src 属性，同时要插入到文档中，才会发起 http 请求，下载成功才会触发 load 事件</td></tr><tr><td style="text-align:left;"><code>&lt;link&gt;</code>标签</td><td style="text-align:left;">需要指定<code>&lt;link&gt;</code>标签的 href 属性，同时要插入到文档中，才会发起 http 请求，在 CSS 文件全部加载完成后会触发 load 事件</td></tr></tbody></table><h3 id="_1-1、动态加载图片-插入页面" tabindex="-1"><a class="header-anchor" href="#_1-1、动态加载图片-插入页面" aria-hidden="true">#</a> 1.1、动态加载图片，插入页面</h3><p>load 加载成功，触发 load 事件</p><ul><li>图片加载完成后触发 load 事件，图片并不需要插入到页面。</li><li>只要 img 对象添加 src 属性，就会发起 http 请求，下载成功就会触发 load 事件</li><li>error 加载失败，触发 error 事件</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * loadImg 动态加载图片
 * <span class="token keyword">@param</span> <span class="token parameter">url</span> 图片地址
 */</span>
<span class="token keyword">function</span> <span class="token function">loadImg</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建img对象</span>
  <span class="token comment">// 图片加载成功，插入到页面</span>
  img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// alert(&#39;加载成功&#39;)</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 图片加载失败，在页面显示图片加载失败</span>
  img<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">&quot;图片加载失败&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  img<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> url <span class="token operator">=</span>
  <span class="token string">&quot;https://sce7a2b9c9d95a-sb-qn.qiqiuyun.net/files/course/2022/08-29/210311f40bcf290736.jpg&quot;</span><span class="token punctuation">;</span>
<span class="token function">loadImg</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2、动态加载-js" tabindex="-1"><a class="header-anchor" href="#_1-2、动态加载-js" aria-hidden="true">#</a> 1.2、动态加载 JS</h3><ul><li>在 JS 加载完后会触发 load 事件</li><li>不过<code>&lt;script&gt;</code>标签要指定 src 属性，同时要插入到文档中，才会发起 http 请求，下载成功才会触发 load 事件。</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * loadScript 动态加载JS文件
 * <span class="token keyword">@param</span> <span class="token parameter">src</span> js文件地址
 * <span class="token keyword">@param</span> <span class="token parameter">callback回调函数，js加载完成后，要处理的事情</span>
 */</span>
<span class="token keyword">function</span> <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token parameter">src<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  script<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">typeof</span> callback <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">?</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> callback<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  script<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;加载失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 指定src属性值，并插入到页面中</span>
  script<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不插入到页面，load事件永远不会触发</span>
<span class="token punctuation">}</span>

<span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">&quot;./a.js&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;加载成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3、动态加载-css" tabindex="-1"><a class="header-anchor" href="#_1-3、动态加载-css" aria-hidden="true">#</a> 1.3、动态加载 CSS</h3><ul><li>在 CSS 文件全部加载完成后会触发 load 事件</li><li>和<code>&lt;script&gt;</code>标签一样，需要指定 href 属性值，并且要把<code>&lt;link&gt;</code>标签插入到文档发中才会开始下载 CSS 样式，下载完成后才会触发 load 事件</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 动态插入外链css
 * href css外链地址
 */</span>
<span class="token keyword">function</span> <span class="token function">loadCSS</span><span class="token punctuation">(</span><span class="token parameter">href</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> link <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;link&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  link<span class="token punctuation">.</span>rel <span class="token operator">=</span> <span class="token string">&quot;stylesheet&quot;</span><span class="token punctuation">;</span>
  link<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
    <span class="token string">&quot;load&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;css加载成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token boolean">false</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  link<span class="token punctuation">.</span>href <span class="token operator">=</span> href<span class="token punctuation">;</span>
  <span class="token comment">// 把link标签插入到head标签中</span>
  <span class="token keyword">var</span> head <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;head&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">loadCSS</span><span class="token punctuation">(</span><span class="token string">&quot;./index.css&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、resize-事件" tabindex="-1"><a class="header-anchor" href="#_2、resize-事件" aria-hidden="true">#</a> 2、resize 事件</h3><ul><li>当调整浏览器的窗口大小时，会触发<code>resize</code>事件</li><li><code>resize</code>事件触发会很频繁，所以我们在处理时，可以设置节流操作</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onresize</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>onresize <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * 节流函数
 * fn 事件处理函数
 * delay 函数执行间隔时间
 */</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 函数体执行代码</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 开锁</span>
      timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、srcoll-事件" tabindex="-1"><a class="header-anchor" href="#_3、srcoll-事件" aria-hidden="true">#</a> 3、srcoll 事件</h3><ul><li>当浏览器滚动条发生滚动时触发<code>window.onsrcoll</code>事件</li><li>如果某个元素内的内容溢出，显示了滚动条，滚动对应的滚动条，也会触发<strong>对应</strong>的<code>scroll</code>事件</li><li><code>scroll</code>事件的触发频率也非常的快，所以了要根据实际业务场景来添加节流操作</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onscroll</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.arryblog.com/assets/img/GIF2022-11-822-45-11.60ca9047.gif" alt="GIF2022-11-822-45-11"></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.box</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> scroll<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.box1</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  box<span class="token punctuation">.</span><span class="token function-variable function">onscroll</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="data:image/gif;base64,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Z2J3XvqnYEEAACH5BAEUAAAALAAAFgAwAb4BpAD/APDw8P///3h4eBoapmSv6Omvrhoarq7m/5Eapv//1Mz////NuhpmxRoauun////mxWQapsyPphqP1P//6K5mppHN/8yvrpHN1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAX/ICCOZGmeaKqubOu+cCzLQW3f9qzvfO//wKBwGMQZa8SkcslsOp+9oxFKrVqv2CxJitN6v+Cw2MS9jc/otHrNbrvf8Lh8Tq/b7/i8fs/v+/+AgYKDhIWGh4iJiouMjY6PkJGSk5SVlpeYmZqbnJ2en6ChoqOkpaanqKmqq6ytrq+wsbKztLW2t7i5uru8vb6/wMHCw8TFxsfIycrLzM3Oz9DR0tPU1dbX2Nna29zd3t/g4eLj5OXm5+jp6uvs7e7v8PHy8/T19vf4+fr7/P3+LAMCChwo8J8igggDGkyUEOFCRA0JPjwUceDEixgzatzIsaPHjyBDihxJsqTJkyhT/6pcybKly5cwY8qcSbOmzZs4c+rcybOnz59AgwodSrSo0aNIkypdyrSp06dQo0qdSrWq1atYs2rdyrWr169gw4odS7as2bNo06pdy7at27dw48qdS7eu3bt48+rdy7ev37+AAwseTLiw4cOIEytezLix48eQI0ueTLmy5cuYM2vezLmz58+gQ4seTbq06dOoU6tezbq169ewY8ueTbu27du4c+vezbu379/AgwsfTry48ePIkytfzry58+fQo0ufTr269evYs2vfzr27CgHgw4sfT768+fPo06tfz769+/fw48ufT7++ffFl8uvfz7+///8ABijggAQWaOCBBnqn4P+CDDbYiAB0hTeXeHKNNwMEERyAAFcUvkBBBQ1coGFXHbYgQQEAGDAiiRLCoOKGHLbo4opalTgjjFhZOMOLNcooA49Z+fgjjTn2AKRbBhCg5JINPODgk1BGKeWU/CBo5ZVYZqnlllx22SWVYIYp5phklrlKkko2+ZYBaiqQgJpyHQmXnG9J4MACcjFAwAR5EgDnWxjeGVegeMJFqFwSLMmkk2Y26uijkEZqppeUVmrppZhmaqmknHbq6aeghiqEnovO5eafcwoap6qGRoAioBEoySddEhD5lpuvxoWrXB+yuhaaSuYq6rDEFmvssVpoquyyzDbrbKXIRivttNRW25ylmwQI61ai2Q4aAQYJaLvWhxPsuuad5ra1a7psSdBmuG4xsCK7anGraLC6wisXvdb26++/AAeM1bMEF2zwwQgHIPDCDDfs8MOCkbqkr2rJiyNcFs+VcZ8TFxrXh7a6haG46iYwa1x6WiAXhiezBSwBKkMs88w012zzQwnnrPPOPCd4889ABy300DthSwDFaiUZc6tLw+Uuo3CRay/JZ2Ebs55UFxUCACH5BAEKAAAALL0AGwANAEkAoQD/APHx8Xh4eAAAAAIrjI+py+0Oopy02ouz3rz7D4biSJbmiabqyrbuC8fyTNe2LeT6zvf+DwwGCwAh+QQBCgAAACy9ACAADQBGAKEA/wDx8fF4eHgAAAACJoyPqQntD6OctNqLs968+w+G4kiW5omm6sq27gvH8hwL9o3nel4AACH5BAAKAKsALL0AIgANAEQAoKioqAAAAAIchI+py+0Po5y02ouz3rz7D4biSJbmiabqyrZbAQAh+QQAPACrACy9ACIADQBEAKDBwcEAAAACHISPqcvtD6OctNqLs968+w+G4kiW5omm6sq2WwEAOw==" alt="GIF2022-11-822-42-50"></p><h3 id="_4、返回顶部" tabindex="-1"><a class="header-anchor" href="#_4、返回顶部" aria-hidden="true">#</a> 4、返回顶部</h3><p>实现效果</p><p><img src="data:image/gif;base64,R0lGODlhGAKVAXcAACH5BAAyAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAGAKVAaf4+Pjx8fHd3d3z9Pbu8PL3+Pj67e3h4eL/55PBwcGqqqrS0tLM0NfsyElfY2jIyMjg4ufe4OLMz9AAAADFIh88QEO15/+ZmZn//9Dy9PXUjUNVX3ByseeRQGw8jdDU///ssWyioqKwsLCs3d1obHCRz/+RkZHZ2dn//+ePSgByrN3/z488abL/57Ld3ci1aUNiY2Xi5OndrHLIkEe5ubkASo/I3d0AAHLdxY/q6ury0V5yQI/n6eoAcaz67b88QGxHAHJHSo+scQBQUFDnoF/X2NnZMCVyQEPIoNny13t9gISOj5GPSkeXmZrqjoiGiY1yQGyscUdHkMjd3az45OT68fG7vL7VY2H6wIzVYF7s///Fer/o6u7T2e10dXbhi4qRQI+Pxd3ss7KRlJdyAADqsbDkmpjy1m+Qk5bJNDLLPDrxyclrbG723t3RUlDtvLvcel/TW1manaD67+/c7e3fhYTcennKOTZHAADTV1VmcH/IW6b12dg8QI/MPjvOwO1dZ3j67dlyabLIIowAAEfV2N7FIoxysbKQmKSFhoj62abbeXeZn6tyAEe1sWxlb3615+e8wMnFW6bExcXrt7bcwIzOW4yRz+eRQENysdC1aWyqr7mLi4uJkJ2srHLwxcWRjdDTWx/ceh+PxcjI3chyaWxykI/3399HkKzn2abTel/n7b/FIl/MPzzOIh/KzdFyaUNyjdD24eHc7b+sxY+1seeRl6Osxays3cjOW6a1z7KRsbKmpqaPkEeZoKvIkHLOeozIer9ycQCRabK1aY/TwKZyAHLUz4/TW4w8aWzUjWxHAEfjmJcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAI/wADCBxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFiwcBaNzIsaPHjyBDihxJsqTJkyhTqiR5Ko6aK1/K8DFAs6bNmzhz6qzJp8yXK2riyDqp4MHAAQKRBlDKNKnTpU+bQp0qtWrUq1SxWs3KdatXrWC7hv0qtizZs1jNjl2rtu2AAivjyp1Lt67du8zUrNnJt6/fnGvumDFZdOmAw4gTK17MuLHjx5AjS55MubLly5gza97MmTHcu6BDix49kgCPGDFyEFhZxY2dOX9jy+ZrJ08VkgoWQEXrli3v376D9x4OnLjw4siPKzdO9TPp59CjoxyAOgaE6xCqDzhZJc8b2LPDi/+n+cb2yMKG0x9Wj3S9+/bw2ct/Pz8+/fv289ffj5+//v4A/iegfwQGWOCABiaI4IKGvSXdgxBGyAVq2FWYXWomufFGFeN1GF555+mm4IEkjmgigyeWiOKKKraY4osswqgeDzwYuFSEOIqEYY4nUXhdBBZiFwMPJJnxmodIymbHYCGh155hBARQQJRTSknllVZmWeWWWHKpZZdgfimml2SGWeaYZqaJ5ppntqmmm2y+iSV8clpZRBEEPElnnFpaYcVu9R02F0FzLUBDAgpcEMIJGh0QwgUKJEDDA3I94IADlNJFwqYOcOopCZ2iNCEEQGJXaqnYERkSFX4k6epfc6j/QUWTIgaQQQEBEICrrrnu6muvwPIq7K/DBkvsscYmW+yyyDKrbLPQPiuts9RGW+201vqaJ3z5bbvtUrwGwAAJRVh5K7bJIuWFFyg6l9IBCoQQQqRyBSDCvSaYcIFGF+R7rwgByLXEpU3UdenBCCd8UgDWVVgIInro4cuPQm4HUhZ7JUnEFkk6YYQTO61xRZNGHZanizGmjPLKMrasssssI+WmnmtmwMC65Q5wsom6EsAADA4wIJCXTy7lbkkBMJrABUwzXagINISQ7wkn5BsCDSIsoFIOISyxBKideh1CDHFd+pHCJjV8KiIbtL0BIkGS/VEbrfSFBQV45633HzT5/zAIHTb54ArfsRlhOF9+zPpRboBe63i26D4eOeSSV0755ZNnbrmxBDDbua867+peBuJewAYMTxThRbnWugcurgE0oYQSTSTVHq+LpfRACAeI0LS+Ocz1b77Em/DvSiEknHAIZZNw9sHOlzRAkBAA4vYGepBKsdweiXHFbFggcRMRehtSCd6GAC6bxyDvdIUYIDm53pQmw2l/nffzmf/++Pevv//8+x+bhuatM4UuSiS4kgJIYAUeDOQB5LISncqElCIwgAEKgAENrKDBC+bsds05SdT6FQLdAGABj2KaCFbSOxoooHgKuBejVDIw5R1sCWVzwEfAZraSjOpU1bveI/+ox4WP1MEJ4NkJ+fSWN/EFAhmAIwISsMCxV+HkC3WIn4iQ0jPPDetzvQJjF7X1xTKS8YxhNGMa0TjGNbqxjXCckhrjKEY5stGOb8QjHeeoxz7W8XN1HNrrgBUAGEBFBEpwIOlIF7snZC4CSoCBJFFHoydMEgZKiMCv3mI0kwSgaSEIXg4OAACuMS0EAVMJ1miQL05cYJVxeYINb9i85x0sbdRjxPUYYapUfSQOYvCLFGkSPpoM0wCK2EMqgmEAKloRJ2LIQvyMAhUKygyA2BRgALeZTW5qs5vgHNNudPYWAmRAZxJMjwOkFAES5MBWuCrAAKwQwREFgAeRVIBBMpj/SNuBCz6eZJoJtPaAfCXghPq6QPC2dq8XmiCGIlioSg5wgjHMkgRLyBRKQGXLHpJEbRSDgC0e8QheoqpCH7lDG4TJxCYGIhRMBIbeJLG+j/GlDWnQIpSOBcaY+RRmQH2ZUH86VAMRa5DxCQAJBNIEK0SABrJEHT3LJSVl0Qd2TYDBBTLA1djBoHYC+ZbrjhaST/YreE27QABy0DSJ6g5q/cKaRuMygFkejHsm8ShHEBY9klDvOoWIRCQKESQg4XUjaVhpX47JWPH1bQ85aCbH4NCF2RjOCDe9wzSdctUrlfOboPWmaMM52tCS9rRW6pmVCkA/W+1pnUq9AAlCIDQG/7CBDR+UD9GUIhA0wIAHXOWBA9AwEHkCin5kBYlZTRA8BXDCBMzLQUJTuZJ//Yu6crHrpUi5UR16hIfeJQkPQsqATujhenroBANOqqqOZCGYi20p3sS3RPRVYrKVrWn7dBJNndbvWYDcnIAxN2DNEfjABk5wga91uyoFMlxLVWoTHCgQ21I1tWfEHXxw1QQviEtoXgCr6xBTzYD266A5EIECSJmA6cplAdbVmlxiUNGLjmGueQ3vXhFmEi5UaBPXC/IGNlGhInqkDl/wCxYkwQMDEIFww1TEIGZhCUvQYZiUfSZNvvCFzQLKZPMDU/0KKNaimpmoaA5qml/Ws2tWFf/MSYXtnwhyJ6ONs4xfWo8S0HABSV4ADUqoapv/iZSFpXWGGjlBWt2qyuPNpYazfEJcOOoRtJFketqznpDdBgjtQcBiHfHeX7DAimL8zSaBiEMXfLCHVexBFZXNspavUAb/7pSAquXSghG8awXz+te+DnavPQc70SElA+uE3WEKQDoeULOryMIVnAXCA0myQQEKON1vkdWe5Co3rRdIwAkisDRFMQ27E70XdwV2sDFoxKKXwuFKQlVp6J3EVJsOMkrn1qq/LLGKN/FBLnKQzMjKOjbsQ5ziPFKYEbuZft16EpfGbNqKl/biqMW4xc2UgZNBHFwSfHiy0zMQBjgSw57/vVK4pP0AGKAhAgKJgG+FlucSezKhAtUXzpnGaJXcqy7Ju9QMT3Aw5s37Up9S3sKwk+/rYWc1F8uYTkQxX2LqbQsvpQDHREG4g//lsjv5hDRtfbtzTu6Aj/sjH9V+R7bn0e17bPva5y73ur+d7nfXo8SlVUhJHkySJJCkI/+Lu5AT0OxWmIRBJkEDXEu7kygxFA0mT/nK00DGc8lBzycqhycsgbsHeMIT5OBtkmiXxz3q5UkrBKT2foQKd9CyhxKukzQsnOHUJHF8Jh46x6eJ4hoPfsaHv/Hit4mAU5J278/prc8yUiFKgfic9lSloRlXkGHWEo+2z32VUA+I+xaJ/5FkT/5FMInsg4xjHh2/fnMV25zvP5f7Dx//+tP//vPP/5Tkv3/76x/++Nd/AQiA/8d/BCiABeh/EEc6dtQ5T9JxKxdGUsJVXCVtxdYgvXdn3JYYUbJsaNdaDtJ9IjiCOuJphQUBricSGkJ+z0QJY0cy6QGCAxRm2bcld2YyYxRgDZiDPLiDPqiDQNiDQfiDQliERHiEQ5iERqiEDYhyVSVB8bQzDycQjHSBrgNyzEYz79GBVAFCaEKCYBiGHEEAIXVSUFcSrfEGLOgqlOAGtyES+uIUGvZFhIeE5+IsbyYz/qRsehiDe/iHfhiI8wOIgyiIfViIiHiIiviEiciIi//Ih44YiZAIOWPGRXzUK/RRZjJDTgWULpu0hdoSgmI4imA4AKOSHVwAatzhBouwhh6yCOZxHiWjhW9CQE9YJe3RcSD4gYDkhE34i70IjLkWjMQ4jMaoa8iocsnoi8W4jMLojM0oJ2Z0JY+3fwzYfJz1cHNiiwZ0QMflWUNDiuI4jnJhBncgda74F5+QBucXIruhfKvVe9OIYddELethdmqWj2emj2vGH3OILIKGjOz3j3VETuRUgZyjKx84LaJIjg75kCRBBVnwEjExE+loEz3xE2qQBbcni0nRgegkR9X0LTboHr83hcZHfMKXkizJP8P4JccITuaEfQ4YgzP5ZTL/o4tUwlqlB5E++ZMAQAVlUAdxkAbydZRImZRMlAZxUAdl0JG4gXlAOZVUWZVWeZVYmZVEgWNa2ZVe+ZVgGZZiaRe5MZZmeZZomZZqSZVFsZZu+ZZwGZdyCRplOZd2eZd4mZdu2ZZ62Zd++ZeACZF1GZiEWZiGeZjPwZeIuZiM2ZiOuThS+ZiSOZmUmZeKWZmYmZmaaZaDuZme+ZmgCZSXCYY60ACmWZqn2QBnsJao2QCtWZqrSYqvaZquqZpiOJupGZsPiZu1qZvcx5uwGZoMF5kk2AAIcJzIiZwNsJbGmZzJuZyk2JzOeZzQCYbSOZ3V6ZDX6ZzZuX3b+ZzC2RFX/zMSGNABFhASK1ABLNCTJ/GdyikaGsABABCfK1Ge52kX7kmdoUGfc5GfCNCdIuifAGoXIOABdyGgcWGfdIGgKKGgK+EDO/ABe0mcHeGgHoECUVACoMGgI+EDR1ABFRAEEhoS9MmfFxoFIKqe7mKhCzqd7wkaJhoXHFqcLqqfo1GgB1qj/1kSGMAEICqiAMCiKzGjPGqecdECEbqXXNmgYDCi+KmjA9oRIPAD97kCVEqi8ikSKPACGvoRQioXREoXMTqkUCqGYUqgBvqkNRqlHOGhXYoBw+AuY9qeZdqgRroSSOqk4pgIRsenctGZKoEBTbqhdRoSLAoC6wkSc9oRW//apR7xpTJaqHaxqChxptxnqXSBo2rqomyqERiACY76EZRKEpgKEpBaEnnqkMlTMKsaF6P5qEaqAZmAolTaAh9aAfLpoSCapipRqgCwAom6ERD6ARB6DLuqESUqnwWqASCqoY3aEcwKolT6rACgqSnhq/S5pfKJAppwntGaqLKKohUQqnS6piMRBVnqA1AACRmqEZqanhVwpb0qqV7aAbrwocEKAinapbp6rL8qrfd5rfTqEcBKVuXJrgA7r+ZKnj6Kqw4arVdasEFqpFuaokCqqg6gBACQPImwEoAKq956pRpgoIIqoS0ABeeJoVkqsAuLnsHqqeZpqwaqrt4qn/T/qa8aiqgFULHHqrO/Oq1c6q68WqkD2xErYKAt4AWCUAA+sLQgkKU4qgFXerIBW66cOhISW6DUiqNNCxepyrJXKxI9up49mrOJSrVlCwAYOrNLCwBfS7QtCxISq6siqqCjOhK+2qMra7dpugIiCqxaMLHemqYg0Ad6Ko5ykLEAkLgaqxKvWqGxmqUFW7LVyqsSC7bYibUsELgbkaep+qzJWrkaMazUqrZBK7hbO7RWm7li26QgcAnd+rQ8C6LraaIaQK4lkbdMUAL2mbrVmqLxWrUmkbd3Gp+lG5+Xi6P6mqLyCrdh67Kc67YRarcri7ncqbnOYZ8O2qiAK7gO+rbi/5g8Y1AAiTu+HrsASSC2kasRgEu51nq5zuucpZm+hnqn7rq5nxu0oaupeVq61Nq7p2ut8Zuc8zsSGnAJxPABT6sMFlC6yJqlGIq7pFqjBSwSBXq0ptulyqu6CjudFWyqxcsBx8sByWugAkymLvrB9RqweUq9kZrCDUC/cvuy2nun3JuoNXyf4EuKSmB0PfynD9CpLvyrm0u5VGu61bu6z7mjFiyvVnqe+auh+5um/Xu6yJqoUzq4QcoEHJy7a8rEIQECyRALblsKSeqzKyDFQOq3h+vFnArGIHGysNClI7vFM4uyQQoKKIydcAyyD1ytiUqztqqhPXrH54kBetzB3P/Zxx6RxRrRwuu7x4ssxLsbpLXAt+xruEecxVuaphpwsWqZG0Icye07qP8KokmsxMrJyARrsSMaxfNps8pKxRE6uyLKs4dgpLYaoo7QxRP8xp3qtkfgrC/Aq9HqyYfgo807wKsczPMZrLscBL3Mvj/axm7Mx6N8n/wJsVX6o9N8yqDMzNTJyh2xy6gsuP+6zMP7xcG8y4aroDxruMgKorl8yJgAoruQpGtZFM6MI/lpnP2clf9Mzt030AEtHQYNkQld0OwcnhuRGzJsnbQ50bQZ0WZJ0Rht0cWJ0ROt0ZfK0RWt0CBtmh4dISNN0g6tEY+b0izd0i5NlhT60jI90zT/TTI1fdM4ndMfm9M83dOhudI+HdRCLZk7PdRGfdSGCdRIvdRMfZdF3dRQHdX7vKRSXdVWHZZPfdVavdVsSdVc/dVgTY65EQEHUNZmfdZondZqvdZs3dZu/dZwHddyPdd0Xdd2fdd4ndd6vdd83dd+/deAHdiCPdhordRhfdiIDRoRkdWJ3diOrRKL7dWPPdmULRKRXdmYndmWDRGGrdme3diLHdOfPdqJfdmkfdqPvdgMgNqsXdoHMQQI0dmtPdtM/dpDANv7JAG0vdtabRC3/dv7JNm8PdxCXRC/fdwFoQC6TdzMvdSm3dzQXdycvdzRXd08/dzWnd00vdjUrd3e/+3S2P3d4h2e3D3e5k3enC3c573ejlne7P3emBne8D3fjOne9H3fiynf+L3ff2nf/P3ffqnfAD7gcunfBH7gcSngCL7gZ2ngDP7gZqngED7hWungFH7hWSnhGL7hP2nhHP7hPqnhID7io+jhJH7iYijiKL7i22fiLP7iPKLiMD7j0OHiNH7jzyHjOL7jdWHjPP7jdKHjQD7kCzPdRH7kdyHkSL7kHuHjTP7kTZ7eUD7lnmTkVH7lZSXlWL7lHeHkXI7kSv7lP+7lYj7kYV7mOE7maM7jZ77mM67mbn7jbR7nLA7ndA7jc37nJ27ner7ied7nIM7ngE7ifz7oGy7ohv/+4YWe6BSO6IyO4Yv+6A/u6JI+4ZFe6QhO6ZjO4Je+6QOu6Z5+4J0e6vwN6qQO4KN+6vdt6qq+36ne6vDN6rBO368+6+st67b+3rWe6+ON67x+3rv+697t68Iu3sFe7NZN7Miu3ce+7NCt7M5e3c0e7cQN7dTe3NN+7btt7do+3Nne7a3N7eBO298+7qct7ubO2uWe7p+N7uxO2uv+7pnt7vLu2fFe75RN7/iO2fe+746t7/4+2f0e8IgN8AQP2lp+8Oxt8Ap/2APf8FzN8BD/1Q8/8Vct8Rbf2wmf8cNu5Rzf8Q8h2x+/7R4/8sm+8SYf3Rif8k1d8SyP1Cv/8jD/j/Iy7+0lX/M2H/LqjfPwfvM8T+40//Ph7vNCr+5BX/TnTvRI3/M6v/RAH/Ld7fRJ3/RSb/RQX/VW7xAij/UIf/Vcz/Rav/Nf79peP/b2fvRmn9pKn/b/jvZsT/ZaH/Vvr/ZUP/f5vvZ2H9Yun/egGfN83/du//db7feCv5l7X/iZSfiIH9+Bv/hSrfiOP5mHH/mSCfmU396Nf/nOjfeaX9uZ3/lGbfmgf5iTP/qkz/mmP9Sln/qEKfqsD5ir//r9jfqyf92fX/vcR9i6D9ebXfa4L44HEAHCP/zEX/zGf/zIn/zKv/zLX9a9H/a/T44UdQICIADUb/3Vf/3an/3c/4/93r/939/94D/+4l/+2E81AhABz98Qyh394yj81R//8j//9F//9n//+J//+r9uHxH70Q8QESIIIFjQ4EGECRUuZNiwYQQAESVODFDR4kWMFRVImNjR40eQIUWOJFnS5EmUKVWuZNnS5UuYMWXOpDlzoEOcOXXuTHhAZEagFxU8qFnU6FGkSZUuZdrU6dOSN3lOpVqVIMSQQbVuhNrV61ewYcWOJetSqlW0aRf6zKoV6NCyceXOpVvXrt0DavXuLYgVpNu3HO8OJlzY8GHEHs/yZUyV7V/AGOEmplzZ8mXMM/M25jzV78fIkgVnJl3a9GnKizuvZvgYdGiLk1HPpv9d2/bTzax1L/zsEXbs0beFDyde3KTq3ckFuPb9O4Bs49GlT6+dW/n13h2dPw9O3ft38IaRX2fNXLtz6OHVr2cP1jr53dkpou/e3v59/DTHw+dsfv7v9PITcEACSXqPv9Xkk2g7rgp08EEI90OQL/8WRI8oCDPU8L4DJ2xMwYgYrG9DEks0TkIP1aowxAtNdPHF4TpMcS8QARARRhxzNA3FGa1a0cYWdRRySMRk7DGtGm8kckkm6eLxyKl+ZBDDJqu08isjoawqSfqu9PJLpp7UUicpgwTzTDRlynJMnrgEcMQ045STJDHZdKhMAKmcc08+P1rTzpzchK3BPgsttE7/QNf6yUxDG5Xzz0QfWvRNRyuNc7wowlDIhRQmIERT3WT4lCc8B9XTUlStlFGGG0YQAAc8JpBVVhUK4nRWXHOtgZROZ71BmFxn7cEgIWqwgSBYcZUiIUFDIzRVaJncT4hhcQDC1YQ4rXWhGYwliFVsv23VIBmCneAGWq4VYAoytj2oVGdPjXbeHI20doR7N03B3YS6PVYAcIld9iAcgvi3YBvy9ZfZSQeFk16ISeQx2WCH1RbgYGtdGOBxZzB3XAGEWPbie6doBFSE4I0swIhb1rBDIWh9VV1bUxh5X4C9FeDijQOeYVhyQZ7CmBF+RvZaanlr2NmHXXZ6wPFIBsIT/53zvVgGnXnW2WeLcQY3ZnNNAQKXFEBOeemV5X16bQFlJDmIW8oegdOBr84a55477rrWgBXKt9h/D2p25abZNly9qL32Fuy7+W5cgLxdNfpqsxGy2uae0AaM5cM7D89tnEUuKOaBd/Y6Y8i31nvdkzmWPON8IQdacM3detZz3MFLXAWTNWX3Bk8mANruf7X+l+uZXUWeIHZViN3os9vKM3fqwQNdhW55Ff7b7S/mVvVwQz43fOjXbTd20REafPPCq3eftvFiRoWJUVLQGdllwvBeocgLmqHVmLmrfM2zVi9kdT+DqGxzantfA2kDM0LUb3b6MpeubFCuCQwMVlXDA//QPJYr59FMadJzmANNeBvk/AJUYKtgD/bXLwT+LnymW9YAzydChSjQdgw8YQ8vA6lIjRAylPJhEUmDqCC+q3Zb4aERnUgYICZRfUsMyu2eeEXCIFGKBNEhE7H4xcJEcYt9oWJgwHhGu2hxi12sYhPR+MauiHGMAlif7doHRzwuRY1SZONb3JhHQCJFjmOs41buGEhE2mSOO+ljRjiXSEjSZJBbLGQVDxlJTKpkj0lspGT+mElQomSSUqykGUN5ypdsMoidFMonUflKPy1SJ6V05CVheUsAqDJSrIyNK3F5y1EmkZai+WUxRaLLRPFSI7405imDGcRhCsWWzQQlMgH/pcznMJOamXxmpKIJnG2G05p2wuYjw/nKbibqmxqZ5jkTOU42lVOb7kRkOgG1Tu7Q05jwHJM89VlMe9oJn1b85yn5qSV/FhSYsgxUGWup0FseFEoJhSgqA8qmgbazomeU6JEoulGQUkZJISXpYaZUUpQWZqQpZelcTtpSmMZlpTGl6VdeWlOcdmWmOeWpUm7aU6AiZadBJapMflpUpMJkqEllakqO2lSonmSpUaXqEE1VVaySZKpZzepTufrVrX6Vql4VK1bDWtamkhWtUT3rWpGqVrcyta1xDSpc6VrUud6Vp3bVK1Dz2tea8hWwOf3rYGEqWMPStLCJTSliGdvS/8U+lqSOlSxKI1vZjVIWsyG97GYVqlnPVrSzodUnaElb0NGe9pymVS09U9taarIWtuF87WyLKVvbNrO2ub0lbnn7y93+FpUVSUBxjXtc4y5TuCUlLnKdmwB2LneyAXiuc5UrXZA2t7rJzSd2M0vd7XLXnN6lLXjDC93ukvez5g3vddWLWvZuN7rvhe95i+te+ro2vtWdb371a1/0jte/uNRue9M74PICGL8Iju1+n9tfBjdYwdmMcILtC+EK39bB1qVwhnW7YeRi2MO9BfFxFzxiWBZYvgdGcYpLLN55thiPKuYvi2V8Sho/uMM3fmWOOUxQHmPSxyHecZBDOWQT29XYyJFEMoyXjOMX31fJT0Zkk6UsYCq/0coB1miWnbjlE3sZkGCespjhSGYsmxmLaO6ymk/oWze/L7hxxh2c6Uy9Od/5cHbWs+fy3Oe1YSQEgyZ0CDwJaC0LutAPRfQZgRICXhjakTFudO6CImlGV3rNjNL0l7vU6SvyGdQt+/OooyVqU9Or1KlG1ZQYwIAFwFrWsab1rG1da1zfWte55vWufd1rYP9a2MEm9rCNXWxkH1vZyWb2sp3dbGg/W9rRpva0rV1tbF9b271+dbe9/e1XdHsjAQEAIfkEAAoArAAsFgIAAAIAlQGicHBwx8fHtra2W1tbmJiYaWlpAAAAAAAAAy0Iobze8MlIwyA1z62K0CAnhuRoluippuzqtvArx/Rs1/it5/zu98CfMEgcyhIAIfkEAQoAAgAsBwIuAQ0AXwChwcHB8fHxAP8AUFBQAkqEj6nL7Q+jnLTai7PevPsPhotAluaJpurKtu4Lx/JM13Yb5PrO9/4PDAqHxKLxiEwql8ym8wmNSqdU3+2KjQ223EGq61VxW2FTAQAh+QQBCgACACwHAvEADQBfAKHx8fHBwcEA/wAAAAACQIyPqcvtD6OctNqLs968+w+Gi0CW5omm6sq27gvH8kzX9o3n+s4D/g8MCofEovGITCqXzKbzCY1Kp9Sq9YrNDgsAIfkEAQoAAgAsBwLIAA0ASwCh8fHxwcHBAP8AAAAAAjWMj6nL7Q+jnLTai7PevPsPhotAluaJpurKtu4LxPJM1/aN5/rO9/4PDAqHxKLxiEwql0xbAQAh+QQBCgAAACwHAoEADQBpAKEA/wDx8fHBwcEAAAACRZSPqcvtD6OctNqLs968+w+GC0CW5omm6sq27gvH8kzX9o3n+s73/g+UBYbEovGITCqXzKbzCY1Kp9Sq9YrNarfcrhdZAAAh+QQBoAACACwHAkcADQBcAKHBwcHx8fEA/wCjo6MCSJQ/pzq93NyL9NmLs958gQ+G4kiW5omm6sq27gvH8kzX9o3nOtn1/g8MCodEYeCITCqXzKbzCY1Kp9Sq9YrNarfcrvcLDouZBQAh+QQACgCsACwWAgAAAgCVAaKqqqrNzc2cnJy7u7uLi4sAAAAAAAAAAAADLQihvN7wyUgDETXPrcTQICeG5GiW6Kmm7Oq28CvH9GzX+K3n/O73wJ8wSBzKEgA7" alt="GIF 2022-11-9 0-18-25"></p><blockquote><p>点击返回顶部按扭，页面滚动到最顶部，即滚动条与浏览器顶部的滚动距离不断的减小，直到减少到 0</p></blockquote><p><strong>其实现方式有三种</strong></p><ul><li>1、不断减小<code>window.scroll(x,y)</code>中 y 的值，直到<code>y &lt;= 0</code></li><li>2、通过<code>window.scrollBy(x,y)</code> 方法，每次向上移动一点距离，直接<code>window.scrollY &lt;= 0</code></li><li>3、通过不断减小<code>document.documentElement.scrollTop</code>的值，直到 <code>&lt;= 0</code></li></ul><p><strong>三种实现方式的通用布局</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">#back-top</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #ddd<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">body</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 3000px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back-top<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>返回顶部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-1、实现方式一" tabindex="-1"><a class="header-anchor" href="#_4-1、实现方式一" aria-hidden="true">#</a> 4.1、实现方式一</h3><p>使用 <code>window.scroll(x,y)</code> 和 <code>window.scrollY</code></p><ul><li>点击后，首先获取当前滚动条滚动的距离<code>scrollY = window.scrollY</code></li><li>然后开启一个定时器，隔一定时间让 <code>window.scroll(0,y)</code>中 <code>y</code> 的值减小 <code>100</code> ，直到<code>window.scrollY &lt;= 0</code>，说明滚动条滚动到页面的顶部，然后暂停定时器</li><li>添加 <code>lock</code> 变量，用来防止当次滚动没有结束前，再次执行新的动画</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> backTop <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;back-top&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 第一套方案 window.scroll();</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 可以点击</span>
  <span class="token comment">// 点击事件</span>
  backTop<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取滚动条与浏览器顶部的距</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    lock <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> scrollY <span class="token operator">=</span> window<span class="token punctuation">.</span>scrollY<span class="token punctuation">;</span> <span class="token comment">// 把他放在外面，不用频繁的读他</span>
    timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      scrollY <span class="token operator">-=</span> <span class="token number">100</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollY <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      window<span class="token punctuation">.</span><span class="token function">scroll</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> scrollY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2、实现方式二" tabindex="-1"><a class="header-anchor" href="#_4-2、实现方式二" aria-hidden="true">#</a> 4.2、实现方式二</h3><p>使用 <code>window.scrollBy</code> 和 <code>window.scrollY</code></p><ul><li>通过<code>window.scrollBy(x,y)</code> 方法，每次向上移动一点距离，直接<code>window.scrollY &lt;= 0</code></li><li>添加 <code>lock</code> 变量，用来防止当次滚动没有结束前，再次执行新的动画</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> backTop <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;back-top&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 第一套方案 window.scroll();</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 可以点击</span>

  <span class="token comment">// 点击事件</span>
  backTop<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取滚动条与浏览器顶部的距</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    lock <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> scrollY <span class="token operator">=</span> window<span class="token punctuation">.</span>scrollY<span class="token punctuation">;</span> <span class="token comment">// 把他放在外面，不用频繁的读他</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollY <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      window<span class="token punctuation">.</span><span class="token function">scrollBy</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3、实现方式三" tabindex="-1"><a class="header-anchor" href="#_4-3、实现方式三" aria-hidden="true">#</a> 4.3、实现方式三</h3><p>使用 <code>document.documentElement.scrollTop</code> 来实现</p><ul><li>首先获取当前滚动条滚动过的距离 <code>document.documentElement.scrollTop</code></li><li>开启定时器，不断的减小<code>scrollTop</code> 的值，直到 <code>&lt;= 0</code></li><li>添加 <code>lock</code> 变量，用来防止当次滚动没有结束前，再次执行新的动画</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> backTop <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;back-top&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  backTop<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> backToTop<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">backToTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    lock <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">// 获取当前滚动条滚动的距离</span>
    <span class="token keyword">var</span> doc <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
    <span class="token keyword">var</span> top <span class="token operator">=</span> doc<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 多次点击无效，以最后一次为主</span>
    <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// 保存this，在定时器内需要用到</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>top <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果top小于0清除定时器</span>
        lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        top <span class="token operator">=</span> top <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment">// 每次减 100</span>
        doc<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> top<span class="token punctuation">;</span> <span class="token comment">// 动态更改滚动条件与浏览器的滚动的距离</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>以上三种方式，都是限定步长的运动，如果想要实现限定时间的匀速动动，则参考如下代码：</p></blockquote><h3 id="_4-4、优化版-最佳实践-限定时间匀速运动" tabindex="-1"><a class="header-anchor" href="#_4-4、优化版-最佳实践-限定时间匀速运动" aria-hidden="true">#</a> 4.4、优化版 - 最佳实践 - 限定时间匀速运动</h3><ul><li>T：time 已经运动的时间</li><li>B：begin 开始位置</li><li>C： <code>change 需要移动的总距离 = Target - Begin</code></li><li>D： duration 动画运动的总时间 <code>CurrentDistance = T / D * C + B</code> 即：<code>当前位置 = T / D * C + B</code> ，每次运动后，元素的当前位置</li></ul><p><strong>使用 <code>window.scroll(x,y)</code> 和 <code>window.scrollY</code> 实现</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// 限定时运动到顶部</span>
  <span class="token keyword">var</span> backTop <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;back-top&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token comment">// 限定时间500ms</span>
  backTop<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token comment">// 已经运动的时间</span>
    <span class="token keyword">var</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// 开始运动的位置</span>
    <span class="token keyword">var</span> <span class="token constant">B</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>scrollY<span class="token punctuation">;</span>
    <span class="token comment">// 目标位置是 0  var targe=0;</span>
    <span class="token comment">// 总共需要改变的距离</span>
    <span class="token keyword">var</span> <span class="token constant">C</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">-</span> <span class="token constant">B</span><span class="token punctuation">;</span>
    <span class="token comment">// 总共需要运动的时间</span>
    <span class="token keyword">var</span> <span class="token constant">D</span> <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>

    <span class="token comment">// 开始执行动画</span>
    timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token constant">T</span> <span class="token operator">+=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// 记录运动的时间</span>
      <span class="token comment">// 当前滚动条运动的距离</span>
      <span class="token keyword">var</span> currentDistance <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token operator">/</span> <span class="token constant">D</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">C</span> <span class="token operator">+</span> <span class="token constant">B</span><span class="token punctuation">;</span>
      <span class="token comment">// currentDistance &lt;= 0</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token operator">&gt;=</span> <span class="token constant">D</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        currentDistance <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      window<span class="token punctuation">.</span><span class="token function">scroll</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> currentDistance<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>使用 <code>document.documentElement.scrollTop</code> 实现</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> backTop <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;back-top&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> doc <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token comment">//点击后要处理的事情</span>
  <span class="token comment">// 限定时间动画</span>
  backTop<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    lock <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">// 运动的时间</span>
    <span class="token keyword">var</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> <span class="token constant">B</span> <span class="token operator">=</span> doc<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span> <span class="token comment">// 开始位置</span>
    <span class="token comment">// target=0 目标位置</span>
    <span class="token keyword">var</span> <span class="token constant">C</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">-</span> <span class="token constant">B</span><span class="token punctuation">;</span> <span class="token comment">// 总共需要改变的距离</span>
    <span class="token keyword">var</span> <span class="token constant">D</span> <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span> <span class="token comment">// 总共运动的时间</span>

    timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 记录运的时间</span>
      <span class="token constant">T</span> <span class="token operator">+=</span> <span class="token number">20</span><span class="token punctuation">;</span>
      <span class="token comment">// 当前运动到的位置</span>
      <span class="token keyword">var</span> currentDistance <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token operator">/</span> <span class="token constant">D</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">C</span> <span class="token operator">+</span> <span class="token constant">B</span><span class="token punctuation">;</span>
      <span class="token comment">// currentDistance &lt; 0</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token operator">&gt;=</span> <span class="token constant">D</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        currentDistance <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      doc<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> currentDistance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、图片延时加载" tabindex="-1"><a class="header-anchor" href="#_5、图片延时加载" aria-hidden="true">#</a> 5、图片延时加载</h3><p><img src="https://www.arryblog.com/assets/img/GIF2022-12-121-39-22.29c280b0.gif" alt="GIF2022-12-121-39-22"></p><p>实现原理：</p><ul><li>页面中所有需要做延时加载的图片上加上<code>class = &#39;lazy&#39;</code> 和 <code>data-src = &#39; 图片真实地址&#39;</code></li><li>获取页面中所有<code>class</code>中包含<code>lazy</code>的元素，同时要判断元素是否为<code>img</code>标签且<code>data-src</code>是否有值。确保操作的元素是 img 元素，同时<code>data-src</code>中有图片地址。</li><li>当滚动浏览器的滚动条时，要判断对应的图片是否<strong>进入可视区</strong>，如果进入，则给<code>img.src</code>动态赋值</li><li>如果图片一但赋值，则后面就不需要再对此 img 标签做监听。则可以从数组对象中将其删除，同时把 lazy 样式删除</li><li>最后考虑浏览器窗口大小改变时的情况，还有要考虑对 scroll 和 resize 事件做节流操作</li></ul><p><img src="https://www.arryblog.com/assets/img/image-20221201200514490.7937ab64.png" alt="image-20221201200514490"></p><h3 id="_5-1、html-结构" tabindex="-1"><a class="header-anchor" href="#_5-1、html-结构" aria-hidden="true">#</a> 5.1、HTML 结构</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">html,
  body,
  ul,
  li</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">ul</span> <span class="token punctuation">{</span>
    <span class="token comment">/* width: 968px; */</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">li</span> <span class="token punctuation">{</span>
    <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ddd<span class="token punctuation">;</span>
    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">li img</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>J_container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/loading-svg/loading-bars.svg<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/01.png<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/loading-svg/loading-bars.svg<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/01.png<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/loading-svg/loading-bars.svg<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/02.png<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/loading-svg/loading-bars.svg<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/03.png<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/loading-svg/loading-bars.svg<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/04.png<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/loading-svg/loading-bars.svg<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/05.png<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/loading-svg/loading-bars.svg<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/06.png<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/loading-svg/loading-bars.svg<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/07.png<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/loading-svg/loading-bars.svg<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/08.png<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/loading-svg/loading-bars.svg<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/09.png<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/loading-svg/loading-bars.svg<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/10.png<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/loading-svg/loading-bars.svg<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/11.png<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/loading-svg/loading-bars.svg<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/12.png<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/loading-svg/loading-bars.svg<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/13.png<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/loading-svg/loading-bars.svg<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/14.png<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2、js-实现页面响应式布局" tabindex="-1"><a class="header-anchor" href="#_5-2、js-实现页面响应式布局" aria-hidden="true">#</a> 5.2、JS 实现页面响应式布局</h3><p>第一次打开页面或当浏览器窗品大小发生改变时，获取浏览器窗口的可视区宽 <code>clientWidth</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> clientWidth <span class="token operator">=</span>
  document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>然后用<code>clienwWidth / 每个li元素的占位宽</code>（包括 margin，border，padding），对结果向上取整，计算得出页面一行最多能放几个<code>li</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> count <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>clientWidth <span class="token operator">/</span> <span class="token number">242</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>利用 <code>count * 242</code> 动态计算得到其父容器<code>ul</code>的宽</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">242</span> <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>完整实现代码</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_container&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取ul元素</span>
<span class="token function">initUlWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 初始化ul宽</span>
<span class="token comment">// throttle 为节流函数</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> <span class="token function">throttle</span><span class="token punctuation">(</span>initUlWidth<span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">initUlWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取当前浏览器可视区的宽</span>
  <span class="token keyword">var</span> clientWidth <span class="token operator">=</span>
    document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
  <span class="token keyword">var</span> count <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>clientWidth <span class="token operator">/</span> <span class="token number">242</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 动态计算container的宽</span>
  container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">242</span> <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-3、js-实现懒加载-延时加载-效果" tabindex="-1"><a class="header-anchor" href="#_5-3、js-实现懒加载-延时加载-效果" aria-hidden="true">#</a> 5.3、JS 实现懒加载（延时加载）效果</h3><p>获取页面中所有<code>class = &#39;lazy&#39;</code> 的元素，同时过滤掉不是图标的元素</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 1、需要获取到所有需要延时加载的图片</span>
<span class="token keyword">var</span> imgs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;.lazy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2、过滤掉不是图片的标签</span>
imgs <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>imgs<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> item <span class="token keyword">instanceof</span> <span class="token class-name">Image</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取页面可视区的高</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 获取浏览器可视区的高</span>
<span class="token keyword">var</span> clientHeight <span class="token operator">=</span>
  document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>对获取的所有图片进行遍历，遍历时判断元素是否进入到可视区</li><li>元素进入可视区原理：<code>元素底部与浏览器可视区的高 &gt; 0</code> 同时元素顶部与浏览器可视区的高要小于浏览器可视区高。 即<code>bottom &gt; 0 &amp;&amp; _top &lt; clientHeight</code></li><li>如果元素进入可视区，将图片保存在<code>data-src</code>属性上的正确地址赋值给<code>src</code>属性</li><li>同时将此图片从<code>imgs</code>数组中删除，以后不需要再监听了</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 遍历所有过滤后得图片，然后查看图片是否进入到可视区，如果进入到可视区，就动态给图片添加真实的图片地址</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> imgs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 判断图片是否进入可视区  bottom&gt;0  &amp;&amp; top&lt;浏览器可视区高</span>
  <span class="token keyword">var</span> rect <span class="token operator">=</span> imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> bottom <span class="token operator">=</span> rect<span class="token punctuation">.</span>bottom<span class="token punctuation">;</span>
  <span class="token keyword">var</span> _top <span class="token operator">=</span> rect<span class="token punctuation">.</span>top<span class="token punctuation">;</span>
  <span class="token comment">// 以下条件成立，代表元素进入到可视区</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>bottom <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> _top <span class="token operator">&lt;</span> clientHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>src <span class="token operator">=</span> imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>src<span class="token punctuation">;</span> <span class="token comment">// 把自定义属性上的真实地址赋值给图片</span>
    <span class="token comment">// 如果图片进入过一次可视区，动态赋过值，就不用再管他了</span>
    <span class="token keyword">var</span> index <span class="token operator">=</span> imgs<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    imgs<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    i<span class="token operator">--</span><span class="token punctuation">;</span> <span class="token comment">// 一定要注意，i--</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>当滚动条滚动时，或浏览器窗口大小发生改变时，会有其它图片进入到当前浏览器可视区,则需要添加对应的事件来监听。但整个过程不需要再重新获取页面的中的<code>class = &#39;lazy&#39;</code>的元素，同时还要判断，如果 <code>imgs</code> 的长度为 <code>0</code>，则表示所有图片都加载完成，不需要再做任何处理</li><li>最后还要做相关节流操作</li></ul><p><strong>完整的代码如下</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 以下内容，单独放在名lazyload.js 文件中，其它页面需要此效果，</span>
<span class="token comment">// 只需要将图片上添加data-src属性，存放真实图片地址，同时添加class=&#39;lazy&quot;,最后调用lazyLoad()即可</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 实现延时加载</span>
  <span class="token keyword">function</span> <span class="token function">lazyLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1、需要获取到所有需要延时加载的图片</span>
    <span class="token keyword">var</span> imgs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;.lazy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2、过滤掉不是图片的标签</span>
    imgs <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>imgs<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> item <span class="token keyword">instanceof</span> <span class="token class-name">Image</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;scroll&quot;</span><span class="token punctuation">,</span> <span class="token function">throttle</span><span class="token punctuation">(</span>lazy<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  给window绑定滚动事件</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> <span class="token function">throttle</span><span class="token punctuation">(</span>lazy<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>imgs<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// 当前数组中没有需要监听的图片了</span>
      <span class="token comment">// 获取浏览器可视区的高</span>
      <span class="token keyword">var</span> clientHeight <span class="token operator">=</span>
        document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>

      <span class="token comment">// 遍历所有过滤后得图片，然后查看图片是否进入到可视区，</span>
      <span class="token comment">// 如果进入到可视区，就动态给图片添加真实的图片地址</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> imgs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 判断图片是否进入可视区  bottom&gt;0  &amp;&amp; top&lt;浏览器可视区高</span>
        <span class="token keyword">var</span> rect <span class="token operator">=</span> imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> bottom <span class="token operator">=</span> rect<span class="token punctuation">.</span>bottom<span class="token punctuation">;</span>
        <span class="token keyword">var</span> _top <span class="token operator">=</span> rect<span class="token punctuation">.</span>top<span class="token punctuation">;</span>
        <span class="token comment">// 以下条件成立，代表元素进入到可视区</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>bottom <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> _top <span class="token operator">&lt;</span> clientHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 把自定义属性上的真实地址赋值给图片</span>
          imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>src <span class="token operator">=</span> imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>src<span class="token punctuation">;</span>
          <span class="token comment">// 如果图片进入过一次可视区，动态赋过值，就不用再管他了</span>
          <span class="token keyword">var</span> index <span class="token operator">=</span> imgs<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          imgs<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          i<span class="token operator">--</span><span class="token punctuation">;</span> <span class="token comment">// 一定要注意，i--</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token doc-comment comment">/**
   * 节流函数
   * fn 事件处理函数
   * delay 函数执行间隔时间
   */</span>
  <span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 函数体执行代码</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 开锁</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  window<span class="token punctuation">.</span>lazyLoad <span class="token operator">=</span> lazyLoad<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6、吸顶盒导航" tabindex="-1"><a class="header-anchor" href="#_6、吸顶盒导航" aria-hidden="true">#</a> 6、吸顶盒导航</h3><p>涉及知识点</p><ul><li>过渡动画</li><li><code>window.onsrcoll</code>事件</li><li>offsetTop、offsetHeight、scrollTop</li></ul><p><img src="https://www.arryblog.com/assets/img/GIF2022-12-615-40-31.10ed2716.gif" alt="GIF2022-12-615-40-31"></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">html,
  body</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.top</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.header</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.nav</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.nav2</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> -100px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.transition</span> <span class="token punctuation">{</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> top 1s ease<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.main</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 3000px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 模拟的头部内部 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>top<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 吸顶盒 --&gt;</span>
<span class="token comment">&lt;!-- nav2相当于nav1的副本，不过nav2是固定定位在浏览器的外部 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav nav1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav nav2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// 获取nav1与nav2</span>
  <span class="token keyword">var</span> nav1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.nav1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> nav2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.nav2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> nav1Top <span class="token operator">=</span> nav1<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span> <span class="token comment">// nav1的顶部与浏览器顶部距离</span>
  <span class="token keyword">var</span> bottom <span class="token operator">=</span> nav1Top <span class="token operator">+</span> nav1<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span> <span class="token comment">// nav1的底部与浏览器顶部距离</span>

  <span class="token comment">//添加 scroll事件</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;scroll&quot;</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> scrollTop <span class="token operator">=</span>
      document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
    <span class="token comment">// 滚动条滚动距离 &gt;= 元素底部与浏览器顶部距离</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollTop <span class="token operator">&gt;=</span> bottom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      nav2<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;transition&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//nav2 区块显示出</span>
      nav2<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">&quot;0px&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 滚动条滚动距离 &lt;= 元素顶部与浏览器项部距离</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollTop <span class="token operator">&lt;=</span> nav1Top<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      nav2<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;transition&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      nav2<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">&quot;-100px&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7、滚动加载更多" tabindex="-1"><a class="header-anchor" href="#_7、滚动加载更多" aria-hidden="true">#</a> 7、滚动加载更多</h3><ul><li>当滚动条滚动到最底部时，加载一批数据，填充到页面上</li><li>判断滚动条滚动到底部公式：<code>scrollHeight - scrollTop - clientHeight = 0</code></li></ul><table><thead><tr><th style="text-align:left;">属性</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">scrollTop</td><td style="text-align:left;">元素滚动出去的高</td></tr><tr><td style="text-align:left;">clientHeight</td><td style="text-align:left;">元素的可视高（height + padding）</td></tr><tr><td style="text-align:left;">scrollHeight</td><td style="text-align:left;">元素实际内容的高</td></tr></tbody></table><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> doc <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>doc<span class="token punctuation">.</span>scrollHeight <span class="token operator">-</span> doc<span class="token punctuation">.</span>scrollTop <span class="token operator">-</span> doc<span class="token punctuation">.</span>clientHeight <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 快滚动到底部时，就开始请求加载数据</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
  <span class="token punctuation">.</span>main <span class="token punctuation">{</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> 3000px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">.</span>box1 <span class="token punctuation">{</span>
    background<span class="token operator">-</span>color<span class="token operator">:</span> khaki<span class="token punctuation">;</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> 500px<span class="token punctuation">;</span>
    <span class="token literal-property property">margin</span><span class="token operator">:</span> 50px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;main&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>  滚动到底部，动态加载的内容
<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;box1&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;box1&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;box1&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> 
<span class="token operator">--</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token comment">// window滚动事件</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;scroll&quot;</span><span class="token punctuation">,</span> <span class="token function">throttle</span><span class="token punctuation">(</span>loadmore<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 加载更多函数</span>
  <span class="token keyword">function</span> <span class="token function">loadmore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> doc <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
    <span class="token keyword">var</span> scrollHeight <span class="token operator">=</span> doc<span class="token punctuation">.</span>scrollHeight<span class="token punctuation">;</span>
    <span class="token keyword">var</span> scrollTop <span class="token operator">=</span> doc<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
    <span class="token keyword">var</span> clientHeight <span class="token operator">=</span> doc<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
    <span class="token comment">// 什么时开始加载下一批内容</span>
    <span class="token comment">// 当浏览器的srollHeight - scrollTop -clientHeight=0时，表示滚动到页面的底部</span>
    <span class="token comment">// 但我们更希望在快到达底部前，就开始加载下一批数据，所以可以设置100左右的差值</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollHeight <span class="token operator">-</span> scrollTop <span class="token operator">-</span> clientHeight <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 加载更多内容</span>
      <span class="token comment">//   console.log(&quot;加载更多内容&quot;);</span>
      <span class="token comment">// 每次滚动到底部，创建一批内容，加载到页面当中</span>
      <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      div<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&quot;box1&quot;</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// ajax请求</span>
      <span class="token comment">// 把数据渲染到页面当中来</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token doc-comment comment">/**
   * 节流函数
   * fn 事件处理函数
   * delay 函数执行间隔时间
   */</span>
  <span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 函数体执行代码</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 开锁</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8、楼梯式导航" tabindex="-1"><a class="header-anchor" href="#_8、楼梯式导航" aria-hidden="true">#</a> 8、楼梯式导航</h3><p>涉及知识</p><ul><li>元素添加自定义属性绑定下标序号</li><li>事件委托</li><li>查找数组中第一个大于 n 的数的下标</li><li>限时匀速动画</li><li><code>window.onscroll</code>事件</li><li>scrollTop、offsetTop</li><li>函数节流</li></ul><p><img src="https://www.arryblog.com/assets/img/GIF2022-11-1019-07-19.ea43a0bd.gif" alt="GIF2022-11-1019-07-19"></p><p>布局思路</p><ul><li>foor-nav 用来制作右侧楼梯导航，采用固定定位，定位到浏览右侧</li><li>header 和 footer 用来占位，模拟真实网站头部和尾部占用的空间</li><li>main 中的直接子元素<code>floor-item</code>区域为楼梯导航滚动相关内容区块</li></ul><h3 id="_8-1、html-结构" tabindex="-1"><a class="header-anchor" href="#_8-1、html-结构" aria-hidden="true">#</a> 8.1、HTML 结构</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">html</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 滚动条平滑滚动效果 */</span>
    <span class="token property">scroll-behavior</span><span class="token punctuation">:</span> smooth<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">html,
  body,
  ul,
  li</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">body</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #ddd<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.floor-nav</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 10px 10px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.floor-nav li</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 35px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 35px<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px dashed #ddd<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.floor-nav li:hover,
  .floor-nav li.active:hover</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.floor-nav li.active</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.main</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0px auto<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.main .floor-item</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 楼梯导航按扭开始 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>floor-nav<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>J_floor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>国创<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>综艺<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>娱乐<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>电影<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>游戏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>纪录片<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>电视剧<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 楼梯导航按扭开始 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 500px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--楼梯内容开始--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>J_app<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>floor-item<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 500px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>国创<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>floor-item<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 530px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>综艺<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>floor-item<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 400px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>娱乐<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>floor-item<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 600px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>电影<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>floor-item<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 560px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>游戏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>floor-item<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 400px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>纪录片<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>floor-item<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 620px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>电视剧<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--楼梯内容结束--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 1500px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-2、js-实现思路" tabindex="-1"><a class="header-anchor" href="#_8-2、js-实现思路" aria-hidden="true">#</a> 8.2、JS 实现思路</h3><p>第一步：实现右侧楼梯导航按扭点击滚动效果</p><ul><li>利用事件委托来实现，所有 li 的点击事件全委托给父元素<code>#J_floor</code>来实现</li><li>点击对应按扭实现：当前点击元素文字变红，其它文字为灰色，同时滚动条滚动到对应楼层</li><li>要实现当前文字变红，其它文字变灰，需要定义变量 <code>prevIndex</code> 来保存前一项被点击元素的下标</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 获取id为 J_floor元素</span>
<span class="token keyword">var</span> floorNav <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_floor&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> navs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;#J_floor li&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> prevIndex <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 前一个楼梯按扭序号</span>
<span class="token comment">// 事件委托，所有子元素li的点击事件委托给父元素来处理</span>
floorNav<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
  <span class="token keyword">var</span> tagName <span class="token operator">=</span> target<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 如果不是点击对应的li啥也不做</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>tagName <span class="token operator">!==</span> <span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

  <span class="token comment">// 点击后要处理的事情</span>
  <span class="token comment">// 1.前面变红的li复原</span>
  prevIndex <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> navs<span class="token punctuation">[</span>prevIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 2.当前项变红色</span>
  target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 3、把前一个序号更新为当前序号，供后面使用</span>
  prevIndex <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>navs<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 4、滚动条滚动到当前楼层所在位置</span>
  <span class="token comment">// .........具体实现思路看下一步，</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>第二步：实现点击导航按扭后，滚动条滚动到对应楼层</strong></p><ul><li>创建一个空数组<code>floorItemsTopArr = []</code>，用来保存每一个楼层的元素与浏览器顶部的距离</li><li>点击按扭时，找到对应按扭元素的下标，再找到<code>floorItemsTopArr</code>数组中对应下标的元素，获得当前浏览器滚动条需要滚动到的距离。</li><li>为了实现滚动条在滚动时能平滑滚动，可以在<code>html</code> 标签的样式中添加<code>scroll-behavior: smooth;</code>样式</li><li>因为<code>scroll-behavior: smooth;</code>目前在一些底版本浏览器中不支持，可以封装 JS 动画来实现</li></ul><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">html</span> <span class="token punctuation">{</span>
  <span class="token comment">/* 滚动条滚动效果 */</span>
  <span class="token property">scroll-behavior</span><span class="token punctuation">:</span> smooth<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
var floorItems = document.<span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;#J_app .floor-item&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
var floorItemsTopArr = []<span class="token punctuation">;</span> // 用来保存每一层的顶部与浏览器顶部的高

// 把所有 floor-item与body顶部的距离添加到一个数组floorItemsTopArr
for <span class="token punctuation">(</span>var i = 0<span class="token punctuation">;</span> i &lt; floorItems.length<span class="token punctuation">;</span> <span class="token selector">i++)</span> <span class="token punctuation">{</span>
  floorItemsTopArr.<span class="token function">push</span><span class="token punctuation">(</span>floorItems[i].offsetTop<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

// 以下代码，对接到上一步的 4的下面
// 4、滚动条滚动到当前楼层所在位置
// 方法一：
window.<span class="token function">scroll</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> floorItemsTopArr[prevIndex]<span class="token punctuation">)</span><span class="token punctuation">;</span>
// 方法二：
// var doc = document.documentElement || document.body<span class="token punctuation">;</span>
// doc.scrollTop = floorItemsTopArr[prevIndex]<span class="token punctuation">;</span>

// 也可以调用手动封装的 JS动画来实现滚动条平滑滚动
// 方法三：
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>JS 手动封装实现滚动条平滑滚动的 JS</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * scrollByTop 滚动条从当前位置滚动到目标位置（只针对垂直方向）
 * target 滚动到的目标位置
 * delay 滚动的总时间
 */</span>
<span class="token keyword">function</span> <span class="token function">scrollByTop</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">200</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 已经运动的时间</span>
  <span class="token keyword">var</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment">// 开始运动的位置</span>
  <span class="token keyword">var</span> <span class="token constant">B</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>scrollY<span class="token punctuation">;</span>
  <span class="token comment">// 目标位置是 0  var targe=0;</span>
  <span class="token comment">// 总共需要改变的距离</span>
  <span class="token keyword">var</span> <span class="token constant">C</span> <span class="token operator">=</span> target <span class="token operator">-</span> <span class="token constant">B</span><span class="token punctuation">;</span>
  <span class="token comment">// 总共需要运动的时间</span>
  <span class="token keyword">var</span> <span class="token constant">D</span> <span class="token operator">=</span> delay<span class="token punctuation">;</span>

  <span class="token comment">// 开始执行动画</span>
  timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token constant">T</span> <span class="token operator">+=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// 记录运动的时间</span>
    <span class="token comment">// 当前滚动条运动的距离</span>
    <span class="token keyword">var</span> currentDistance <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token operator">/</span> <span class="token constant">D</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">C</span> <span class="token operator">+</span> <span class="token constant">B</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">T</span> <span class="token operator">&gt;=</span> <span class="token constant">D</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      currentDistance <span class="token operator">=</span> target<span class="token punctuation">;</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    window<span class="token punctuation">.</span><span class="token function">scroll</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> currentDistance<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>第三步：实现滚动浏览器窗口，对应楼层按扭显示对应样式</strong></p><ul><li>如何知道当前滚动条滚动所在的对应楼层呢 ？可以通过当前滚动条滚动的距离与楼层顶部与浏览器的距离来判断</li><li>找到数组中从前往后满足： <strong><code>滚动条滚动距离 &gt; 楼层顶部与浏览器顶部距离的最后一个元素</code></strong> 。这个元素所在的下标，就是当前滚动条滚动到的楼层所对应的下标。把这个下标保存在变量<code>currentIndex</code>中，供后面使用。</li><li>找到对应楼层序号，就可以修改楼层的按扭样式。</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> currentIndex <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 当前楼梯所在按扭序号</span>
<span class="token comment">// 当滚动浏览器窗口时，对应导航的样式要显示到对应楼层</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onscroll</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 不断获取浏览器滚动的距离</span>
  <span class="token keyword">var</span> scrollY <span class="token operator">=</span> window<span class="token punctuation">.</span>scrollY<span class="token punctuation">;</span>
  <span class="token comment">// 找到当前滚动所在的楼层序号</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> floorItemsTopArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollY <span class="token operator">&gt;=</span> floorItemsTopArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      currentIndex <span class="token operator">=</span> i<span class="token punctuation">;</span> <span class="token comment">// 最后一次找到的i就是当前滚动所在的楼层</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 相关优化代码，会添加到此处</span>
  <span class="token comment">// ........</span>

  <span class="token comment">// 找到对应楼层后，需要处理的事情</span>
  prevIndex <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> navs<span class="token punctuation">[</span>prevIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  currentIndex <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> navs<span class="token punctuation">[</span>currentIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  prevIndex <span class="token operator">=</span> currentIndex<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>第四步：性能优化</strong></p><ul><li>如果滚动条一直在当前楼层中滚动，则不需要频繁执行更改楼层按扭样式的代码</li><li>如果<code>prevIndex === currentIndex</code> 说明当前滚动条一直在当前楼层滚动</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 以下代码，添加到上一步，相关优化代码.....位置</span>

<span class="token comment">// 优化处理，如果一直在当前楼层内滚动，不执行以下代码</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>prevIndex <span class="token operator">===</span> currentIndex<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>第五步：第一个按扭和最后一个按扭样式的特殊情况</strong></p><ul><li>当滚动条滚动在最上面，不在第一个楼层区，即 <strong><code>滚动距离 &lt; 第一个楼层与浏览器顶部距离</code></strong>，则楼层按扭文字不变红</li><li>当滚动条滚动到最后面，不在最后一个楼层区，即 <strong><code>滚动距离 &gt; 最后一个楼层与浏览器顶部距离 + 最后一个楼层的高度</code></strong> ，则最后一个楼层按扭文字也不变红</li><li>要使楼层按扭文字不变红，只需要把<code>currentIndex = -1</code>即可</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> len <span class="token operator">=</span> floorItems<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token comment">// 最后一个元素底部与浏览器顶部距离</span>
<span class="token keyword">var</span> bottom <span class="token operator">=</span> floorItemsTopArr<span class="token punctuation">[</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> floorItems<span class="token punctuation">[</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>scrollY <span class="token operator">&lt;</span> floorItemsTopArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> scrollY <span class="token operator">&gt;</span> bottom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  currentIndex <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-3、完整源代码" tabindex="-1"><a class="header-anchor" href="#_8-3、完整源代码" aria-hidden="true">#</a> 8.3、完整源代码</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">html</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 滚动条滚动效果 */</span>
    <span class="token property">scroll-behavior</span><span class="token punctuation">:</span> smooth<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">body,
  ul,
  li</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">body</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #ddd<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.floor-nav</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 10px 10px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.floor-nav li</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 35px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 35px<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px dashed #ddd<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.floor-nav li:hover,
  .floor-nav li.active:hover</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.floor-nav li.active</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.main</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0px auto<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.main .floor-item</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 楼梯导航按扭开始 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 1500px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- 楼梯导航按扭开始 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>floor-nav<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>J_floor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>国创<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>综艺<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>娱乐<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>电影<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>游戏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>纪录片<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>电视剧<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!--楼梯内容开始--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>J_app<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>floor-item<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 500px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>国创<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>floor-item<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 530px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>综艺<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>floor-item<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 400px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>娱乐<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>floor-item<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 600px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>电影<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>floor-item<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 560px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>游戏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>floor-item<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 400px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>纪录片<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>floor-item<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 620px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>电视剧<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!--楼梯内容结束--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 3000px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 获取id为 J_floor元素</span>
    <span class="token keyword">var</span> floorNav <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;J_floor&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> navs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;#J_floor li&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> floorItems <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;#J_app .floor-item&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> len <span class="token operator">=</span> floorItems<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">var</span> prevIndex <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 前一个楼梯按扭序号</span>
    <span class="token keyword">var</span> currentIndex <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 当前楼梯所在按扭序号</span>
    <span class="token keyword">var</span> floorItemsTopArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 用来保存每一层的顶部与浏览器顶部的高</span>

    <span class="token comment">// 把所有 floor-item与body顶部的距离添加到一个数组floorItemsTopArr</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> floorItems<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      floorItemsTopArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>floorItems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>offsetTop<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 事件委托，所有子元素li的点击事件委托给父元素来处理</span>
    floorNav<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
      <span class="token keyword">var</span> tagName <span class="token operator">=</span> target<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 如果不是点击对应的li啥也不做</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>tagName <span class="token operator">!==</span> <span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

      <span class="token comment">// 点击后要处理的事情</span>
      <span class="token comment">// 1.前面变红的li复原</span>
      prevIndex <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> navs<span class="token punctuation">[</span>prevIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 2.当前项变红色</span>
      target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 3、把前一个序号更新为当前序号，供后面使用</span>
      prevIndex <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>navs<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 4、滚动条滚动到当前楼层所在位置</span>
      <span class="token comment">// 方法一：</span>
      window<span class="token punctuation">.</span><span class="token function">scroll</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> floorItemsTopArr<span class="token punctuation">[</span>prevIndex<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 方法二：</span>
      <span class="token comment">// var doc = document.documentElement || document.body;</span>
      <span class="token comment">// doc.scrollTop = floorItemsTopArr[prevIndex];</span>
      <span class="token comment">// 方法三</span>
      <span class="token comment">//   scrollByTop(floorItemsTopArr[prevIndex]);</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 当滚动浏览器窗口时，对应导航的样式要显示到对应楼层</span>
    window<span class="token punctuation">.</span><span class="token function-variable function">onscroll</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 不断获取浏览器滚动的距离</span>
      <span class="token keyword">var</span> scrollY <span class="token operator">=</span> window<span class="token punctuation">.</span>scrollY<span class="token punctuation">;</span>
      <span class="token comment">// 找到当前滚动所在的楼层序号</span>
      <span class="token comment">// 楼层数据中最后一个满足： 条件的的元素所在序号</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> floorItemsTopArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollY <span class="token operator">&gt;=</span> floorItemsTopArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          currentIndex <span class="token operator">=</span> i<span class="token punctuation">;</span> <span class="token comment">// 最后一次找到的i就是当前滚动所在的楼层</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 考虑第一个和最后一个的特殊情况</span>
      <span class="token comment">// 最后一个元素底部与浏览器顶部距离</span>
      <span class="token keyword">var</span> bottom <span class="token operator">=</span> floorItemsTopArr<span class="token punctuation">[</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> floorItems<span class="token punctuation">[</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollY <span class="token operator">&lt;</span> floorItemsTopArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> scrollY <span class="token operator">&gt;</span> bottom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        currentIndex <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 优化处理，如果一直在当前楼层内滚动，不执行以下代码</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>prevIndex <span class="token operator">===</span> currentIndex<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

      <span class="token comment">// 找到对应楼层后，需要处理的事情</span>
      prevIndex <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> navs<span class="token punctuation">[</span>prevIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      currentIndex <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> navs<span class="token punctuation">[</span>currentIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      prevIndex <span class="token operator">=</span> currentIndex<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="六、重难点总结" tabindex="-1"><a class="header-anchor" href="#六、重难点总结" aria-hidden="true">#</a> 六、重难点总结</h2><p>总结本章重难点知识，理清思路，把握重难点。并能轻松回答以下问题，说明自己就真正的掌握了。</p><p>用于故而知新，快速复习。</p><h3 id="_1、重点" tabindex="-1"><a class="header-anchor" href="#_1、重点" aria-hidden="true">#</a> 1、重点</h3><ul><li>理解什么是 BOM</li><li>掌握 window 对象上的以下属性和方法：<code>window.scrollY</code>属性，<code>window.scroll()</code>和<code>window.scrollBy()</code>方法</li><li>掌握 URL 的组成部分</li><li>了解 navigator 对象的三大应用：检测浏览器、判断是否在微信中打开页面、设备判断 ios、android、web</li><li>区分 load 与 DOMContentLoaded 事件的执行顺序</li><li>如何动态加载 JS、CSS、图片</li></ul><h3 id="_2、难点" tabindex="-1"><a class="header-anchor" href="#_2、难点" aria-hidden="true">#</a> 2、难点</h3><p>WARNING</p><ul><li>对查询字符串作处理，转换为对象形式并考虑数据类型</li><li>手写以下案例 <ul><li>返回顶部</li><li>图片延时加载</li><li>吸顶盒导航</li><li>滚动加载更多</li><li>楼梯式导航</li></ul></li></ul>`,137);function m(b,g){const t=o("ExternalLinkIcon");return c(),l("div",null,[u,n("blockquote",null,[n("p",null,[s("MDN 官方参考地址："),n("a",r,[s("https://developer.mozilla.org/zh-CN/docs/Web/API/Window/location(opens new window)"),p(t)])])]),k,n("blockquote",null,[n("p",null,[s("以下代码来自 MDN："),n("a",d,[s("https://developer.mozilla.org/zh-CN/docs/Web/API/Window/navigator(opens new window)"),p(t)])])]),v])}const y=e(i,[["render",m],["__file","JavaScript BOM hexin Window duixiangshuxing、fangfa、shijian.html.vue"]]);export{y as default};
