---
title: 微信小程序视图层的组件、数据绑定，列表、条件渲染
date: 2023-10-28
sidebar: "auto"
categories:
  - applet
tags:
  - applet
publish: true
---

# 微信小程序视图层的组件、数据绑定，列表、条件渲染

TIP

从本节内容开始，开始学习微信小程序视图层的原生组件、数据绑定、列表循环、条件渲染、视图层代码拆分和模板语法，这些基础内容掌握小程序项目开发中必备的组件。

- 小程序中的常用组件
- 视图层 - 数据绑定
- 视图层 - 列表渲染
- 视图层 - 条件渲染
- 视图层代码拆分和模板语法

## 一、小程序中组件的分类

TIP

小程序中的组件也是由宿主环境提供的，开发者可以基于组件快速搭建出小程序的页面结构。微信官方将小程序的组件分为了 11 类

在小程序中我们将类似 HTML 的标签，即 WXML 标签 叫做 **组件**

> 点击查阅 [小程序官方文档 - 组件(opens new window)](https://developers.weixin.qq.com/miniprogram/dev/component/)

- ①、视图容器
- ②、基础内容
- ③、表单组件
- ④、xr-frame 解决方案，AR、VR、3D 框架
- ⑤、导航组件
- ⑥、媒体组件
- ⑦、map 地图组件
- ⑧、canvas 画布组件
- ⑨、开放能力
- ⑩、无障碍访问
- ⑪、导航栏组件

> 项目常用的组件有：视图容器、基础内容、表单组件、导航组件 也是我们要重点学习的。

### 1、视图容器组件

TIP

项目中常用的视图容器组件有：`view`、`scroll-view`、`swiper`、`swiper-item`

### 1.1、view 视图容器

TIP

- 普通视图区域，类似于 HTML 中的 div ，是一个块级元素
- 常用来实现页面结构的布局效果

在 `pages/index/index.wxml` 中写入结构

```html
<!-- pages/index/index.wxml -->
<view class="container">
  <view class="con-item item-1">Arry老师</view>
  <view class="con-item item-2">清心老师</view>
  <view class="con-item item-3">Allen老师</view>
</view>
```

在 `pages/index/index.wxss` 中写入样式

```css
/** pages/index/index.wxss **/
.container {
  display: flex;
  flex-direction: row;
  /* flex-direction: column; */
  justify-content: space-around;
}
.con-item {
  width: 200rpx;
  height: 200rpx;
  background-color: skyblue;
  color: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
}
.item-2 {
  background-color: tomato;
}
.item-3 {
  background-color: green;
}
```

或 另一种方式布局

```css
/**index.wxss**/
.container {
  display: flex;
  justify-content: space-around;
}
.container view {
  width: 200rpx;
  height: 200rpx;
  color: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
}
.container view:nth-child(1) {
  background-color: tomato;
}
.container view:nth-child(2) {
  background-color: skyblue;
}
.container view:nth-child(3) {
  background-color: lightcoral;
}
```

效果如下

![image-20230331192151163](https://www.arryblog.com/assets/img/image-20230331192151163.0d7c8a1d.png)

### 1.2、scroll-view 可滚动视图区域

TIP

可滚动视图区域。使用竖向滚动时，需要给[scroll-view (opens new window)](https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html)一个固定高度，通过 WXSS 设置 height。组件属性的长度单位默认为 px，[2.4.0 (opens new window)](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html)起支持传入单位(rpx/px)

> scroll-view 常用属性，更多属性[点击查阅官方文档(opens new window)](https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html)

- scroll-x 允许横向滚动（注：横向滚动时，必须给 scroll-view 固定宽度）
- scroll-y 允许纵向滚动（注：纵向滚动时，必须给 scroll-view 固定高度）

> 常用来实现滚动列表效果

![GIF-2023-4-2-2-35-55](https://www.arryblog.com/assets/img/GIF-2023-4-2-2-35-55.07625151.gif)

在 `pages/list/list.wxml` 中定义结构

```html
<!--pages/list/list.wxml-->
<view class="container">
  <view class="category">
    <scroll-view class="nav-left" scroll-y="{{true}}">
      <view class="nav-left-item nav-left-item-active">人气 TOP</view>
      <view class="nav-left-item">爆款套餐</view>
      <view class="nav-left-item">咖啡</view>
      <view class="nav-left-item">奶茶</view>
      <view class="nav-left-item">甜品小点</view>
      <view class="nav-left-item">水果茶</view>
      <view class="nav-left-item">烘焙轻食</view>
      <view class="nav-left-item">大师咖啡</view>
      <view class="nav-left-item">纯茶</view>
      <view class="nav-left-item">拿铁家族</view>
      <view class="nav-left-item">咖啡</view>
      <view class="nav-left-item">奶茶</view>
    </scroll-view>
    <scroll-view class="nav-right" scroll-y="{{true}}">
      <view>A</view>
      <view>B</view>
      <view>C</view>
      <view>D</view>
      <view>E</view>
    </scroll-view>
  </view>
</view>
```

在 `pages/list/list.wxss` 定义样式

```css
/* pages/list/list.wxss */
page,
.container {
  height: 100%;
}
.category {
  height: 100%;
  display: flex;
  flex-direction: row;
}
.nav-left {
  width: 24%;
  height: 100%;
  background-color: #f6f6f6;
}
.nav-right {
  width: 76%;
  height: 100%;
  background-color: lightblue;
}
.nav-left-item {
  height: 120rpx;
  line-height: 120rpx;
  text-align: center;
}
/* 选中左侧导航样式 */
.nav-left-item-active {
  background-color: #fff;
  color: #ff5762;
  border-left: 8rpx solid #ff5762;
}
/* 去掉滚动条 */
::-webkit-scrollbar {
  width: 0;
  height: 0;
  color: transparent;
}

.nav-right view {
  height: 300rpx;
  line-height: 300rpx;
  text-align: center;
}
.nav-right view:nth-child(1) {
  background-color: tomato;
}
.nav-right view:nth-child(2) {
  background-color: skyblue;
}
.nav-right view:nth-child(3) {
  background-color: lightpink;
}
.nav-right view:nth-child(4) {
  background-color: lightgrey;
}
.nav-right view:nth-child(5) {
  background-color: lightseagreen;
}
```

实现效果如下

![GIF-2023-4-2-3-30-38](https://www.arryblog.com/assets/img/GIF-2023-4-2-3-30-38.2bf38618.gif)

### 1.3、swiper、swiper-item 滑块视图容器

TIP

- swiper 用于定义轮播图容器组件
- swiper-item 轮播图 item 组件，放置在 swiper 组件中，否则会导致未定义的行为

常用 swiper 相关属性

| 属性                   | 描述                 | 类型    | 默认值            | 必填 |
| :--------------------- | :------------------- | :------ | :---------------- | :--- |
| indicator-dots         | 是否显示面板指示点   | boolean | false             | 否   |
| indicator-color        | 指示点颜色           | color   | rgba(0, 0, 0, .3) | 否   |
| indicator-active-color | 当前选中的指示点颜色 | color   | #000000           | 否   |
| autoplay               | 是否自动切换         | boolean | false             | 否   |
| interval               | 自动切换时间间隔     | number  | 5000              | 否   |
| circular               | 是否采用衔接滑动     | boolean | false             | 否   |
| vertical               | 滑动方向是否为纵向   | boolean | false             | 否   |

> [更多 swiper 属性点击查阅官方文档(opens new window)](https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html)

![GIF-2023-4-2-4-17-33](https://www.arryblog.com/assets/img/GIF-2023-4-2-4-17-33.fb03f711.gif)

在 `pages/swiper/swiper.wxml` 中定义 swiper 结构

```html
<!--pages/swiper/swiper.wxml-->
<swiper
  class="swiper-container"
  indicator-dots
  autoplay
  current="2"
  indicator-color="#fff"
  indicator-active-color="grey"
  circular
>
  <swiper-item>
    <view class="item-con">one</view>
  </swiper-item>
  <swiper-item>
    <view class="item-con">two</view>
  </swiper-item>
  <swiper-item>
    <view class="item-con">three</view>
  </swiper-item>
  <swiper-item>
    <view class="item-con">four</view>
  </swiper-item>
  <swiper-item>
    <view class="item-con">five</view>
  </swiper-item>
</swiper>
```

在 `pages/swiper/swiper.wxss` 中定义样式

```css
/* pages/swiper/swiper.wxss */
.swiper-container {
  height: 300rpx;
  background-color: skyblue;
}
.item-con {
  height: 100%;
  line-height: 300rpx;
  text-align: center;
}
swiper-item:nth-child(1) .item-con {
  background-color: tomato;
}
swiper-item:nth-child(2) .item-con {
  background-color: skyblue;
}
swiper-item:nth-child(3) .item-con {
  background-color: lightpink;
}
swiper-item:nth-child(4) .item-con {
  background-color: lightseagreen;
}
swiper-item:nth-child(5) .item-con {
  background-color: lightgrey;
}
```

### 2、icon 图标组件

> 详细配置 [查阅官方文档 (opens new window)](https://developers.weixin.qq.com/miniprogram/dev/component/icon.html)即可

```html
<!--pages/icon/icon.wxml-->
<view class="container">
  <icon type="success" size="100rpx" color="#07c160" />
  <icon type="success_no_circle" size="100rpx" color="red" />
  <icon type="info" size="100rpx" color="#10AEFF" />
  <icon type="warn" size="100rpx" color="#e7c000" />
  <icon type="waiting" size="100rpx" color="#F76260" />
  <icon type="search" size="100rpx" color="#B2B2B2" />
</view>
```

效果如下

![image-20230402042430497](https://www.arryblog.com/assets/img/image-20230402042430497.c326a92b.png)

### 3、text 文本组件

TIP

类似 HTML 中的 span 标签，是一个行内（内联）元素

> 内联元素不会自占一行，与其他内联元素在同一行显示，且宽高由内容撑起。

- user-select 属性实现长按选中文本内容的效果
- 注：只有 text 文本能实现长按选中文本内容的效果，其他标签无法实现

在 `pages/text/text.wxml` 定义页面结构

```html
<!--pages/text/text.wxml-->
<view>
  文本长按选中：
  <text user-select="{{true}}">
    艾编程 - 为每个互联网人提供高质量的终身学习平台
  </text>
</view>
<view>
  手机号长按选中：
  <text user-select="{{true}}">1311234567</text>
</view>
<view>
  身份证号长按选中：
  <text user-select="{{true}}">110101200603072796</text>
</view>
```

在 `pages/text/text.wxss` 中定义样式

```css
/* pages/text/text.wxss */
view {
  margin-bottom: 50rpx;
}
```

效果如下

![GIF-2023-4-2-4-45-21](https://www.arryblog.com/assets/img/GIF-2023-4-2-4-45-21.8a32a016.gif)

> 在真机上调试，效果更佳

### 4、rich-text 富文本组件

TIP

rich-text 支持把 HTML 字符串渲染为 WXML 结构

使用 rich-text 组件的 nodes 属性节点，将 HTML 字符串渲染为对应的 UI 效果

> 应用场景：后台通过富文本框编辑上传的文本内容，在前端进行结构渲染时使用。如新闻页面、文章、商品详情页等的渲染等。

```html
<rich-text
  nodes="<div style='width: 200px;height: 100px; background:skyblue;text-align:center;line-height: 100px;color:#fff;margin: 100px auto;'> <span>Arry老师</span> </div>"
/>
```

效果如下

![image-20230402051530360](https://www.arryblog.com/assets/img/image-20230402051530360.72c02eee.png)

### 5、button 按钮组件

TIP

相比与 HTML 中 button 按钮，在小程序中的 button 功能更丰富

通过 button 按钮的 open-type 属性可以调用微信开放能力（打开客服会话、转发、获取用户手机号、用户信息、打开 App、获取用户头像等）

> 详细查阅 [button 按钮官方文档(opens new window)](https://developers.weixin.qq.com/miniprogram/dev/component/button.html)

```html
<!--pages/button/button.wxml-->

<!-- 按钮的样式类型，通过 type 属性设置 -->
<view></view>
<button>默认按钮</button>
<button type="primary">绿色按钮</button>
<button type="default">白色按钮</button>
<button type="warn">红色警告按钮</button>

<!-- 镂空按钮 -->
<button type="primary" plain>绿色按钮</button>
<button type="default" plain>白色按钮</button>
<button type="warn" plain>红色警告按钮</button>

<!-- 按钮禁用 -->
<button disabled="true">按钮禁用</button>

<!-- 名称前是否带 loading 图标	-->
<button type="primary" loading="true">loading 按钮</button>

<!-- 小尺寸按钮 type="mini" -->
<button type="primary" size="mini">绿色按钮</button>
<button type="default" size="mini">白色按钮</button>
<button type="warn" size="mini">红色警告按钮</button>

<!-- open-type 微信开发能力 -->
<button open-type="contact">打开客服会话</button>
<button open-type="share">触发用户转发</button>
<button open-type="feedback">打开“意见反馈”页面</button>
```

效果如下

![image-20230402060512127](https://www.arryblog.com/assets/img/image-20230402060512127.b9435de5.png)

注：

目前看到的样式是小程序新版的默认样式，如果不需要可在 `app.json` 中删除以下配置即可

```json
{
  "style": "v2"
}
```

删除后效果如下

![image-20230402060852286](https://www.arryblog.com/assets/img/image-20230402060852286.d1af1827.png)

### 6、image 图片组件

TIP

- 支持 JPG、PNG、SVG、WEBP、GIF 等格式
- image 组件默认宽度 320px、高度 240px

> 详细查阅 [image 官方文档(opens new window)](https://developers.weixin.qq.com/miniprogram/dev/component/image.html)

mode 属性，常用图片裁剪、缩放模式的值如下

| mode 的值   | 说明                                                                                                                                 |
| :---------- | :----------------------------------------------------------------------------------------------------------------------------------- |
| scaleToFill | 缩放模式，不保持纵横比缩放图片，使图片的宽高完全拉伸至填满 image 元素                                                                |
| aspectFit   | 缩放模式，保持纵横比缩放图片，使图片的长边能完全显示出来。也就是说，可以完整地将图片显示出来。                                       |
| aspectFill  | 缩放模式，保持纵横比缩放图片，只保证图片的短边能完全显示出来。也就是说，图片通常只在水平或垂直方向是完整的，另一个方向将会发生截取。 |
| widthFix    | 缩放模式，宽度不变，高度自动变化，保持原图宽高比不变                                                                                 |
| heightFix   | 缩放模式，高度不变，宽度自动变化，保持原图宽高比不变                                                                                 |

```html
<!-- 
    不添加图片地址时
    image 组件默认宽度320px、高度240px 
-->
<image></image>

<!-- 改变 mode 的值，来测试效果 -->
<image src="../../img/cat.jpg" mode="aspectFit" />
```

效果如下

![image-20230402062833310](https://www.arryblog.com/assets/img/image-20230402062833310.2282cab7.png)

### 7、navigator 导航组件

TIP

- navigator 页面链接
- 类似 HTML 中的 a 标签，但又有很大的不同
- 实际开发中会讲导航分为：声明式导航、编程式导航、导航传参，其中会涉及到 JS 逻辑层的内容 和 微信 API 相关知识，后续在统一讲解。目前先做了解即可 ！

> 详细查阅 [navigator 官方文档(opens new window)](https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html)

## 二、视图层 - 数据绑定

TIP

深入浅出微信小程序视图层的 WXML 模板语法 - 数据绑定方式，绑定内容，绑定属性，控制属性，关键字，运算 ....

详细查阅 [小程序官方文档 - WXML 语法参考(opens new window)](https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/)

### 1、小程序中数据绑定的方式

TIP

- 在 data 中定义数据
- 在 WXML 中使用数据

> 与 Vue 类似的语法结构

### 1.1、data 中定义数据

TIP

在页面中的 `.js` 文件中，把数据定义到 data 对象中。

> 如下

```js
// pages/index/index.js
Page({
  data: {
    // 字符串类型的数据
    message: "arry老师",
    // 数组类型的数据
    userInfo: [{ username: "arry老师" }, { sex: "man" }, { age: 18 }],
  },
});
```

### 1.2、Mustache 语法实现数据绑定

TIP

将 data 中的数据绑定到小程序页面中进行渲染，使用 Mustache 语法（双大括号）将变量包起来。Mustache 语法也被叫做 “插值表达式”

> 可作用于：内容、组件属性、控制属性、关键字、运算、组合使用等

```html
<!--pages/index/index.wxml-->
<!-- {{ 要绑定的数据名称 }} -->
<view>{{ message }}</view>
```

> 类似 Vue 模板语法中的 插值表达式 ，详细查看 [Vue 的官方文档 - 模板语法(opens new window)](https://cn.vuejs.org/guide/essentials/template-syntax.html)

### 1.3、Mustache 语法的应用场景

TIP

- 绑定内容（组件属性、控制属性、关键字）
- 运算（三元运算、算术运算、逻辑判断、字符串运算、数据路径运算）

### 2、动态绑定内容

在小程序 `.js` 页面逻辑中

```js
// index.js
Page({
  data: {
    msg: "艾编程",
  },
});
```

在小程序`.wxml`页面中

```html
<!--index.wxml-->
<view>{{ msg }}</view>
```

### 3、动态绑定属性

在小程序 `.js` 页面逻辑中

```js
// index.js
Page({
  data: {
    id: 0,
    imgUrl: "https://web.arryblog.com/applets-img/new-product-2.png",
  },
});
```

在小程序`.wxml`页面中

```html
<!--index.wxml-->
<view id="item-{{ id }}"></view>
<image src="{{ imgUrl }}" mode="widthFix" />
```

效果如下

![image-20230403172947712](https://www.arryblog.com/assets/img/image-20230403172947712.ec4bcc75.png)

注：

在 Vue 中动态绑定属性会使用 `v-bind` 指令，详细查阅 [Vue 官方文档 - Attribute 绑定(opens new window)](https://cn.vuejs.org/guide/essentials/template-syntax.html#attribute-bindings)

> 小程序中 不论绑定内容还是属性都需要用到 Mustache 语法

### 4、控制属性

在小程序`.wxml`页面中

```html
<!--index.wxml-->
<!-- 如果 condition = true 显示该元素，false 不显示 -->
<view wx:if="{{condition}}">arry老师</view>
```

在小程序 `.js` 页面逻辑中

```js
// index.js
Page({
  data: {
    condition: true,
  },
});
```

### 5、关键字

TIP

- `true`：boolean 类型的 true，代表真值。
- `false`： boolean 类型的 false，代表假值。

在小程序`.wxml`页面中

```html
<!--index.wxml-->
<view class="container">
  <view>
    爱好：
    <label><checkbox checked="{{true}}" />篮球 </label>
    <label><checkbox checked="{{true}}" />书法 </label>
    <label><checkbox checked="{{false}}" />画画</label>
  </view>
</view>
```

特别注意：

不要直接写 `checked="false"`，其计算结果是一个字符串，转成 boolean 类型后代表真值。

![image-20230403174132629](https://www.arryblog.com/assets/img/image-20230403174132629.c47582a6.png)

### 6、运算

TIP

可以在 `{{}}` 内进行简单的运算。

> 支持的有如下几种方式

### 6.1、三元运算

在小程序`.wxml`页面中

```html
<view hidden="{{ flag ? true : false }}">arry老师</view>
```

在小程序 `.js` 页面逻辑中

```js
// index.js
Page({
  data: {
    flag: false,
  },
});
```

### 6.2、算数运算

在小程序`.wxml`页面中

```html
<!--index.wxml-->
<view> {{a + b}} + {{c}} + d </view>
```

在小程序 `.js` 页面逻辑中

```js
// index.js
Page({
  data: {
    a: 1,
    b: 2,
    c: 3,
  },
});
```

> ```
> view` 中的内容为 `3 + 3 + d
> ```

### 6.3、逻辑判断

在小程序`.wxml`页面中

```html
<!--index.wxml-->
<view wx:if="{{length > 5}}"> arry老师 </view>
```

在小程序 `.js` 页面逻辑中

```js
// index.js
Page({
  data: {
    length: 6,
  },
});
```

### 6.4、字符串运算

在小程序`.wxml`页面中

```html
<!--index.wxml-->
<view>{{"Hello " + username}}</view>
```

在小程序 `.js` 页面逻辑中

```js
// index.js
Page({
  data: {
    username: "arry老师",
  },
});
```

> 页面显示结果：“Hello arry 老师”

### 6.5、数据路径运算

在小程序`.wxml`页面中

```html
<!--index.wxml-->
<view>{{object.key}} {{array[0]}} , {{array[1]}}</view>
```

在小程序 `.js` 页面逻辑中

```js
// index.js
Page({
  data: {
    object: {
      key: "Hello ",
    },
    array: ["arry老师", "Allen老师"],
  },
});
```

> 页面显示结果：“Hello arry 老师 ，Allen 老师”

## 三、视图层 - 列表渲染

TIP

在组件上使用 `wx:for` 控制属性绑定一个数组，即可使用数组中各项的数据重复渲染该组件。

> 默认数组的当前项的

- 下标（索引）变量名默认为 `index`，即当前循环的索引
- 数组当前项的变量名默认为 `item`，即当前循环的每一项

### 1、wx:for

在小程序`.wxml`页面中

```html
<!--index.wxml-->
<view wx:for="{{users}}"> 索引：{{index}} ，item 项： {{item.username}} </view>
```

在小程序 `.js` 页面逻辑中

```js
// index.js
Page({
    data: {
        users: [
            { username: "arry老师" },
            { username: "allen老师" },
            { username: "清心老师" },
        ],
    });
```

运行结果如下

![image-20230403184132436](https://www.arryblog.com/assets/img/image-20230403184132436.71d06e0a.png)

### 2、手动指定元素和下标的变量名

TIP

- 使用 `wx:for-item` 可以指定数组当前元素的变量名
- 使用 `wx:for-index` 可以指定数组当前下标的变量名

```html
<!--index.wxml-->
<!-- 
	默认值
	wx:for-index="index"
	wx:for-item="item"
-->
<view wx:for="{{users}}" wx:for-index="idx" wx:for-item="itemName">
  {{idx}} - {{itemName.username}}
</view>
```

### 3、wx:for 也可以嵌套

下边是一个九九乘法表

```html
<!--index.wxml-->
<view wx:for="{{[1, 2, 3, 4, 5, 6, 7, 8, 9]}}" wx:for-item="i">
  <view wx:for="{{[1, 2, 3, 4, 5, 6, 7, 8, 9]}}" wx:for-item="j">
    <view wx:if="{{i <= j}}"> {{i}} * {{j}} = {{i * j}} </view>
  </view>
</view>
```

注：

以上代码，运行时控制台报警告提示：性能不好，建议 为`wx：for`提供`wx：key`以提高性能。（如下控制台）

![image-20230403184926806](https://www.arryblog.com/assets/img/image-20230403184926806.7706555f.png)

优化后的代码（不再报警告信息）

```html
<!--index.wxml-->
<view wx:for="{{[1, 2, 3, 4, 5, 6, 7, 8, 9]}}" wx:for-item="i" wx:key="*this">
  <view wx:for="{{[1, 2, 3, 4, 5, 6, 7, 8, 9]}}" wx:for-item="j" wx:key="*this">
    <view wx:if="{{i <= j}}"> {{i}} * {{j}} = {{i * j}} </view>
  </view>
</view>
```

### 4、wx:key 的使用

TIP

在小程序开发中，列表的渲染建议为渲染出来的列表选项指定唯一的 key 值，从而提高渲染的性能和效率

> 类似于 Vue 列表渲染中的 `:key` ，对于 [Vue 的官方文档 - 通过 key 管理状态(opens new window)](https://cn.vuejs.org/guide/essentials/list.html#maintaining-state-with-key)

如果列表中项目的位置会动态改变或者有新的项目添加到列表中，并且希望列表中的项目保持自己的特征和状态（如 [input (opens new window)](https://developers.weixin.qq.com/miniprogram/dev/component/input.html)中的输入内容，[switch (opens new window)](https://developers.weixin.qq.com/miniprogram/dev/component/switch.html)的选中状态），需要使用 `wx:key` 来指定列表中项目的唯一的标识符。

**`wx:key` 的值以两种形式提供**

- ①、字符串，代表在 for 循环的 array 中 item 的某个 property，该 property 的值需要是列表中唯一的字符串或数字，且不能动态改变。
- ②、保留关键字 `*this` 代表在 for 循环中的 item 本身，这种表示需要 item 本身是一个唯一的字符串或者数字。

当数据改变触发渲染层重新渲染的时候，会校正带有 key 的组件，框架会确保他们被重新排序，而不是重新创建，以确保使组件保持自身的状态，并且提高列表渲染时的效率。

**如不提供 `wx:key`，会报一个 `warning`， 如果明确知道该列表是静态，或者不必关注其顺序，可以选择忽略。**

添加 `wx:key` 的代码，不再报警告 （在没有 id 时，可使用 `*this` 或 默认的`index` 作为唯一的 key 值）

```html
<view wx:for="{{users}}" wx:key="*this"> {{index}} - {{item.username}} </view>

<!-- 或 -->
<view wx:for="{{users}}" wx:key="index"> {{index}} - {{item.username}} </view>
```

如果有 `id` 时，推荐使用 id 作为唯一的 key 值

```js
// index.js
Page({
    data: {
        users: [
            { id: 1001, username: "arry老师" },
            { id: 1002, username: "allen老师" },
            { id: 1003, username: "清心老师" },
        ],
    });
<!--index.wxml-->
<!-- 这里的 key 只需要给每一项的 id 名称即可 -->
<view wx:for="{{users}}" wx:key="id">
  {{ item.id }} - {{ item.username }}
</view>
```

### 5、block wx:for 结构块

TIP

类似 `block wx:if`，也可以将 `wx:for` 用在`<block/>`标签上，以渲染一个包含多节点的结构块。

> 例如：

```html
<!-- 
    <view wx:for="{{users}}">Hello</view>
    <view wx:for="{{users}}">World</view>
-->
<!-- 以上代码执行输出，并不是我们想要的将 “Hello World” 输出 3遍 -->

<!-- block 为 包含多节点的结构块，以下输出就符合我们的预期了 -->
<block wx:for="{{users}}" wx:key="*this">
  <view> Hello </view>
  <view> World </view>
</block>
// index.js Page({ data: { users: [1, 2, 3], }, });
```

![image-20230215012756380](https://www.arryblog.com/assets/img/image-20230215012756380.3a6b7417.png)

### 6、注意事项

当 `wx:for` 的值为字符串时，会将字符串解析成字符串数组

```html
<view wx:for="array" wx:key="*this"> {{item}} </view>
```

等同于

```html
<view wx:for="{{['a','r','r','a','y']}}" wx:key="*this"> {{item}} </view>
```

![image-20230215010855189](https://www.arryblog.com/assets/img/image-20230215010855189.b1b75c96.png)

注意：

花括号和引号之间如果有空格，将最终被解析成为字符串

```html
<view wx:for="{{[1,2,3]}} " wx:key="*this"> {{item}} </view>
```

等同于

```html
<view wx:for="{{[1,2,3] + ' '}}" wx:key="*this"> {{item}} </view>
```

![image-20230215011135195](https://www.arryblog.com/assets/img/image-20230215011135195.9acd67fb.png)

### 7、表格布局实践应用

TIP

使用我们学过的 `wx:for` 循环输出一个小学生的课表（效果如下），数据动态从 `courseList` 中获取，设置 WXSS 样式实现表格效果，样式自定义

![image-20230215131951383](data:image/png;base64,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)

data 数据如下

```json
courseList: [
    {'content': ['语文', '数学', '体育']},
    {'content': ['数学', '语文', '音乐']},
    {'content': ['美术', '英语', '体育']},
    {'content': ['数学', '语文', '英语']},
    {'content': ['语文', '数学', '实践']}
]
```

具体实现代码如下

```html
<!--pages/index/index.wxml-->
<view class="table">
  <view wx:for="{{courseList}}" wx:key="*this" class="col">
    <view class="week">星期 {{index + 1}}</view>
    <view class="course" wx:for="{{item.content}}" wx:key="*this"
      >{{item}}</view
    >
  </view>
</view>
/**index.wxss**/ .table { width: 90%; display: flex; align-items: center;
justify-content: space-between; text-align: center; border: 1rpx solid #000;
margin: 0 auto; margin-top: 20rpx; } .col { width: 20%; } .week, .course {
border: 1rpx solid #000; padding: 0 10rpx; } // index.js Page({ data: {
courseList: [ { content: ["语文", "数学", "体育"] }, { content: ["数学", "语文",
"音乐"] }, { content: ["美术", "英语", "体育"] }, { content: ["数学", "语文",
"英语"] }, { content: ["语文", "数学", "实践"] }, ], }, });
```

![image-20230215132638096](https://www.arryblog.com/assets/img/image-20230215132638096.02167890.png)

## 四、视图层 - 条件渲染

TIP

按照条件渲染视图层的内容也是小程序开发中常用的指令

### 1、wx:if

在框架中，使用 `wx:if=""` 来判断是否需要渲染该代码块

```html
<!--pages/index/index.wxml-->
<!-- condition: true 显示 / false 不显示 view标签 -->
<view wx:if="{{condition}}"> arry老师 </view>
// index.js Page({ data: { condition: true, }, });
```

也可以用 `wx:elif` 和 `wx:else` 来添加一个 else 块：

```html
<!--pages/index/index.wxml-->
<view wx:if="{{length > 5}}"> 1 </view>
<view wx:elif="{{length < 3}}"> 2 </view>
<view wx:else> 3 </view>
// index.js Page({ data: { length: 8, }, });
```

应用场景，对用户性别的条件判断展示

```html
<view>
  性别：
  <text wx:if="{{ sex === 1 }}">男</text>
  <text wx:elif="{{ sex === 2 }}">女</text>
  <text wx:else>保密</text>
</view>
Page({ data: { sex: 1, }, });
```

### 2、block wx:if

因为 `wx:if` 是一个控制属性，需要将它添加到一个标签上。如果要一次性判断多个组件标签，可以使用一个 `<block/>` 标签将多个组件包装起来，并在上边使用 `wx:if` 控制属性。

```html
<!--pages/index/index.wxml-->
<block wx:if="{{true}}">
  <view> arry老师 </view>
  <view> allen老师 </view>
</block>
```

注意：

`<block/>` 并不是一个组件，它仅仅是一个包装元素，不会在页面中做任何渲染，只接受控制属性。

### 3、wx:if vs hidden

TIP

因为 `wx:if` 之中的模板也可能包含数据绑定，所以当 `wx:if` 的条件值切换时，框架有一个局部渲染的过程，因为它会确保条件块在切换时销毁或重新渲染。

同时 `wx:if` 也是**惰性的**，如果在初始渲染条件为 `false`，框架什么也不做，在条件第一次变成真的时候才开始局部渲染。

相比之下，`hidden` 就简单的多，组件始终会被渲染，只是简单的控制显示与隐藏。

一般来说，`wx:if` 有更高的切换消耗而 `hidden` 有更高的初始渲染消耗。因此，如果需要频繁切换的情景下，用 `hidden` 更好，如果在运行时条件不大可能改变则 `wx:if` 较好。

```html
<!-- wx:if 为 true 时 显示 -->
<view wx:if="{{true}}"> 艾编程 wx:if </view>
<!-- hidden 为 false 时 显示 -->
<view hidden="{{false}}"> 艾编程 hidden </view>
```

### 4、总结：wx:if 与 hidden 的对比

TIP

详细对比两者的关系

### 4.1、运行方式不同

TIP

- `wx:if` 以动态创建和移除元素的方式，控制元素的展示与隐藏
- hidden 以 切换样式的方式（`display: none/block;`）控制元素的显示域隐藏

![image-20230404210300785](https://www.arryblog.com/assets/img/image-20230404210300785.3fe1cdd9.png)

注：

通过改变 `true/false` 的值在控制台观察 WXML 的结构变化 和 display 值的变化

### 4.2、使用建议

TIP

- 频繁切换时，建议使用 hidden
- 控制条件复杂时，建议使用 `wx:if` 搭配 `wx:elif` 、`wx:else` 进行展示 与 隐藏的切换

## 五、视图层代码拆分和模板语法

TIP

我们重点看两个部分的内容

- 对视图层的代码进行拆分
- 模板（template）语法

### 1、视图层代码的拆分

TIP

使用 include 标签引入，include 将目标文件整个代码引入，相当于是拷贝到 include 位置

```html
<!--pages/index/index.wxml-->
<view> header </view>
<!-- include 将目标文件整个代码引入，相当于是拷贝到 include 位置 -->
<include src="./content" />
<view> footer </view>
```

在 `index.wxml` 文件同级目录下新建 `content.wxml`

```html
<!--pages/index/content.wxml-->
<view> {{content}} </view>
// index.js Page({ data: { content: "这是 content 的动态数据", }, });
```

![image-20230215162314353](https://www.arryblog.com/assets/img/image-20230215162314353-16808675885131.afada2fd.png)

注意事项：

直接使用 include 标签语法引入的方式，是有缺陷的。会造成我们整个项目工程文件的可维护性变低

如：以上代码中如需查找 `content` 变量，就需要层层查找，一旦项目文件多了，几乎无法查阅。

> 为了解决这个问题，小程序中就有了 `template` 模板的语法

### 2、template 模板

TIP

WXML 提供模板（template），可以在模板中定义代码片段，然后在不同的地方调用。

**定义模板**

> 新建一个 `content.wxml` 文件，使用 name 属性 定义一个名为 content-template 的 template 模板

```html
<!--pages/index/content.wxml-->

<!-- 使用 name 属性 定义一个名为 content-template 的模板 -->
<template name="content-template">
  <view> {{content}} </view>
</template>
```

**使用模板**

> 在 `index.wxml` 中使用 import 引入 content 模板。使用 is 属性，声明需要的使用的模板，然后将模板所需要的 data 传入

```html
<!--pages/index/index.wxml-->

<!-- 通过 import 引入 content 模板 -->
<import src="./content.wxml" />

<view> header </view>
<!-- 
        1、使用 content.wxml 模板时，用 is 属性 = "模板名称"
        2、template 模板无法直接使用到 逻辑层 index.js 中的 content 变量 
        3、如果需要使用，就需要给 template 模板传递该变量 ，通过 data = {{逻辑层的变量名}} 传递
        4、如下代码中 data="{{content}}" 相当于 data="{{content: content}}"
    -->
<template is="content-template" data="{{content}}" />
<view> footer </view>
```

**data 数据**

```js
// index.js
Page({
  data: {
    content: "这是 content 的动态数据",
  },
});
```

![image-20230215180406116](https://www.arryblog.com/assets/img/image-20230215180406116-16808675885132.aa2a6d10.png)

### 3、模板的作用域

TIP

模板拥有自己的作用域，只能使用 data 传入的数据。

## 六、视图层 - 事件绑定

TIP

深入浅出小程序中的事件，事件对象、属性、事件传参、事件绑定，及综合实践

### 1、是什么是事件

TIP

事件是渲染层（视图层）到逻辑层的通讯方式。通过事件可以将用户在渲染层产生的行为，反馈到逻辑层进行业务的处理。

![image-20230405164607049](https://www.arryblog.com/assets/img/image-20230405164607049.304675e7.png)

### 2、小程序常用的事件

TIP

微信小程序中相关事件，[详情见官方文档(opens new window)](https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html)

| 类型   | 绑定方式                      | 描述                                          |
| :----- | :---------------------------- | :-------------------------------------------- |
| tap    | `bindtap` 或 `bind:tap`       | 手指触摸后马上离开，类似 HTML 中的 click 事件 |
| input  | `bindinput` 或 `bind:input`   | 文本框的输入事件                              |
| change | `bindchange` 或 `bind:change` | 状态改变时触发                                |

### 3、事件对象的属性

TIP

当事件回调函数触发的时候，会收到一个事件对象 event

> 它的详细属性如下

| 属性           | 类型    | 描述                                         |
| :------------- | :------ | :------------------------------------------- |
| type           | String  | 事件类型                                     |
| timeStamp      | Integer | 页面打开到触发事件所经过的毫秒数             |
| target         | Object  | 触发事件的源组件属性值的集合                 |
| currentTarget  | Object  | 事件绑定的当前组件属性值的集合               |
| detail         | Object  | 额外的信息                                   |
| touches        | Array   | 触摸事件，当前停留在屏幕中的触摸点信息的数组 |
| changedTouches | Array   | 触摸事件，当前变化的触摸点信息的数组         |

### 4、target 和 currentTarget 的区别

TIP

- target 是触发该事件的源头组件
- currentTarget 是当前事件所绑定的组件

![image-20230406012715427](https://www.arryblog.com/assets/img/image-20230406012715427.e5fad1f9.png)

```html
<!-- 给外层的 view 绑定事件 -->
<view class="container" bindtap="handlerBtn">
  <button type="primary" plain>按钮</button>
</view>
.container { width: 100%; height: 200rpx; background-color: lightblue; display:
flex; align-items: center; }
```

注：

当点击内部按钮时，点击事件会以冒泡的方式向外扩散，同时还会触发外层 view 的 tap 事件处理函数。相对于外层的 view 来说，如下

- `e.target` 指向的是触发事件的源头组件。即 `e.target` 是内部的按钮组件
- `e.currentTarget` 指向的是当前正在触发事件的那个组件。即 `e.currentTarget` 是当前的 view 组件

> 关于事件命名，我们经常会使用 `handler`开头。翻译过来为：驯兽员 或 操作者
>
> 如：`handleNumberChange` 、`handleSelect` 等 。`handler`

### 5、bindtap 的用法

TIP

由于小程序中没有 DOM 和 BOM，因此小程序不存在 HTML 中的 onclick 鼠标点击事件，而是通过 tap 事件来响应用户的触摸行为。

通过 bindtap 为组件绑定 tap 触摸事件，如下

```html
<!-- 事件绑定 -->
<button type="primary" bindtap="handlerBtn">点我一下</button>
```

在 `.js` 页面逻辑中定义对应的事件处理函数，事件参数通过形参 `event`（大部分都会简写为 `e`）来接收

```js
Page({
  // 按钮的 tap 事件处理函数
  handlerBtn(e) {
    // 事件参数对象 e
    console.log(e);
  },
});
```

![image-20230406021640310](https://www.arryblog.com/assets/img/image-20230406021640310.d201a19c.png)

### 6、在事件处理函数中为 data 赋值

TIP

通过调用 `this.setData(dataObject)` 方法，可以给页面 data 中的数据重新赋值。如下

在页面中 `.js` 逻辑中

```js
Page({
  // 页面的初始数据
  data: {
    count: 0,
  },
  // 点击 +1 事件
  handlerCount(e) {
    // console.log("点我了");
    // 给页面中的 data 数据重新赋值
    this.setData({
      count: this.data.count + 1,
    });
  },
});
```

在 `.wxml` 页面中

```html
<button type="primary" bindtap="handlerCount">点我 + 1</button>
<view> 显示count值：{{ count }} </view>
```

### 7、在小程序中的事件传参

TIP

在小程序中的事件传参比较特殊，不能在绑定事件的同时为事件处理函数传递参数。

```html
<!-- 如下错误示范 -->
<button type="primary" bindtap="handlerCount(100)">点我</button>
```

因为，在小程序中会把 bindtap 的属性值，统一当做事件名称来处理，相当于要调用一个名称为 `handlerCount(100)` 的事件处理函数，而不是调用 `handlerCount()` 并传递参数 `100`

> 在 Vue 中的事件传参就 类似 HTMl 结构中的点击事件传参一样了。详细查阅 [Vue 官方文档 - 事件处理(opens new window)](https://cn.vuejs.org/guide/essentials/event-handling.html)

**在小程序中的事件传参语法**

可以为组件提供 `data-*` 自定义属性传参，其中 `*` 代表的是参数的名称。如下

```html
<!-- 该方法的 num 参数会被解析为：字符串类型 100 -->
<button type="primary" bindtap="handlerBtn" data-num="100">点我</button>
<!-- 该方法的 num 参数会被解析为：数字类型 100 -->
<button type="primary" bindtap="handlerBtn" data-num="{{ 100 }}">点我</button>
```

注：

- num 会被解析为 **参数的名称**
- 数字 100 会被解析为参数的值

> 在小程序中只能通过该方式传递参数

### 8、在小程序中获取事件传参的值

TIP

在事件处理函数中，通过 `e.target.dataset.参数名称` 方式，即可获取到具体参数值。

> 如下

```js
handlerBtn(e){
    // 获取携带的 num 参数的具体值
    const num = e.target.dataset.num;
    console.log(num); // 100

    // dataset 是一个对象，包含了所有通过 data-* 传递过来的所有参数项
    const params = e.target.dataset;
    console.log(params); // {count: "1", num: 100}

    // e.currentTarget 指向的是当前正在触发事件的那个组件
    const params = e.currentTarget.dataset;
}
```

在 `.wxml` 页面中

```html
<button type="primary" bindtap="handlerBtn" data-num="{{ 100 }}" data-count="1">
  点我
</button>
```

### 9、bindinput 事件

TIP

在小程序中，通过 input 事件来响应文本框的输入事件。

通过 bindinput 可以为文本框绑定输入事件

```html
<input type="text" bindinput="handlerInput" />
```

在页面的 `.js` 文件中定义事件处理函数

```js
Page({
  handlerInput(e) {
    // e.detail.value 是变化过后，文本框最新的值
    const value = e.detail.value;
    console.log(value);
  },
});
```

![image-20230407105457608](https://www.arryblog.com/assets/img/image-20230407105457608.f382c739.png)

### 10、文本框 与 data 之间的数据同步

> 实现步骤如下

- ①、定义数据

```js
Page({
  data: {
    info: "arry老师",
  },
});
```

- ②、渲染页面结构

```html
<input type="text" value="{{ info }}" bindinput="handlerInput" />

<!-- 在页面中实时展示文本框的值 -->
<view> Hello ，{{ info }} </view>
```

- ③、美化样式

```css
input {
  border: 1px solid gray;
  margin: 20rpx;
  padding: 10rpx;
  border-radius: 10rpx;
  font-size: 30rpx;
}
```

- ④、绑定 input 事件处理函数

```js
Page({
  data: {
    info: "arry老师",
  },
  handlerInput(e) {
    // 通过 e.detail.value 获取文本框最新的值
    const value = e.detail.value;
    // 更新 data 中的数据
    this.setData({
      info: value,
    });
  },
});
```

通过控制台中的 AppData 也可以实时查看到 data 中的数据变化

![image-20230407112334943](https://www.arryblog.com/assets/img/image-20230407112334943.262f132e.png)

### 11、应用实践：加减数量组件

![GIF-2023-4-7-12-52-30](data:image/gif;base64,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)

在 `.wxml` 中定页面结构

```html
<view class="container">
  <!-- 主容器 -->
  <view class="stepper">
    <!-- 减号 -->
    <text class="{{minusStatus}}" bindtap="bindMinus">-</text>
    <!-- 数值 -->
    <input type="number" bindchange="bindManual" value="{{num}}" />
    <!-- 加号 -->
    <text class="normal" bindtap="bindPlus">+</text>
  </view>
</view>
```

在 `.wxss` 中定义样式

```css
.container {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 200rpx;
}
/*主容器*/
.stepper {
  width: 160rpx;
  height: 52rpx;
  /*给主容器设一个边框*/
  border: 2rpx solid #ccc;
  border-radius: 6rpx;
  display: flex;
}
/*加号和减号*/
.stepper text {
  width: 36rpx;
  line-height: 52rpx;
  text-align: center;
}
/*数值*/
.stepper input {
  width: 80rpx;
  height: 52rpx;
  text-align: center;
  font-size: 24rpx;
  /*给中间的input设置左右边框即可*/
  border-left: 2rpx solid #ccc;
  border-right: 2rpx solid #ccc;
}
/*普通样式*/
.stepper .normal {
  color: black;
}
/*禁用样式*/
.stepper .disabled {
  color: #ccc;
}
```

在 `.js` 文件中定义页面逻辑

```js
Page({
  data: {
    // input默认是1
    num: 1,
    // 使用data数据对象设置样式名
    minusStatus: "disabled",
  },
  /* 点击减号 */
  bindMinus() {
    var num = this.data.num;
    // 如果大于1时，才可以减
    if (num > 1) {
      num--;
    }
    // 只有大于1的时候，才能normal状态，否则disable状态
    var minusStatus = num <= 1 ? "disabled" : "normal";
    // 将数值与状态写回
    this.setData({
      num: num,
      minusStatus: minusStatus,
    });
  },
  /* 点击加号 */
  bindPlus() {
    var num = this.data.num;
    // 不作过多考虑自增1
    num++;
    // 只有大于1的时候，才能normal状态，否则disable状态
    var minusStatus = num < 1 ? "disabled" : "normal";
    // 将数值与状态写回
    this.setData({
      num: num,
      minusStatus: minusStatus,
    });
  },
  /* 输入框事件 */
  bindManual(e) {
    var num = e.detail.value;
    // 将数值与状态写回
    this.setData({
      num: num,
    });
  },
});
```
